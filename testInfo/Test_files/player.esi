
		
		
		
	
	
		
	
	
		
	
		
	
	
		
	
		
		!function(e){var t=e.babelHelpers={};t.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.jsx=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var a=t&&t.defaultProps,o=arguments.length-3;if(n||0===o||(n={}),n&&a)for(var s in a)void 0===n[s]&&(n[s]=a[s]);else n||(n=a||{});if(1===o)n.children=r;else if(o>1){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),t.asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},t.asyncGenerator=function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,r){var s={key:e,arg:t,resolve:n,reject:r,next:null};o?o=o.next=s:(a=o=s,i(e,t))})}function i(n,a){try{var o=t[n](a),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){i("next",e)},function(e){i("throw",e)}):r(o.done?"return":"normal",o.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}a=a.next,a?i(a.key,a.arg):o=null}var a,o;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),t.asyncGeneratorDelegate=function(e,t){function n(n,i){return r=!0,i=new Promise(function(t){t(e[n](i))}),{done:!1,value:t(i)}}var i={},r=!1;return"function"==typeof Symbol&&Symbol.iterator&&(i[Symbol.iterator]=function(){return this}),i.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(i.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(i.return=function(e){return n("return",e)}),i},t.asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,a){try{var o=t[r](a),s=o.value}catch(e){return void n(e)}return o.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}},t.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),t.defineEnumerableProperties=function(e,t){for(var n in t){var i=t[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}return e},t.defaults=function(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}return e},t.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},t.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},t.instanceof=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},t.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},t.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.newArrowCheck=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},t.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},t.objectWithoutProperties=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},t.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},t.selfGlobal="undefined"==typeof e?self:e,t.set=function e(t,n,i,r){var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);null!==o&&e(o,n,i,r)}else if("value"in a&&a.writable)a.value=i;else{var s=a.set;void 0!==s&&s.call(r,i)}return i},t.slicedToArray=function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t.slicedToArrayLoose=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,i=[],r=e[Symbol.iterator]();!(n=r.next()).done&&(i.push(n.value),!t||i.length!==t););return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},t.taggedTemplateLiteral=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},t.taggedTemplateLiteralLoose=function(e,t){return e.raw=t,e},t.temporalRef=function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},t.temporalUndefined={},t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},t.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}}("undefined"==typeof global?self:global);try{var ce=new window.CustomEvent("test");if(ce.preventDefault(),!0!==ce.defaultPrevented)throw Error("Could not prevent default")}catch(e){var CustomEvent=function(e,t){var n,i;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}!function(e,t){e.ES6Promise||(e.ES6Promise=t(),e.ES6Promise.polyfill())}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){K=e}function i(e){q=e}function r(){return function(){return process.nextTick(u)}}function a(){return"undefined"!=typeof z?function(){z(u)}:l()}function o(){var e=0,t=new Z(u),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=u,function(){return e.port2.postMessage(0)}}function l(){var e=setTimeout;return function(){return e(u,1)}}function u(){for(var e=0;e<F;e+=2){var t=J[e],n=J[e+1];t(n),J[e]=void 0,J[e+1]=void 0}F=0}function c(){try{var e=require,t=e("vertx");return z=t.runOnLoop||t.runOnContext,a()}catch(e){return l()}}function h(e,t){var n=arguments,i=this,r=new this.constructor(f);void 0===r[te]&&H(r);var a=i._state;return a?!function(){var e=n[a-1];q(function(){return O(a,r,e,i._result)})}():C(i,r,e,t),r}function d(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(f);return k(n,e),n}function f(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function A(e){try{return e.then}catch(e){return ae.error=e,ae}}function v(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function g(e,t,n){q(function(e){var i=!1,r=v(n,t,function(n){i||(i=!0,t!==n?k(e,n):_(e,n))},function(t){i||(i=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,T(e,r))},e)}function m(e,t){t._state===ie?_(e,t._result):t._state===re?T(e,t._result):C(t,void 0,function(t){return k(e,t)},function(t){return T(e,t)})}function b(e,n,i){n.constructor===e.constructor&&i===h&&n.constructor.resolve===d?m(e,n):i===ae?T(e,ae.error):void 0===i?_(e,n):t(i)?g(e,n,i):_(e,n)}function k(t,n){t===n?T(t,p()):e(n)?b(t,n,A(n)):_(t,n)}function E(e){e._onerror&&e._onerror(e._result),N(e)}function _(e,t){e._state===ne&&(e._result=t,e._state=ie,0!==e._subscribers.length&&q(N,e))}function T(e,t){e._state===ne&&(e._state=re,e._result=t,q(E,e))}function C(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+ie]=n,r[a+re]=i,0===a&&e._state&&q(N,e)}function N(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?O(n,i,r,a):r(a);e._subscribers.length=0}}function P(){this.error=null}function S(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function O(e,n,i,r){var a=t(i),o=void 0,s=void 0,l=void 0,u=void 0;if(a){if(o=S(i,r),o===oe?(u=!0,s=o.error,o=null):l=!0,n===o)return void T(n,y())}else o=r,l=!0;n._state!==ne||(a&&l?k(n,o):u?T(n,s):e===ie?_(n,o):e===re&&T(n,o))}function M(e,t){try{t(function(t){k(e,t)},function(t){T(e,t)})}catch(t){T(e,t)}}function R(){return se++}function H(e){e[te]=se++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(f),this.promise[te]||H(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):T(this.promise,I())}function I(){return new Error("Array Methods must be provided an Array")}function w(e){return new L(this,e).promise}function D(e){var t=this;return new t(Y(e)?function(n,i){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function x(e){var t=this,n=new t(f);return T(n,e),n}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(e){this[te]=R(),this._result=this._state=void 0,this._subscribers=[],f!==e&&("function"!=typeof e&&G(),this instanceof j?M(this,e):U())}function V(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=B,F=0,z=void 0,K=void 0,q=function(e,t){J[F]=e,J[F+1]=t,F+=2,2===F&&(K?K(u):ee())},Q="undefined"!=typeof window?window:void 0,W=Q||{},Z=W.MutationObserver||W.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3),ee=void 0;ee=X?r():Z?o():$?s():void 0===Q&&"function"==typeof require?c():l();var te=Math.random().toString(36).substring(16),ne=void 0,ie=1,re=2,ae=new P,oe=new P,se=0;return L.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ne&&n<e;n++)this._eachEntry(t[n],n)},L.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===d){var r=A(e);if(r===h&&e._state!==ne)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===j){var a=new n(f);b(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},L.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===ne&&(this._remaining--,e===re?T(i,n):this._result[t]=n),0===this._remaining&&_(i,this._result)},L.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){return n._settledAt(ie,t,e)},function(e){return n._settledAt(re,t,e)})},j.all=w,j.race=D,j.resolve=d,j.reject=x,j._setScheduler=n,j._setAsap=i,j._asap=q,j.prototype={constructor:j,then:h,catch:function(e){return this.then(null,e)}},j.polyfill=V,j.Promise=j,j}),"function"!=typeof Object.values&&(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})}),"function"!=typeof Object.entries&&(Object.entries=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})}),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=0;r<i;){var a=n[r];if(e.call(t,a,r,n))return a;r++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=0;r<i;){if(e.call(t,n[r],r,n))return r;r++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;var r=0|t;for(r=Math.max(0<=r?r:i-Math.abs(r),0);r<i;){var a=n[r],o=e;if(a===o||"number"==typeof a&&"number"==typeof o&&isNaN(a)&&isNaN(o))return!0;r++}return!1}}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1;return function(e){var i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,a=1<arguments.length?arguments[1]:void 0;if("undefined"!=typeof a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=arguments[2])}var o=Number(i.length);o=isNaN(o)?0:0!==o&&isFinite(o)?(0<o?1:-1)*Math.floor(Math.abs(o)):o,o=Math.min(Math.max(o,0),n);for(var s,l=t(this)?Object(new this(o)):Array(o),u=0;u<o;)s=i[u],l[u]=a?"undefined"==typeof r?a(s,u):a.call(r,s,u):s,u+=1;return l.length=o,l}}()),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{value:function(e,t){return e>>=0,t=String("undefined"!=typeof t?t:" "),this.length>e?String(this):(e-=this.length,e>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}}),String.prototype.includes||Object.defineProperty(String.prototype,"includes",{value:function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}}),function(e){function t(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}function n(e,t,n){this.name=e,this.body=t,this.type=n}function i(){}function r(){}function a(){this.subCommands=[],this.initializeMacroCommand()}function o(e,t){this.mediatorName=e||this.constructor.NAME,this.viewComponent=t}function s(e,t){this.proxyName=e||this.constructor.NAME,null!=t&&this.setData(t)}function l(e){if(null!=l.instanceMap[e])throw Error(l.MULTITON_MSG);this.initializeNotifier(e),l.instanceMap[e]=this,this.initializeFacade()}function u(e){if(null!=u.instanceMap[e])throw Error(u.MULTITON_MSG);this.multitonKey=e,u.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function c(e){if(c.instanceMap[e])throw Error(c.MULTITON_MSG);this.multitonKey=e,c.instanceMap[e]=this,this.proxyMap=[],this.initializeModel()}function h(e){if(null!=h.instanceMap[e])throw Error(h.MULTITON_MSG);this.multitonKey=e,h.instanceMap[this.multitonKey]=this,this.commandMap=[],this.initializeController()}function d(e,t,n){for(var i,r,e=e.split("."),n=n||f.global,a=0,o=e.length;a<o;a++)i=n,r=e[a],n=null==n[r]?n[r]={}:n[r];return null==t?n:i[r]=t}if(null==e&&(e=window),!e.puremvc){t.prototype.setNotifyMethod=function(e){this.notify=e},t.prototype.setNotifyContext=function(e){this.context=e},t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.getNotifyContext=function(){return this.context},t.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},t.prototype.compareNotifyContext=function(e){return e===this.context},t.prototype.notify=null,t.prototype.context=null,n.prototype.getName=function(){return this.name},n.prototype.setBody=function(e){this.body=e},n.prototype.getBody=function(){return this.body},n.prototype.setType=function(e){this.type=e},n.prototype.getType=function(){return this.type},n.prototype.toString=function(){var e="Notification Name: "+this.getName(),e=e+("\nBody:"+(null==this.body?"null":this.body.toString()));return e+="\nType:"+(null==this.type?"null":this.type)},n.prototype.name=null,n.prototype.type=null,n.prototype.body=null,i.prototype.sendNotification=function(e,t,n){var i=this.getFacade();i&&i.sendNotification(e,t,n)},i.prototype.initializeNotifier=function(e){this.multitonKey=""+e,this.facade=this.getFacade()},i.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(i.MULTITON_MSG);return l.getInstance(this.multitonKey)},i.prototype.multitonKey=null,i.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",r.prototype=new i,r.prototype.constructor=r,r.prototype.execute=function(){},a.prototype=new i,a.prototype.constructor=a,a.prototype.subCommands=null,a.prototype.initializeMacroCommand=function(){},a.prototype.addSubCommand=function(e){this.subCommands.push(e)},a.prototype.execute=function(e){for(;0<this.subCommands.length;){var t=new(this.subCommands.shift());t.initializeNotifier(this.multitonKey),t.execute(e)}},o.NAME="Mediator",o.prototype=new i,o.prototype.constructor=o,o.prototype.getMediatorName=function(){return this.mediatorName},o.prototype.setViewComponent=function(e){this.viewComponent=e},o.prototype.getViewComponent=function(){return this.viewComponent},o.prototype.listNotificationInterests=function(){return[]},o.prototype.handleNotification=function(){},o.prototype.onRegister=function(){},o.prototype.onRemove=function(){},o.prototype.mediatorName=null,o.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new i,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(e){this.data=e},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,l.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},l.getInstance=function(e){return null==e?null:(null==l.instanceMap[e]&&(l.instanceMap[e]=new l(e)),l.instanceMap[e])},l.prototype.initializeController=function(){null==this.controller&&(this.controller=h.getInstance(this.multitonKey))},l.prototype.initializeModel=function(){null==this.model&&(this.model=c.getInstance(this.multitonKey))},l.prototype.initializeView=function(){null==this.view&&(this.view=u.getInstance(this.multitonKey))},l.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},l.prototype.removeCommand=function(e){this.controller.removeCommand(e)},l.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},l.prototype.registerProxy=function(e){this.model.registerProxy(e)},l.prototype.retrieveProxy=function(e){return this.model.retrieveProxy(e)},l.prototype.removeProxy=function(e){var t=null;return null!=this.model&&(t=this.model.removeProxy(e)),t},l.prototype.hasProxy=function(e){return this.model.hasProxy(e)},l.prototype.registerMediator=function(e){null!=this.view&&this.view.registerMediator(e)},l.prototype.retrieveMediator=function(e){return this.view.retrieveMediator(e)},l.prototype.removeMediator=function(e){var t=null;return null!=this.view&&(t=this.view.removeMediator(e)),t},l.prototype.hasMediator=function(e){return this.view.hasMediator(e)},l.prototype.sendNotification=function(e,t,i){this.notifyObservers(new n(e,t,i))},l.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},l.prototype.initializeNotifier=function(e){this.multitonKey=e},l.hasCore=function(e){return null!=l.instanceMap[e]},l.removeCore=function(e){null!=l.instanceMap[e]&&(c.removeModel(e),u.removeView(e),h.removeController(e),delete l.instanceMap[e])},l.prototype.controller=null,l.prototype.model=null,l.prototype.view=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="Facade instance for this Multiton key already constructed!",u.prototype.initializeView=function(){},u.getInstance=function(e){return null==e?null:(null==u.instanceMap[e]&&(u.instanceMap[e]=new u(e)),u.instanceMap[e])},u.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},u.prototype.notifyObservers=function(e){if(null!=this.observerMap[e.getName()]){for(var t,n=this.observerMap[e.getName()],i=[],r=0;r<n.length;r++)t=n[r],i.push(t);for(r=0;r<i.length;r++)t=i[r],t.notifyObserver(e)}},u.prototype.removeObserver=function(e,t){for(var n=this.observerMap[e],i=0;i<n.length;i++)if(1==n[i].compareNotifyContext(t)){n.splice(i,1);break}0==n.length&&delete this.observerMap[e]},u.prototype.registerMediator=function(e){if(null==this.mediatorMap[e.getMediatorName()]){e.initializeNotifier(this.multitonKey),this.mediatorMap[e.getMediatorName()]=e;var n=e.listNotificationInterests();if(0<n.length)for(var i=new t(e.handleNotification,e),r=0;r<n.length;r++)this.registerObserver(n[r],i);e.onRegister()}},u.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},u.prototype.removeMediator=function(e){var t=this.mediatorMap[e];if(t){for(var n=t.listNotificationInterests(),i=0;i<n.length;i++)this.removeObserver(n[i],t);delete this.mediatorMap[e],t.onRemove()}return t},u.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},u.removeView=function(e){delete u.instanceMap[e]},u.prototype.mediatorMap=null,u.prototype.observerMap=null,u.instanceMap=[],u.prototype.multitonKey=null,u.MULTITON_MSG="View instance for this Multiton key already constructed!",c.prototype.initializeModel=function(){},c.getInstance=function(e){return null==e?null:(null==c.instanceMap[e]&&(c.instanceMap[e]=new c(e)),c.instanceMap[e])},c.prototype.registerProxy=function(e){e.initializeNotifier(this.multitonKey),this.proxyMap[e.getProxyName()]=e,e.onRegister()},c.prototype.retrieveProxy=function(e){return this.proxyMap[e]},c.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},c.prototype.removeProxy=function(e){var t=this.proxyMap[e];return t&&(this.proxyMap[e]=null,t.onRemove()),t},c.removeModel=function(e){delete c.instanceMap[e]},c.prototype.proxyMap=null,c.instanceMap=[],c.MULTITON_MSG="Model instance for this Multiton key already constructed!",h.prototype.initializeController=function(){this.view=u.getInstance(this.multitonKey)},h.getInstance=function(e){return null==e?null:(null==this.instanceMap[e]&&(this.instanceMap[e]=new this(e)),this.instanceMap[e])},h.prototype.executeCommand=function(e){var t=this.commandMap[e.getName()];null!=t&&(t=new t,t.initializeNotifier(this.multitonKey),t.execute(e))},h.prototype.registerCommand=function(e,n){null==this.commandMap[e]&&this.view.registerObserver(e,new t(this.executeCommand,this)),this.commandMap[e]=n},h.prototype.hasCommand=function(e){return null!=this.commandMap[e]},h.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},h.removeController=function(e){delete this.instanceMap[e]},h.prototype.view=null,h.prototype.commandMap=null,h.prototype.multitonKey=null,h.instanceMap=[],h.MULTITON_MSG="controller key for this Multiton key already constructed";var f={global:function(){return this}(),extend:function(e,t){if("function"!=typeof e)throw new TypeError("#extend- child should be Function");if("function"!=typeof t)throw new TypeError("#extend- parent should be Function");if(t!==e){var n=new Function;return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},decorate:function(e,t){for(var n in t)e[n]=t[n];return e}};e.puremvc={View:u,Model:c,Controller:h,SimpleCommand:r,MacroCommand:a,Facade:l,Mediator:o,Observer:t,Notification:n,Notifier:i,Proxy:s,define:function(e,t,n){e||(e={});var i=e.name,r=e.parent,a="function"==typeof r,o=e.scope||null;if("parent"in e&&!a)throw new TypeError("Class parent must be Function");if(e.hasOwnProperty("constructor")){if(e=e.constructor,"function"!=typeof e)throw new TypeError("Class constructor must be Function")}else e=a?function(){r.apply(this,arguments)}:new Function;if(a&&f.extend(e,r),t&&(a=e.prototype,f.decorate(a,t),a.constructor=e),n&&f.decorate(e,n),i){if("string"!=typeof i)throw new TypeError("Class name must be primitive string");d(i,e,o)}return e},declare:d}}}(this),!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(t,n):e[t]=n()}(this,"bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}function i(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}var r,a=t(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(e),l=!s&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),c=!u&&/nexus\s*[0-9]+/i.test(e),h=/CrOS/.test(e),d=/silk/i.test(e),f=/sailfish/i.test(e),p=/tizen/i.test(e),y=/(web|hpw)os/i.test(e),A=/windows phone/i.test(e),v=(/SamsungBrowser/i.test(e),!A&&/windows/i.test(e)),g=!a&&!d&&/macintosh/i.test(e),m=!l&&!f&&!p&&!y&&/linux/i.test(e),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),k=t(/version\/(\d+(\.\d+)?)/i),E=/tablet/i.test(e)&&!/tablet pc/i.test(e),_=!E&&/[^-]mobi/i.test(e),T=/xbox/i.test(e);/opera/i.test(e)?r={name:"Opera",opera:o,version:k||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?r={name:"Opera",opera:o,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||k}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:o,version:k||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:o,version:k||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:o,version:k||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:o,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:o,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:o,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:o,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:o,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:o,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:A?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:o},b?(r.msedge=o,r.version=b):(r.msie=o,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:o,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:h?r={name:"Chrome",osname:"Chrome OS",chromeos:o,chromeBook:o,chrome:o,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?r={name:"Microsoft Edge",msedge:o,version:b}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:o,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||k}:f?r={name:"Sailfish",osname:"Sailfish OS",sailfish:o,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:o,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:o,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=o,r.osname="Firefox OS")):d?r={name:"Amazon Silk",silk:o,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:o,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:o,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:o,version:k||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:y?(r={name:"WebOS",osname:"WebOS",webos:o,version:k||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=o)):/bada/i.test(e)?r={name:"Bada",osname:"Bada",bada:o,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?r={name:"Tizen",osname:"Tizen",tizen:o,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||k}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:o,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||k}:/chromium/i.test(e)?r={name:"Chromium",chromium:o,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||k}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:o,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:l?r={name:"Android",version:k}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:o},k&&(r.version=k)):a?(r={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},k&&(r.version=k)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:o,version:t(/googlebot\/(\d+(\.\d+))/i)||k}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=o):(r.name=r.name||"Webkit",r.webkit=o),!r.version&&k&&(r.version=k)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=o,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!l&&!r.silk?!r.windowsphone&&a?(r[a]=o,r.ios=o,r.osname="iOS"):g?(r.mac=o,r.osname="macOS"):T?(r.xbox=o,r.osname="Xbox"):v?(r.windows=o,r.osname="Windows"):m&&(r.linux=o,r.osname="Linux"):(r.android=o,r.osname="Android");var C="";r.windows?C=i(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?C=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?(C=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),C=C.replace(/[_\s]/g,".")):a?(C=t(/os (\d+([_\s]\d+)*) like mac os x/i),C=C.replace(/[_\s]/g,".")):l?C=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?C=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?C=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?C=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(C=t(/tizen[\/\s](\d+(\.\d+)*)/i)),
C&&(r.osversion=C);var N=!r.windows&&C.split(".")[0];return E||c||"ipad"==a||l&&(3==N||N>=4&&!_)||r.silk?r.tablet=o:(_||"iphone"==a||"ipod"==a||l||u||r.blackberry||r.webos||r.bada)&&(r.mobile=o),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=o:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=o:r.x=o,r}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),r=n(e,function(e){var r=i-t(e);return e+=new Array(r+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(r[0][i]>r[1][i])return 1;if(r[0][i]!==r[1][i])return-1;if(0===i)return 0}}function r(t,n,r){var a=s;"string"==typeof n&&(r=n,n=void 0),void 0===n&&(n=!1),r&&(a=e(r));var o=""+a.version;for(var l in t)if(t.hasOwnProperty(l)&&a[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return i([o,t[l]])<0}return n}function a(e,t,n){return!r(e,t,n)}var o=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=r,s.compareVersions=i,s.check=a,s._detect=e,s.detect=e,s});var akamai=function(){"use strict";function e(){tn.observe(document.body,{childList:!0,subtree:!0})}function t(e){if(e&&0!=e.length){var t=Promise.resolve();T.each(e,function(e){e.classList&&e.classList.contains("amp-inline")&&Object.keys(e.dataset)&&"true"!=e.dataset.embedded&&(t=t.then(dt.embed.bind(null,e)))})}}function n(){t(document.querySelectorAll(".amp-inline"))}var i=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.code=n,r.metadata=i,e instanceof t){var a;return a=e,babelHelpers.possibleConstructorReturn(r,a)}return"object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))?(r.metadata=e.metadata||e,r.message=e.message||("function"==typeof e.toString?e.toString():void 0),e.code&&(r.code=e.code)):r.message=e,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"create",value:function(e,n,i){return new t(e,n,i)}}]),t}(Error),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,e),this.type=t,this.detail=this.data=n,this.target=null}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n){return new e(t,n)}}]),e}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;babelHelpers.classCallCheck(this,e),this._target=t,this._listenerMap={},this._regex=[],this.emit=this.dispatch.bind(this),this.on=this.addListener=this.addEventListener.bind(this),this.off=this.removeListener=this.removeEventListener.bind(this)}return babelHelpers.createClass(e,[{key:"addEventListener",value:function(e,t){if(null!=t&&null!=e)if(e instanceof RegExp)t.__regex=e,this._regex.push(t);else{if(null==this._listenerMap[e]&&(this._listenerMap[e]=[]),this._listenerMap[e].indexOf(t)!==-1)return;this._listenerMap[e].push(t)}}},{key:"once",value:function(e,t){t.__once=!0,this.addEventListener(e,t)}},{key:"dispatchEvent",value:function(e){if(null!=this._target||null!=this._listenerMap){null==e.target&&(e.target=this._target);var t=e.type,n=this._target,i=n["on"+t];null!=i&&i.apply(n,[e]);var r=this._listenerMap[t];if(r&&r.length>0)for(var a=r.slice(),o=0,s=a.length;o<s;++o)i=a[o],i.call(n,e),i.__once===!0&&r.splice(o,1);if(r=this._regex,r.length>0)for(var l=r.slice(),u=0,c=l.length;u<c;++u)i=l[u],0!=i.__regex.test(t)&&(i.call(n,e),i.__once===!0&&r.splice(u,1))}}},{key:"dispatch",value:function(e,t){this.dispatchEvent(r.create(e,t))}},{key:"removeEventListener",value:function(e,t){if(null!=t&&null!=e){var n=e instanceof RegExp,i=n?this._regex:this._listenerMap[e];if(null!=i){var r=i.indexOf(t);if(r!==-1&&(!n||e.toString()===i[r].__regex.toString()))return i.splice(r,1)}}}},{key:"destroy",value:function(){this._listenerMap=null,this._target=null}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),o=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:setTimeout,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:clearTimeout;babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.delay=e,a.repeatCount=n,a.timerGroup=timerGroup,a._running=!1,a._currentCount=0,a._timeout=null,a._startTime=null,a._currentTime=0,a.setTimeout=i,a.clearTimeout=r,a.next=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.delay;return a.setTimeout(function(){return a.tick()},e)},a.clear=function(){return a.clearTimeout(a._timeout)},a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"reset",value:function(){this.stop(),this._currentCount=0,this._currentTime=0,this._startTime=null}},{key:"start",value:function(){if(this._running!==!0){var e=this.delay-(this._currentTime-this.delay*this._currentCount);this._running=!0,this._timeout=this.next(e)}}},{key:"stop",value:function(){this._running!==!1&&(this.clear(),this._currentTime+=Date.now()-this._startTime,this._timeout=null,this._running=!1)}},{key:"tick",value:function(){this.clear();var e=0!==this.repeatCount&&this._currentCount>=this.repeatCount;this._currentCount++,this._currentTime+=this.delay,this._startTime=Date.now(),e===!1&&(this._timeout=this.next(this.delay)),this.dispatch(t.TIMER,this),e===!0&&(this.stop(),this.dispatch(t.COMPLETE,this))}},{key:"destroy",value:function(){this.clear(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.next=null}},{key:"currentCount",get:function(){return this._currentCount}},{key:"running",get:function(){return this._running}},{key:"time",get:function(){return this._currentTime+(Date.now()-this._startTime)}}],[{key:"create",value:function(e,n,i,r){return new t(e,n,i,r)}},{key:"TIMER",get:function(){return"timer"}},{key:"COMPLETE",get:function(){return"complete"}}]),t}(a),s=function(){function e(t){babelHelpers.classCallCheck(this,e),this.id=t,this.intervals=[],this.timeouts=[],this.timers=[],this.groups=[]}return babelHelpers.createClass(e,[{key:"setTimeout",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=this,o=setTimeout(function(){e.apply(null,i),a.clearTimeout(o)},t);return this.timeouts.push(o),o})},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this.timeouts.indexOf(e);return t!==-1&&this.timeouts.splice(t,1),clearTimeout(e)})},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=setInterval.apply(null,t);return this.intervals.push(i),i})},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this.intervals.indexOf(e);return t!==-1&&this.intervals.splice(t,1),clearInterval(e)})},{key:"setImmediate",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a=setTimeout(function(){e.apply(null,i),t.clearImmediate(a)},0);return this.timeouts.push(a),a}},{key:"clearImmediate",value:function(e){var t=this.timeouts.indexOf(e);return t!==-1&&this.timeouts.splice(t,1),clearTimeout(e)}},{key:"setTimer",value:function(e,t){var n=o.create(e,t,this.setTimeout.bind(this),this.clearTimeout.bind(this));return this.timers.push(n),n}},{key:"clearTimer",value:function(e){var t=this.timers.indexOf(e);t!==-1&&(e=this.timers.splice(t,1),e.destroy())}},{key:"setGroup",value:function(t){var n=e.create(t);return this.groups.push(n),n}},{key:"clearGroup",value:function(e){var t=this.groups.indexOf(timer);if(t!==-1){var n=this.groups.splice(t,1);n.destroy()}}},{key:"destroy",value:function(){this.intervals.forEach(function(e){return clearInterval(e)}),this.timeouts.forEach(function(e){return clearTimeout(e)}),this.timers.forEach(function(e){return e.destroy()}),this.groups.forEach(function(e){return e.destroy()}),this.id=null,this.intervals=null,this.timeouts=null,this.timers=null,this.groups=null}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),l=function(e,t){return function(){return e(t.apply(void 0,arguments))}},u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(l)},c="__DONE__",h=function(e,t){if(null!=e&&"function"==typeof t)if(void 0!=e.length){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n,e)===c)return}else for(var r in e)if(t(e[r],r,e)===c)return},d=function(){return function(e,t){return e.push(t),e}},f=function(){return function(e,t){return t}},p=function(e){return function(t){return function(n,i,r){return t(n,e(i,r),r)}}},y=function(e){return function(t){return function(n,i,r){return e(i,r)?t(n,i,r):n}}},A=function(e){return function(t){return function(n,i,r){return e(i,r),t(n,i,r)}}},v=function(e){return function(t){return function(n,i,r){return e(i,r)?t(n,i,r):(r(),n)}}},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return function(n){return function(i,r,a){return--t>0?n(i,r,a):(t=e,a(),n(i,r,a))}}},m=function(e,t,n,i){var r=e(t),a=function(){return o=!0},o=!1;return h(i,function(e){return o?c:void(n=r(n,e,a))}),n},b=function(e,t,n){return m(t,d(),e,n)},k=function(e,t){return b([],e,t)},E=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return k(u.apply(void 0,n),e)},_=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=null,a=u.apply(void 0,n)(f());return h(e,function(e){if(r=a(null,e))return c}),r},T={pipe:u,map:p,filter:y,tap:A,take:g,until:v,each:h,DONE:c,transform:E,find:_},C=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"construct",value:function(){var t=this,n=this.decode(window.location.search);e.typed={},e.amp={};var i=/^amp(_|-)/;return T.each(n,function(n,r){e[r]=n;var a=t.parse(n);e.typed[r]=a,i.test(r)&&(e.amp[L.toCamelCase(r.replace(i,""))]=a)}),!0}},{key:"encode",value:function(e,t){var n=this,i=[];return T.each(e,function(e,r){if(null!=e){var a=t?t+"["+r+"]":r;i.push("object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))?n.encode(e,a):a+"="+encodeURIComponent(e))}}),i.join("&")}},{key:"decode",value:function(e){var t=this,n=void 0;return null!=e&&(n={},e=e.replace(/^[^?]*\?/,""),e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,r,a){var o=decodeURIComponent(i),s=decodeURIComponent(a);if(/~/.test(s)&&(s=t.decodeObject(s)),/\[/.test(o)){var l=o.match(/[^\[]+/)[0];return o=o.match(/\[([A-Za-z]+)\]/)[1],null==n[l]&&(n[l]={}),void(n[l][o]=s)}n[o]=s})),n}},{key:"decodeObject",value:function(e){var t=this,n=void 0;return null!=e&&(n={},e.replace(/([^:~]+)(:([^~]*))?/g,function(e,i,r,a){n[decodeURIComponent(i)]=t.parse(decodeURIComponent(a))})),n}},{key:"parse",value:function(e){if("object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e)))return e;if("undefined"===e)return!0;var t=e.toLowerCase();if("true"===t||"false"===t)return"true"===t;if("null"===t)return null;if(t=parseFloat(e),!isNaN(t))return t;try{return t=JSON.parse(e)}catch(t){return e}}}]),e}(),N=function(){function e(t){if(babelHelpers.classCallCheck(this,e),this._url="string"==typeof t?t:t.url,this._method=t.method||"GET",this._withCredentials=t.withCredentials||!1,this._headers=t.headers||{},this._data=t.data||t.body||{},this._responseType=t.responseType,this._query=t.query,null!=t.query){var n=/\?/.test(this._url)?"&":"?";this._url+=n+C.encode(t.query)}}return babelHelpers.createClass(e,[{key:"url",get:function(){return this._url}},{key:"method",get:function(){return this._method}},{key:"withCredentials",get:function(){return this._withCredentials}},{key:"headers",get:function(){return this._headers}},{key:"query",get:function(){return this._query}},{key:"responseType",get:function(){return this._responseType}},{key:"data",get:function(){return this._data}},{key:"body",get:function(){return this._data}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),P=navigator,S=P.userAgent,O=P.appName,M=P.platform,R=P.appVersion,H=/((0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?)(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?/,L=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"semver",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(H)||[];return{major:parseInt(t[2]),minor:parseInt(t[3]),patch:parseInt(t[4]),pre:t[5],build:t[6],version:t[1],raw:t[0],toString:function(){return this.raw}}}},{key:"blankVideo",value:function(){return"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="}},{key:"getIEVersion",value:function(){var e=void 0,t=-1;return"Microsoft Internet Explorer"===O?e=/MSIE ([0-9]{1,}[\.0-9]{0,})/:"Netscape"===O?e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/:/Edge\/[0-9\.]+$/.test(S)&&(e=/Edge\/([0-9\.]+)/),null!=(null!=e?e.exec(S):void 0)&&(t=parseFloat(RegExp.$1)),t}},{key:"getEdgeVersion",value:function(){var e=-1;return/Edge\/([\d]+)/.exec(S)&&(e=parseFloat(RegExp.$1)),e}},{key:"getFFVersion",value:function(){var e=-1;return/Firefox\/([0-9\.]+)$/.exec(S)&&(e=parseFloat(RegExp.$1)),e}},{key:"getSafariVersion",value:function(){var e=-1;return/Safari\/[0-9\.]+$/.test(S)&&null!=/Version\/([0-9]+\.[0-9]+)/.exec(S)&&(e=parseFloat(RegExp.$1)),e}},{key:"isChrome",value:function(){return/Chrom(e|ium)/.test(S)}},{key:"getChromeVersion",value:function(){var e=-1;return/Chrome( Mobile)?\/([0-9\.]+)/.test(S)&&(e=parseFloat(S.match(/Chrome( Mobile)?\/([0-9\.]+)/)[2].split(".").slice(0,2).join("."))),e}},{key:"selectSource",value:function(t,n){return T.find(t.source,T.map(function(n){return Object.assign({type:e.getMimeType(t.src||n.src)},t,n)}),T.filter(function(e){return n(e)}))}},{key:"getSourceByType",value:function(t,n){var i=null!=t.source?t.source.slice():[];return null==t.type&&(t.type=e.getMimeType(t.src)),i.push(t),i.find(function(e){return e.type===n})}},{key:"getMimeType",value:function(t){return e.mimeTypes[e.getFileExtension(t)]}},{key:"selectTrack",value:function(e,t){return e.find(function(e){return e.kind===t})}},{key:"isIPhone",value:function(){return/iPhone/.test(M)||/iPhone/.test(S)}},{key:"isIPad",value:function(){return/iPad/.test(M)||/iPad/.test(S)}},{key:"isAndroid",value:function(){return/Android [4-9]/.test(S)}},{key:"isKindleFireHD",value:function(){return/Silk\/2/.test(S)}},{key:"isKindleFire",value:function(){return/Silk\/1/.test(S)}},{key:"isBlackBerry",value:function(){return/BlackBerry;|PlayBook|BB10/.test(S)}},{key:"isFirefoxOS",value:function(){return/\(Mobile;.*Firefox\//.test(S)}},{key:"isHTML5",value:function(){return e.isIOS()||e.isAndroid()||e.isKindleFireHD()||e.isBlackBerry()||e.isFirefoxOS()}},{key:"isIOS",value:function(){var e=/iP(hone|od|ad)/i;return e.test(M)||e.test(S)}},{key:"getIOSversion",value:function(){if(e.isIOS()){var t=R.match(/OS (\d+)_(\d+)_?(\d+)?/);if(null==t&&(t=R.match(/Version\/(\d+)\.(\d+)/)),null!=t)return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}}},{key:"isFullscreenDevice",value:function(){return e.isKindleFireHD()||e.isIPhone()}},{key:"getDevice",value:function(){var t="desktop";return e.isIPhone()?t="iphone":e.isIPad()?t="ipad":/Android/.test(S)?t="android":e.isKindleFireHD()?t="kindlefirehd":e.isKindleFire()&&(t="kindlefire"),t}},{key:"xmlToJson",value:function(t){var n={};return 9===t.nodeType&&(t=t.firstChild),1===t.nodeType?t.attributes.length>0&&(n["@attributes"]={},T.each(t.attributes,function(e){n["@attributes"][e.nodeName]=e.nodeValue})):3!==t.nodeType&&4!==t.nodeType||(n=t.nodeValue),t.hasChildNodes()&&T.each(t.childNodes,function(t){if(3!==t.nodeType||/\S/.test(t.nodeValue)){var i=t.nodeName.replace(/:/,"-"),r=e.xmlToJson(t);null==r["@attributes"]&&null!=r["#text"]&&(r=r["#text"]),null==n[i]?n[i]=r:(n[i]instanceof Array||(n[i]=[n[i]]),n[i].push(r))}}),n}},{key:"getXHR",value:function(){return new XMLHttpRequest}},{key:"getUTC",value:function(){return e.request("//time.akamai.com").then(function(e){return 1e3*parseFloat(e.responseText)})}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,i){t=N.create(t);var r=e.getXHR();if(r.open(t.method,t.url),r.onload=function(){t.checkStatus!==!1&&r.status>399&&i(r),n(r)},r.onerror=function(e){return i(r)},r.withCredentials=t.withCredentials,null!=t.responseType)try{r.responseType=t.responseType}catch(e){}if(null!=t.headers){var a=t.headers;T.each(a,function(e,t){null!=t&&null!=e&&r.setRequestHeader(t,e)})}return r.send(t.data)})}},{key:"requestText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.request(t).then(function(e){return e.responseText})}},{key:"requestJson",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.requestText(t).then(function(e){return JSON.parse(e)})}},{key:"jsonp",value:function(t,n){return new Promise(function(i,r){return window[n]=i,e.loadScript(t).then(function(e){e.parentNode.removeChild(e),window[n]=null;try{delete window[n]}catch(e){}}).catch(r)})}},{key:"loadScript",value:function(e,t){return new Promise(function(n,i){var r=t||document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.addEventListener?(a.onload=function(){n(a)},a.onerror=function(e){i(e)}):a.readyState&&(a.onreadystatechange=function(e){"loaded"!==this.readyState&&"complete"!==this.readyState||(this.onreadystatechange=null,n(a))}),a.src=e,r.appendChild(a)})}},{key:"loadStyleSheet",value:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.href=e,t.appendChild(n)}},{key:"loadImage",value:function(e){return new Promise(function(t,n){try{var i=document.createElement("img");return i.onload=function(e){return t(i)},i.onerror=function(e){return n(e)},i.src=e}catch(e){return n(e)}})}},{key:"getFileExtension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\?.*/,"").replace(/\#.*/,"").split(".").pop()}},{key:"isTouchDevice",value:function(){if(null==e.isTouch)try{document.createEvent("TouchEvent"),e.isTouch=!0}catch(t){e.isTouch=!1}return e.isTouch}},{key:"clamp",value:function(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}},{key:"override",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?n:null==n?t:(i===!0&&(t=e.clone(t),n=e.clone(n)),Object.getOwnPropertyNames(n).forEach(function(i){var r=n[i],a=t[i],o="undefined"==typeof r?"undefined":babelHelpers.typeof(r);"undefined"!==o&&(null==a||"object"!==("undefined"==typeof a?"undefined":babelHelpers.typeof(a))||r instanceof Array?t[i]=r:"object"===o&&(t[i]=e.override(a,r,!1)))}),t)}},{key:"merge",value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n[0]instanceof Array?n[0]:n;return r.reduce(function(t,n){return null!=n?e.override(t,n,!1):t},{})}},{key:"mixin",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(null==e||n.length<1)return e;var r=Object.getOwnPropertyNames,a=Object.getPrototypeOf;return n.forEach(function(t){var n=r(t).concat(r(a(t)));n.forEach(function(n){return e[n]=t[n]})}),e}},{key:"diff",value:function t(n,i){if(null==i)return null;if(null==n&&null!=i)return i;var r={};for(var a in i){var o=i[a],s=n[a];if(s!==o)if(null==s)r[a]=o;else switch("undefined"==typeof o?"undefined":babelHelpers.typeof(o)){case"string":case"number":case"boolean":case"function":r[a]=o;break;case"object":if(o instanceof Array)s.length!==o.length&&(r[a]=o);else{var t=e.diff(s,o);null!=t&&(r[a]=t)}}}return 0===Object.keys(r).length?null:r}},{key:"clone",value:function t(n){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null==n)return n;var t=n;if("object"===("undefined"==typeof n?"undefined":babelHelpers.typeof(n))){t=n instanceof Array?[]:{};var r=function(r){var a=n[r];if("object"===("undefined"==typeof a?"undefined":babelHelpers.typeof(a))&&null!==a&&i===!0)if(a instanceof Array)t[r]=[],a.forEach(function(n){return t[r].push(e.clone(n))});else{t[r]={};for(var o in a)t[r][o]=e.clone(a[o])}else t[r]=a};for(var a in n)r(a)}return t}},{key:"get",value:function(e,t){if(!(null==e||null==t||t.length<1)){"string"==typeof t&&(t=t.split("."));for(var n=0,i=t.length;n<i;++n){var r=t[n];if(null==e[r])return;e=e[r]}return e}}},{key:"set",value:function(e,t,n){if(!(null==e||null==t||t.length<1)){var i=t.length-1;t.forEach(function(t,r){return r===i?e[t]=n:(null==e[t]&&(e[t]={}),void(e=e[t]))})}}},{key:"formatTimecode",value:function(t,n){if(t=parseInt(t),isNaN(t))return"00:00";var i=e.formatZeroFill(t%60);return t=parseInt(t/60),i=e.formatZeroFill(t%60)+":"+i,t=parseInt(t/60),t>0&&(i=e.formatZeroFill(t)+":"+i),n>=3600&&5===i.length&&(i="00:"+i),i}},{key:"formatZeroFill",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toString().padStart(t,"0")}},{key:"toDate",value:function(e){return e instanceof Date?e:new Date(e)}},{key:"formatTime",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm:ss A",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{timezone:"",offset:-((new Date).getTimezoneOffset()/60)};if(t=e.toDate(t),null!=i.offset&&0!==i.offset&&(t=new Date(t.getTime()+Math.round(60*i.offset*60*1e3))),!isNaN(t.getTime())){var r=t.getUTCHours(),a=t.getUTCMinutes(),o=t.getUTCSeconds(),s=t.getUTCMilliseconds(),l=r%12||12,u=r<12?"am":"pm",c={hh:e.formatZeroFill(l),h:l,HH:e.formatZeroFill(r),H:r,mm:e.formatZeroFill(a),m:a,sss:e.formatZeroFill(s,3),ss:e.formatZeroFill(o),s:o,a:u,A:u.toUpperCase(),z:i.timezone};for(var h in c)n=n.replace(h,c[h]);return n}}},{key:"flattenTimecode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(!e)return NaN;var n=e.split(":"),i=0;if(4===n.length)i=parseInt(n.pop())/t;else if(3===n.length&&(n[2]=n[2].replace(",","."),n[2].indexOf(".")!==-1)){var r=n[2].split(".");(null!=r?r.length:void 0)>1&&(n[2]=r[0],i=parseInt(r[1])/1e3)}for(var a=parseInt(n.pop());n.length>0;)a+=Math.pow(60,n.length)*parseInt(n.shift());return a+i}},{key:"cacheBust",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cacheBust",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),i=e.indexOf("?")===-1?"?":"&";return e+i+t+"="+n}},{key:"getFeed",value:function(t){return e.request(t).then(function(t){return"document"===t.responseType||/^</.test(t.responseText)?e.xmlToJson(t.responseXML):JSON.parse(t.responseText)})}},{key:"trackMouse",value:function(){try{document.addEventListener("mousemove",e.mouseTracker),document.documentElement.addEventListener("mouseleave",function(t){if(null===t.relatedTarget)return e.doc=!1}),document.documentElement.addEventListener("mouseenter",function(t){if(null===t.relatedTarget)return e.doc=!0})}catch(e){}}},{key:"mouseTracker",value:function(t){e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY}},{key:"isMouseOverElement",value:function(t){var n=!1;if(null==t)return n;try{n=t.contains(document.elementFromPoint(e.clientX,e.clientY))}catch(e){n=!1}return n}},{key:"isMouseOverDocument",value:function(){return e.doc}},{key:"getActualSize",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.offsetWidth,i=e.offsetHeight;if(t===!0){var r=getComputedStyle(e);n+=parseInt(r.marginLeft)+parseInt(r.marginRight),i+=parseInt(r.marginTop)+parseInt(r.marginBottom)}return{width:n,height:i}}},{key:"isVolumeSettable",value:function(){var e=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(S.toLowerCase());return null==e||"android"===e[0]&&/Firefox/.test(S)}},{key:"createUID",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},r="",a=t-1,o=0;o<a;o++)r+=i(0,n-1).toString(n).toUpperCase();return e.uids[r]===!0?e.createUID(t,n):(e.uids[r]=!0,r)}},{key:"chain",value:function e(t,n){var e=Promise.resolve(n);return t.forEach(function(t){return e=e.then(t)}),e}},{key:"first",value:function(t,n){return Promise.resolve(n).then(t.shift()).then(function(e){return e}).catch(function(i){return t.length>0?e.first(t,n):null})}},{key:"transform",value:function(e,t){if(null==t||0===t.length)return Promise.resolve(e);t=t.map(function(e){return"function"==typeof e.transform?e.transform:e});var n=0,i=t.length-1,r=function(e){return n++,a(e)},a=function(e){var a=t[n];if("function"!=typeof a)throw new Error("Transform must be a valid function");return Promise.resolve(a(e,r)).then(function(e){return n<i?r(e):e})};return a(e)}},{key:"arrayBufferToString",value:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"parseJWT",value:function(e){var t=e.split(".");return{header:JSON.parse(atob(t[0])),payload:JSON.parse(atob(t[1])),signature:t[2]}}},{key:"getFullScreenApi",value:function(e,t){var n={};return null!=e.webkitRequestFullScreen?(n.enter=e.webkitRequestFullScreen.bind(e),n.exit=null!=document.webkitExitFullscreen?document.webkitExitFullscreen.bind(document):document.webkitCancelFullScreen.bind(document),n.event="onwebkitfullscreenchange",n.element="webkitFullscreenElement",n.error="webkitfullscreenerror"):null!=e.requestFullscreen?(n.enter=e.requestFullscreen.bind(e),n.exit=null!=document.exitFullscreen?document.exitFullscreen.bind(document):document.cancelFullscreen.bind(document),n.event="onfullscreenchange",n.element="fullscreenElement",n.error="fullscreenerror"):null!=e.mozRequestFullScreen?(n.enter=e.mozRequestFullScreen.bind(e),n.exit=document.mozCancelFullScreen.bind(document),n.event="onmozfullscreenchange",n.element="mozFullscreenElement",n.error="mozfullscreenerror"):null!=e.msRequestFullscreen?(n.enter=e.msRequestFullscreen.bind(e),n.exit=document.msExitFullscreen.bind(document),n.event="onmsfullscreenchange",n.element="msFullscreenElement",n.error="MSFullscreenError"):null!=t.webkitEnterFullscreen&&(n.enter=t.webkitEnterFullscreen.bind(t),n.exit=t.webkitExitFullscreen.bind(t),n.event=null,n.error=null),n}},{key:"stringToArray",value:function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0,r=e.length-1;i<r;i++)n[i]=e.charCodeAt(i);return n}},{key:"arrayToString",value:function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))}},{key:"base64DecodeUint8Array",value:function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n)),r=0,a=n-1;r<a;r++)i[r]=t.charCodeAt(r);return i}},{key:"base64EncodeUint8Array",value:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=e.length,i="",r=0;r<n;){var a=e[r++],o=r<n?e[r++]:Number.NaN,s=r<n?e[r++]:Number.NaN,l=a>>2,u=(3&a)<<4|o>>4,c=(15&o)<<2|s>>6,h=63&s;isNaN(o)?c=h=64:isNaN(s)&&(h=64),i+=t.charAt(l)+t.charAt(u)+t.charAt(c)+t.charAt(h)}return i}},{key:"getKeySystem",value:function(){return/Edge/.test(S)||/Trident/.test(S)||/Tizen/.test(S)?"com.microsoft.playready":/Chrome/.test(S)||/Firefox/.test(S)?"com.widevine.alpha":"com.apple.fps.1_0"}},{key:"isAutoplaySupported",value:function(){var t=!0;if(e.isIOS())if(e.getSafariVersion()!==-1){var n=e.getIOSversion()||[];t=n[0]>=10}else e.isChrome()&&(t=e.getChromeVersion()>=53);return e.isChrome()&&e.isAndroid()&&(t=e.getChromeVersion()>=53),t}},{key:"fieldIsUnique",value:function(e,t,n){return n=n.toString().toLowerCase(),!e.some(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e[t]||"";return i.toString().toLowerCase()===n})}},{key:"toCamelCase",value:function(e){return e.replace(/-|_([a-z])/g,function(e){return e[1].toUpperCase()})}},{key:"toHyphenated",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/([A-Z])/g,function(e){return t+e[0].toLowerCase()})}},{key:"toSnakeCase",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.toHyphenated(t,"_"),n===!0?t.toUpperCase():t}},{key:"createElement",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"div";return"string"==typeof i&&(i=document.createElement(i)),null!=e&&("string"==typeof e&&(e=[e]),e.forEach(function(e){return i.classList.add(e)})),null!=n&&(i.textContent=n),null!=t&&t.appendChild(i),i}},{key:"select",value:function(e){if("string"==typeof e){var t=document.getElementById(e);null==t&&(t=document.querySelector(e)),e=t}return e}},{key:"getViewability",value:function(t){
t=e.select(t);var n=t.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,a=n.top>=0,o=n.left>=0,s=n.bottom<=r,l=n.right<=i;switch(!0){case a&&o&&s&&l:return"full";case!a&&n.bottom<=0||!o&&n.right<=0||!l&&n.left>=i||!s&&n.top>=r:return"none";case a||o||s||l:return"partial"}}},{key:"isViewable",value:function(t){return"full"===e.getViewability(t)}},{key:"timerGroup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e.timerGroups&&(e.timerGroups={}),n===!0){var i=e.timerGroups[t];return null!=i&&i.destroy(),void delete e.timerGroups[t]}return null==e.timerGroups[t]&&(e.timerGroups[t]=s.create(t)),e.timerGroups[t]}},{key:"mimeTypes",get:function(){return{mp4:"video/mp4",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css",vtt:"text/vtt",ttml:"application/ttml+xml",srt:"application/x-subrip",cea608:"text/cea-608",cea708:"text/cea-708"}}}]),e}();L.isTouch=null,L.clientX=0,L.clientY=0,L.pageX=0,L.pageY=0,L.doc=!0,L.trackMouse(),L.uids={};var I=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"toColor",value:function(e){var t=void 0;t=/$#/.test(e)?hex.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,i){return"#"+t+t+n+n+i+i}).substring(1).match(/.{2}/g).map(x(function(){return parseInt(x,16)})):e.match(/[0-9\.]+/g);var n=parseInt(t[0]),i=parseInt(t[1]),r=parseInt(t[2]),a=null!==t[3]?parseFloat(t[3]):1;return{r:n,g:i,b:r,a:a}}},{key:"fromColor",value:function(e){return null==e.a&&(e.a=1),"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"}},{key:"toPercent",value:function(e){return"string"==typeof e?e:Math.round(100*e)+"%"}},{key:"fromPercent",value:function(e){return"number"==typeof e?e:parseFloat(e)/100}},{key:"toSize",value:function(e){return/^[0-9]+$/.test(e)?e+"px":e}},{key:"toCSS",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";return t=t===!0?" !important":"",T.each(e,function(e,i){return n+=L.toHyphenated(i)+":"+e+t+";"}),n}}]),e}(),w=function(){function e(t){babelHelpers.classCallCheck(this,e),this.enabled=t,this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){})}return babelHelpers.createClass(e,[{key:"log",value:function(){try{arguments.length>1&&null!=arguments[1]?console.log.apply(console,arguments):console.log(arguments[0])}catch(e){}}},{key:"trace",value:function(){try{console.trace.apply(console,arguments)}catch(e){}}},{key:"debug",value:function(){try{console.log.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}}},{key:"info",value:function(){try{console.info.apply(console,arguments)}catch(e){}}},{key:"warn",value:function(){try{console.warn.apply(console,arguments)}catch(e){}}},{key:"error",value:function(){try{console.error.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}}},{key:"fatal",value:function(){try{console.fatal.apply(console,arguments)}catch(e){}}}]),e}(),D={LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",BUFFERING_CHANGE:"bufferingchange",STALLED:"stalled",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABILITY_CHANGE:"playbacktargetavailabilitychange",RECORD_CONTENT_CHANGE:"recordcontentchange",IS_LIVE:"islive",CONTENT_CHANGED:"contentchanged",PLAYBACK_RATE_CHANGE:"playbackratechange",SETTINGS_CHANGE:"settingschange",TRACK_ERROR:"trackerror",QUALITY_CHANGE:"qualitychange",QUALITY_CHANGING:"qualitychanging",QUALITY_SWITCHED:"qualityswitched",QUALITY_MODE_CHANGE:"qualitymodechange",QUALITY_LEVELS_LOADED:"qualitylevelsloaded",MEDIA_SEQUENCE_INITIALIZED:"mediasequenceinitialized",MEDIA_SEQUENCE_STARTED:"mediasequencestarted",MEDIA_SEQUENCE_ENDED:"mediasequenceended",MEDIA_SEQUENCE_ABORTED:"mediasequenceaborted",AUTOPLAY_BLOCKED:"autoplayblocked",LANGUAGE_CHANGE:"languagechange",TIMED_METADATA:"timedmetadata",CUES_CHANGE:"cueschange",VIEW_CREATED:"viewcreated",MUTE_CHANGE:"mutechange",RESUME:"resume",PLAY_STATE_CHANGE:"playstatechange",FULL_SCREEN_CHANGE:"fullscreenchange",DISPLAY_STATE_CHANGE:"displaystatechange",BUSY:"busy",CREATE:"create",DESTROY:"destroy",GO_LIVE:"golive"},G={NONE:"none",DEFAULT:"default",MUTED:"muted"},U=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"detect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.blankVideo();return new Promise(function(n,i){var r=function(e){try{l.removeEventListener("error",a),l.pause()}catch(e){}n(e)},a=function(){r(e.UNKNOWN)},o=function(){l.muted=!0,l.play().then(function(){return r(e.MUTED)}).catch(s)},s=function(){l.playsInline=!0,l.play().then(function(){return r(e.MUTED_INLINE)}).catch(function(){return r(e.BLOCKED)})};try{if(!L.isAutoplaySupported())return n(e.BLOCKED);var l=document.createElement("video");l.addEventListener("error",a),l.volume=.01,l.src=t,Promise.resolve(l.play()).then(function(){return r(e.ALLOWED)}).catch(o)}catch(e){a()}})}},{key:"init",value:function(t){return t.autoplayPolicy===G.NONE?Promise.resolve(j=e.UNKNOWN):L.isHTML5()===!0?(j=L.isAutoplaySupported()?L.isIOS()?e.MUTED_INLINE:e.MUTED:e.BLOCKED,Promise.resolve(j)):this.value(j===e.UNKNOWN)}},{key:"value",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e===!0&&(j=null,V=null),null!=j?Promise.resolve(j):(null==V&&(V=this.detect().then(function(e){return j=e,V=null,e})),V)}},{key:"UNKNOWN",get:function(){return"unknown"}},{key:"ALLOWED",get:function(){return"allowed"}},{key:"MUTED",get:function(){return"muted"}},{key:"MUTED_INLINE",get:function(){return"mutedinline"}},{key:"BLOCKED",get:function(){return"blocked"}},{key:"threshold",get:function(){return j},set:function(e){j=e}}]),e}(),j=U.UNKNOWN,V=null,B={NONE:"none",METADATA:"metadata",AUTO:"auto"},Y={VERSION:"9.0.9",PRODUCT:"premier",PLATFORM:"web",PLAYER_ID:"",CREATE:"http://localhost:2672/beacon/create/",TRACK:"http://localhost:2672/beacon/track/"},F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,e);var n=L.override(e.defaults,t),i=C.amp.debug;null!=i&&(n.debug=i),null==n.defaults&&(n.defaults={}),n.controls===!0&&(n.plugins.react=null),Object.assign(this,n),/muted/i.test(this.autoplay)&&(this.autoplayPolicy=G.MUTED,this.autoplay=!0)}return babelHelpers.createClass(e,null,[{key:"create",value:function(t){return new e(t)}}]),e}();F.defaults={id:null,paths:{base:"../",player:"${paths.base}akamai/amp/core/",plugins:"${paths.base}akamai/amp/",libs:"${paths.player}libs/",resources:"${paths.base}resources/"},resources:[{debug:"${paths.player}amp.css",src:"${paths.player}amp.min.css",type:"text/css",async:!0}],plugins:{react:{resources:[{src:"${paths.plugins}react/libs/react.min.js",debug:"${paths.plugins}react/libs/react.js",type:"text/javascript"},{src:"${paths.plugins}react/React.min.css",debug:"${paths.plugins}react/React.css",type:"text/css"},{src:"${paths.plugins}react/React.min.js",debug:"${paths.plugins}react/React.js",type:"text/javascript"}],autoHide:3}},pid:Y.PLAYER_ID,dataset:{},settings:{},preload:B.NONE,language:navigator.language||navigator.browserLanguage,autoplay:!1,autoplayPolicy:G.DEFAULT,loop:!1,controls:!1,playsinline:null,withCredentials:!1,muted:null,fullscreen:{},captioning:{},hls:{resources:[{type:"text/javascript",src:"${paths.libs}hls.min.js",debug:"${paths.libs}hls.js",defer:!0}],quality:{startLevel:-1},data:{enableWorker:!0}},dash:{resources:[{type:"text/javascript",src:"//cdn.dashjs.org/v3.0.1/dash.all.min.js",debug:"//cdn.dashjs.org/v3.0.1/dash.all.debug.js",defer:!0}],buffer:1},locales:{},defaults:{language:"en"}},F.locales={en:{MONOSPACED_SERIF:"Monospaced Serif",PROPORTIONAL_SERIF:"Proportional Serif",MONOSPACED_SANS_SERIF:"Monospaced Sans-Serif",PROPORTIONAL_SANS_SERIF:"Proportional Sans-Serif",CASUAL:"Casual",CURSIVE:"Cursive",SMALL_CAPS:"Small Capitals",ERROR:"Error",ERROR_ABORTED:"Media Aborted",ERROR_DECODE:"Decode Error",ERROR_NETWORK:"Network Error",ERROR_SRC:"Source not supported",ERROR_DEFAULT:"An error has occurred",STREAM_NOT_FOUND:"Stream not found",EN:"English",ENG:"English",ES:"Spanish",SPA:"Spanish",DE:"German",DEU:"German",GER:"German",FR:"French",FRE:"French",FRA:"French",IT:"Italian",ITA:"Italian",RU:"Russian",RUS:"Russian",ZH:"Chinese",ZHO:"Chinese",CHI:"Chinese",JA:"Japanese",JPN:"Japanese",KO:"Korean",KOR:"Korean",UNKNOWN:"Unknown"},es:"#{paths.player}es.json",fr:"#{paths.player}fr.json"};var z=/^\s*[#\$]{([^\$#{}]+)}\s*$/,K=/[#\$]{([^\$#}]*)}/g,q=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"eval",value:function(e,t){var n=this;if(null==e)return e;if(z.test(e))try{return this.exec(e.replace(z,"$1"),t)}catch(t){return e}return e.replace(K,function(e,i,r,a){try{return n.exec(i,t)}catch(t){return e}})}},{key:"exec",value:function(e,t){return new Function("with (this) { return "+e+" }").bind(t)()}},{key:"evaluateBindings",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null!=e){if("object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))){var r=i===!0?JSON.parse(JSON.stringify(e)):e;if(e instanceof Array)return r.map(function(e){return n.evaluateBindings(e,t,!1)});e={};for(var a in r)e[a]=this.evaluateBindings(r[a],t,!1);return e}if("string"==typeof e){var o=this.eval(e,t);return o!==e&&K.test(o)===!0?this.evaluateBindings(o,t,i):o}return e}}},{key:"SINGLE",get:function(){return z}},{key:"TOKEN",get:function(){return K}}]),e}(),Q=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.config=e,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.createData()}},{key:"createData",value:function(){this.setData(this.config)}},{key:"getDefaults",value:function(){return this.defaults||{}}},{key:"setData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};this.getDefaults();return T.each(this.getDefaults(),function(t,i){return n[i]=i in e?e[i]:t}),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,n),e}},{key:"destroy",value:function(){}}],[{key:"NAME",get:function(){return"ModuleProxy"}}]),t}(puremvc.Proxy),W=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.getModuleName()));return n.module=e,n.mediator=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){var n=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e);var i=this.module.listNotificationPublications();null!=i&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return i},this.mediator.handleNotification=function(e){n.facade.sendNotification(e.getName(),e.getBody(),e.getType())})}},{key:"onRegister",value:function(){null!=this.mediator&&this.module.registerMediator(this.mediator)}},{key:"onRemove",value:function(){null!=this.mediator&&this.module.removeMediator(this.mediator)}},{key:"listNotificationInterests",value:function(){return this.module.listNotificationInterests()}},{key:"handleNotification",value:function(e){this.module.sendNotification(e.getName(),e.getBody(),e.getType())}}]),t}(puremvc.Mediator),Z=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"execute",value:function(e){var t=e.getBody();t.player=this.facade.player||this.facade,this.facade.dispatchEvent(t)}}]),t}(puremvc.SimpleCommand),X=function(){function e(){babelHelpers.classCallCheck(this,e),this._transformMap={}}return babelHelpers.createClass(e,[{key:"addTransform",value:function(e,t){if(null!=t&&null!=e){if(null==this._transformMap[e])this._transformMap[e]=[];else if(this._transformMap[e].indexOf(t)!==-1)return;this._transformMap[e].push(t),this.sortTransforms(e)}}},{key:"sortTransforms",value:function(e,t){return null==t&&(t=function(e,t){var n=e.priority||0,i=t.priority||0;return i-n}),this._transformMap[e].sort(t)}},{key:"transform",value:function(e,t){var n=this._transformMap[e];return null==n?Promise.resolve(t):L.transform(t,n)}},{key:"removeTransform",value:function(e,t){if(null!=t&&null!=e){var n=this._transformMap[e];if(null!=n){var i=n.indexOf(t);if(i!==-1)return n.splice(i,1)}}}}],[{key:"create",value:function(){return new e}}]),e}(),$={TIME:"time",SEEK:"seek",MEDIA:"media",AD_REQUEST:"adrequest",AD_BREAK:"adbreak",PLAY_STATE:"playstate",EVENT:"event",ERROR:"error",CUE_CHANGE:"cuechange"},J={INTERNAL:"internal",STARTUP:"startup",LOAD:"load",REQUEST_PLAY:"requestplay",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"toggleplaypause",CHANGE_PLAY_STATE:"changeplaystate",MEDIA_ELEMENT_CHANGE:"mediaelementchange",HIDDEN_CHANGE:"hiddenchange",TOGGLE_FULL_SCREEN:"togglefullscreen",CHANGE_DISPLAY_STATE:"changedisplaystate",DISABLE_FULL_SCREEN:"disablefullscreen",ENABLE_FULL_SCREEN:"enablefullscreen",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changemedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",CHANGE_SETTINGS:"changesettings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",CHANGE_TIME:"changetime",TIME_CHANGE:"timechange",SEEK:"seek",SEEK_COMPLETE:"seekcomplete",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeautoplay",AUTOPLAY_CHANGE:"autoplaychange",CHANGE_LOOP:"changeloop",CHANGE_PRELOAD:"changepreload",CHANGE_CONTROLS:"changecontrols",PLAYBACK_CORE_CHANGE:"playbackcorechange",START:"start",END:"end",REPLAY:"replay",ADD_LAYER:"addlayer",REMOVE_LAYER:"removelayer",ADD_OVERLAY:"addoverlay",REMOVE_OVERLAY:"removeoverlay",ADD_CONTROL:"addcontrol",REMOVE_CONTROL:"removecontrol",ADD_CONTROL_STATE:"addcontrolstate",REMOVE_CONTROL_STATE:"removecontrolstate",ADD_APPLICATION_STATE:"addapplicationstate",REMOVE_APPLICATION_STATE:"removeapplicationstate",DISPATCH_EVENT:"dispatchevent",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerplaybackcore",REMOVE_PLAYBACK_CORE:"removeplaybackcore",CHANGE_PLAYBACK_TARGET:"changeplaybacktarget",LOCK:"lock",FRAGMENT_LOAD_START:"fragmentloadstart",FRAGMENT_LOADED:"fragmentloaded",CHANGE_CONTENT:"changecontent",ENABLE_VIDEO_EVENTS:"enablevideoevents",DISABLE_VIDEO_EVENTS:"disablevideoevents",HAS_POST_CONTENT:"haspostcontent",AUDIO_TRACK_SWITCH:"audiotrackswitch",TRACK:"track",init:function(){var e=this;T.each(D,function(t,n){"values"!==n&&"init"!==n&&(e[n]=t)})}},ee=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,L.createUID()));return n.viewComponent=e,n.performance={init:Date.now(),record:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return this[e]=t},elapsed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init";return this[e]-this[t]}},n.dispatcher=a.create(n),n.transformer=X.create(),n.logger=w.instance,n.moduleMap={},n.emit=n.dispatch.bind(n),n.on=n.addListener=n.addEventListener.bind(n),n.off=n.removeListener=n.removeEventListener.bind(n),n.config=null,n.oninitialized=null,n.onerror=null,n.parentModule=null,n.ignoreEvents=/(timeupdate|progress|fragmentloaded|fragmentloadstart|timeremaining|adtimeremaining)/,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initialize",value:function(e,t){this.config=e,this.parentModule=t,this._id=this.config.id||this.multitonKey,this.loadModuleResources().then(this.resourcesLoaded.bind(this)).catch(this.resourcesError.bind(this))}},{key:"loadModuleResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.resources;return!(null!=e?e.length:void 0)>0?Promise.resolve():dt.addResources(this.evaluatePaths(e))}},{key:"evaluatePaths",value:function(e){var t,n;if(null!=e){var i=this.config.paths||(null!=(t=this.parentModule)&&null!=(n=t.config)?n.paths:void 0);return null!=i&&(e=q.evaluateBindings(e,{paths:i})),e}}},{key:"resourcesError",value:function(e){if(null==this.onerror)throw i.create(e);this.onerror(this)}},{key:"resourcesLoaded",value:function(){this.createFramework(),"function"==typeof this.oninitialized&&this.oninitialized(this)}},{key:"createFramework",value:function(){this.createModel(),this.createController(),this.createView()}},{key:"createModel",value:function(){this.registerProxy(new Q(this.config))}},{key:"createView",value:function(){}},{key:"createController",value:function(){this.registerCommand(J.DISPATCH_EVENT,Z)}},{key:"getModuleName",value:function(){return this.moduleName}},{key:"getId",value:function(){return this._id}},{key:"getConfig",value:function(){return this.config}},{key:"hasModule",value:function(e){return null!=this.moduleMap[e]}},{key:"getModules",value:function(){var e={};return T.each(this.moduleMap,function(t,n){return e[n]=t.module}),e}},{key:"registerModule",value:function(e){var t=e.getModuleName();if(null!=e&&null==this.moduleMap[t]){var n=new W(e);this.moduleMap[t]=n,this.registerMediator(n),e.onRegister()}}},{key:"retrieveModule",value:function(e){return this.moduleMap[e].module}},{key:"removeModule",value:function(e){var t=this.moduleMap[e];if(null!=t){delete this.moduleMap[e],this.removeMediator(e);var n=t.module;return n.onRemove.call(n),n}}},{key:"listNotificationInterests",value:function(){return[]}},{key:"listNotificationPublications",value:function(){return[]}},{key:"getViewComponent",value:function(){return this.viewComponent}},{key:"setViewComponent",value:function(e){return this.viewComponent=e,e}},{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){}},{key:"destroy",value:function(){var e=this.retrieveProxy(Q.NAME);null!=e&&"function"==typeof e.destroy&&e.destroy(),puremvc.Facade.removeCore(this.multitonKey),this.dispatcher.destroy(),null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="")}},{key:"addEventListener",value:function(e,t){this.dispatcher.addEventListener(e,t)}},{key:"once",value:function(e,t){this.dispatcher.once(e,t)}},{key:"logEvent",value:function(e){if(this.ignoreEvents.test(e.type)!==!0){var t=this.getModuleName().toUpperCase();e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e)}}},{key:"dispatchEvent",value:function(e){var t=this;this.transform($.EVENT,e).then(function(n){if(null!=n)return t.logEvent(e),t.dispatcher.dispatchEvent(e)})}},{key:"dispatch",value:function(e,t){this.dispatchEvent(r.create(e,t))}},{key:"removeEventListener",value:function(e,t){this.dispatcher.removeEventListener(e,t)}},{key:"addTransform",value:function(e,t){return this.transformer.addTransform(e,t)}},{key:"sortTransforms",value:function(e,t){return this.transformer.sortTransforms(e,t)}},{key:"transform",value:function(e,t){return this.transformer.transform(e,t)}},{key:"removeTransform",value:function(e,t){return this.transformer.removeTransform(e,t)}},{key:"id",get:function(){return this.getId()}}]),t}(puremvc.Facade),te={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"},ne=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"extractContentId",value:function(e,t){var n=document.createElement("a");return n.href=L.arrayToString(e),n.hostname}},{key:"extractServerUrl",value:function(e,t){return t.serverURL||t.serverUrl}},{key:"requestCertificate",value:function(e){var t={url:e.cert,responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}};return L.request(t).then(function(e){return new Uint8Array(e.response)})}},{key:"concatInitDataIdAndCertificate",value:function(e,t,n){"string"==typeof t&&(t=L.stringToArray(t));var i=0,r=new ArrayBuffer(e.byteLength+4+t.byteLength+4+n.byteLength),a=new DataView(r),o=new Uint8Array(r,i,e.byteLength);o.set(e),i+=e.byteLength,a.setUint32(i,t.byteLength,!0),i+=4;var s=new Uint16Array(r,i,t.length);s.set(t),i+=s.byteLength,a.setUint32(i,n.byteLength,!0),i+=4;var l=new Uint8Array(r,i,n.byteLength);return l.set(n),new Uint8Array(r,0,r.byteLength)}},{key:"requestLicense",value:function(e,t,n,i){var r={url:n,method:"POST",responseType:"text",headers:{"Content-type":"application/x-www-form-urlencoded"},data:"spc="+L.base64EncodeUint8Array(e)+"&assetId="+encodeURIComponent(t)};return T.each(i.httpRequestHeaders,function(e,t){return r.headers[t]=e}),"boolean"==typeof i.withCredentials&&(r.withCredentials=i.withCredentials),L.request(r).then(function(e){var t=e.responseText.trim();return"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6)),L.base64DecodeUint8Array(t)}).catch(function(e){throw"The license request failed."})}}]),e}(),ie={NORMAL:"normal",FULL_SCREEN:"full-screen",FULLSCREEN:"full-screen"},re={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",ERROR:"error"},ae={ACTIVE:"active",INACTIVE:"inactive"},oe=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.device=L.getDevice(),e.time={currentTime:0,duration:0},e.displayState=ie.NORMAL,e.playState=null,e.activeState=null,e.seeking=!1,e.seekrequested=!1,e.waiting=!1,e.busy=!1,e.volume=1,e.playbackTarget="amp",e.hasPostContent=!1,e.locked=!0,e.mediaElement=null,e.hidden=!1,e.ended=!1,e.buffering=!1,e.playbackRate=1,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getHasPostContent",value:function(){return this.hasPostContent}},{key:"setHasPostContent",value:function(e){this.hasPostContent=e}},{key:"getEnded",value:function(){return this.ended}},{key:"setEnded",value:function(e){this.ended=e,this.ended===!0&&this.seeking===!0&&(this.seeking=!1)}},{key:"getDisplayState",value:function(){return this.displayState}},{key:"setDisplayState",value:function(e){if(e!==this.displayState){var t=this.displayState;this.displayState=e,this.sendNotification(J.DISPLAY_STATE_CHANGE,{previous:t,value:this.displayState})}}},{key:"getPlayState",value:function(){return this.playState}},{key:"setPlayState",value:function(e){var t=this;if(this.getWaiting()===!0&&this.setWaiting(!1),e!==this.playState){var n=this.playState;this.playState=e,this.facade.transform($.PLAY_STATE,this.playState).then(function(i){if(null!=i&&i!==n)switch(t.sendNotification(J.PLAY_STATE_CHANGE,{previous:n,value:t.playState}),e){case re.PLAYING:return t.sendNotification(J.DISPATCH_EVENT,r.create("playing"))}}).catch(function(e){return t.sendNotification(J.ERROR,e)})}}},{key:"getDevice",value:function(){return this.device}},{key:"getSeeking",value:function(){return this.seeking}},{key:"setSeeking",value:function(e){e!==this.seeking&&(this.seeking=e,this.seeking===!1&&this.playState===re.PAUSED&&this.setWaiting(!1))}},{key:"getSeekRequested",value:function(){return this.seekrequested}},{key:"setSeekRequested",value:function(e){e!==this.seekrequested&&(this.seekrequested=e)}},{key:"getWaiting",value:function(){return this.waiting}},{key:"setWaiting",value:function(e){var t=this;if(e!==this.waiting){this.waiting=e;var n=this.waiting===!0?J.ADD_APPLICATION_STATE:J.REMOVE_APPLICATION_STATE;if(this.sendNotification(n,re.WAITING),this.waiting===!0){var i=function(){t.facade.removeEventListener("timeupdate",a),t.facade.removeEventListener("playing",r),t.facade.removeEventListener("canplaythrough",r),t.facade.removeEventListener("ended",r)},r=function(){i(),t.setWaiting(!1)},a=function(e){t.facade.seeking===!1&&r()};this.facade.addEventListener("timeupdate",a),this.facade.addEventListener("playing",r),this.facade.addEventListener("canplaythrough",r),this.facade.addEventListener("ended",r)}}}},{key:"getBusy",value:function(){return this.busy}},{key:"setBusy",value:function(e){e!==this.busy&&(this.busy=e,this.sendNotification(J.DISPATCH_EVENT,r.create("busy",e)))}},{key:"getLocked",value:function(){return this.locked}},{key:"setLocked",value:function(e){this.locked=e}},{key:"getBuffering",value:function(){return this.buffering}},{key:"setBuffering",value:function(e){this.buffering=e}},{key:"getMedium",value:function(){return this.medium}},{key:"setMedium",value:function(e){if(e!==this.medium){var t=null!=this.medium?"medium-"+this.medium:this.medium;this.medium=e,this.sendNotification(J.MEDIUM_CHANGE,{previous:t,value:"medium-"+this.medium})}}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){if(e!==this.volume)return this.volume=e}},{key:"getPlaybackTarget",value:function(){return this.playbackTarget}},{key:"setPlaybackTarget",value:function(e){if(e!==this.playbackTarget){var t=this.playbackTarget;this.playbackTarget=e,"amp"!==e?this.getPlayState()!==re.PAUSED&&this.facade.pause():this.getPlayState()===re.PLAYING&&this.facade.play(),this.sendNotification(J.PLAYBACK_TARGET_CHANGE,{previous:t,value:this.playbackTarget})}}},{key:"getActiveState",value:function(){return this.activeState}},{key:"setActiveState",value:function(e){if(e!==this.activeState){var t=this.activeState;this.activeState=e,this.sendNotification(J.ACTIVE_STATE_CHANGE,{previous:t,value:this.activeState})}}},{key:"getMediaElement",value:function(){return this.mediaElement}},{key:"setMediaElement",value:function(e){if(e!==this.mediaElement){var t=this.mediaElement;null!=t&&(e.volume=t.volume,e.muted=t.muted),this.mediaElement=e,this.sendNotification(J.MEDIA_ELEMENT_CHANGE,{previous:t,value:this.mediaElement})}}},{key:"getHidden",value:function(){return this.hidden}},{key:"setHidden",value:function(e){if(e!==this.hidden){var t=this.hidden;this.hidden=e,this.sendNotification(J.HIDDEN_CHANGE,{previous:t,value:this.hidden})}}},{key:"getCurrentTime",value:function(){return this.time.currentTime}},{key:"setCurrentTime",value:function(e){e===this.time.currentTime||e<0||(this.time.currentTime=e,this.sendNotification(J.TIME_UPDATE,e))}},{key:"getDuration",value:function(){return this.time.duration}},{key:"setDuration",value:function(e){e!==this.time.duration&&(this.time.duration=e,this.sendNotification(J.DURATION_CHANGE,e))}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){e!==this.playbackRate&&(this.playbackRate=e,this.sendNotification(J.PLAYBACK_RATE_CHANGE,e))}}],[{key:"NAME",get:function(){return"ApplicationStateProxy"}}]),t}(puremvc.Proxy),se={AUTHENTICATE:"authenticate",AUTHENTICATED:"authenticated",AUTHENTICATION_FAILED:"authenticationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZATION_EXPIRED:"authorizationexpired",CHOOSE_PROVIDER:"chooseprovider",ASSET_AUTHORIZED:"assetauthorized",ASSET_AUTHORIZATION_FAILED:"assetauthorizationfailed"},le=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME,{}));return e._authorized=!0,e._session=null,e.data=null,e.timeout=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setMedia",value:function(e){this.setSession(null);var t="blocked"!==e.status.state&&0===e.restriction.length;this.setAuthorized(t),this.setAuthorization(e.authorization)}},{key:"authorize",value:function(e){this.setAuthorization(e),this.sendNotification(se.AUTHORIZED,e)}},{key:"getAuthorization",value:function(){return this.data}},{key:"setAuthorization",value:function(e){return null!=(null!=e?e.token:void 0)&&this.setAuthorized(!0),this.data=e||{},null!=this.data.expiration&&this.setExpiration(this.data.expiration),e}},{key:"getKey",value:function(){return this.data.key}},{key:"setKey",value:function(e){return this.data.key=e,e}},{key:"getToken",value:function(){return this.data.token}},{key:"setToken",value:function(e){return this.data.token=e,e}},{key:"getExpiration",value:function(){return this.data.expiration}},{key:"setExpiration",value:function(e){return this.data.expiration=e,this.data.expiration>Date.now()&&this.startTimeout(),e}},{key:"startTimeout",value:function(){var e=this;L.getUTC().then(function(t){var n=function(){e.sendNotification(se.AUTHORIZATION_EXPIRED),e.sendNotification(se.AUTHORIZE,{media:e.facade.getMedia()})};return e.timeout=e.facade.timers.setTimeout(n,e.getExpiration()-t)})}},{key:"stopTimeout",value:function(){clearTimeout(this.timeout)}},{key:"getSecret",value:function(){if(null==this.data.token)return null;var e="";return null!=this.data.token&&(e=""+this.data.token),null!=this.data.key&&(e=this.data.key+"="+e),e}},{key:"createURL",value:function(e){var t=this.getSecret();return null!=t&&(e+=/\?/.test(e)?"&":"?",e+=t),e}},{key:"getAuthorized",value:function(){return this._authorized}},{key:"setAuthorized",value:function(e){return this.stopTimeout(),this._authorized=e,e}},{key:"getSession",value:function(){return this._session}},{key:"setSession",value:function(e){return this._session=e,e}},{key:"authorized",get:function(){return this.getAuthorized()}}],[{key:"NAME",get:function(){return"SecurityProxy"}}]),t}(puremvc.Proxy),ue=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaults=F.defaults,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getValueOf",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.facade.getMedia()||{},r=i.metadata||{},a=r.config||{},o=function(){var o=i[e];return null!=o?o:(o=r[e],null!=o?o:(o=a[e],null!=o?o:(o=n[e],null!=o?o:(o=t.data[e],null!=o?o:(o=t.config[e],null!=o?o:void 0)))))};try{return this.facade.evaluateBindings(o())}catch(e){return null}}},{key:"getPID",value:function(){return this.data.pid}},{key:"getPlaysInline",value:function(){return this.data.playsinline}},{key:"getMuted",value:function(){return this.getValueOf("muted")}},{key:"setMuted",value:function(e){return this.data.muted=e,e}},{key:"getWithCredentials",value:function(){return this.getValueOf("withCredentials")}},{key:"setWithCredentials",value:function(e){return this.data.withCredentials=e,e}},{key:"getAutoplay",value:function(){return this.getValueOf("autoplay")}},{key:"setAutoplay",value:function(e){return this.data.autoplay=e,e}},{key:"getAutoplayPolicy",value:function(){return this.getValueOf("autoplayPolicy")}},{key:"setAutoplayPolicy",value:function(e){return this.data.autoplayPolicy=e,e}},{key:"getLoop",value:function(){return this.getValueOf("loop")}},{key:"setLoop",value:function(e){return this.data.loop=e,e}},{key:"getSettings",value:function(){return this.data.settings}},{key:"setSettings",value:function(e){return this.data.settings=e,
e}},{key:"getPaths",value:function(){return this.data.paths}},{key:"setPaths",value:function(e){return this.data.paths=e,e}},{key:"getVersion",value:function(){return this.data.version}},{key:"getControls",value:function(){return this.getValueOf("controls")===!0}},{key:"setControls",value:function(e){return this.data.controls=e,e}},{key:"getFullscreen",value:function(){return this.data.fullscreen||{}}},{key:"setFullscreen",value:function(e){return this.data.fullscreen=e,e}},{key:"getLanguage",value:function(){return this.data.language}},{key:"getPreload",value:function(){return this.getValueOf("preload")}},{key:"setPreload",value:function(e){return this.data.preload=e,e}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Q),ce=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.data=e,Object.defineProperties(n,{kind:{get:n.getKind,enumerable:!0,configurable:!1},label:{get:n.getLabel,enumerable:!0,configurable:!1},language:{get:n.getLanguage,enumerable:!0,configurable:!1},id:{get:n.getId,enumerable:!0,configurable:!1},enabled:{get:n.getEnabled,set:n.setEnabled,enumerable:!0,configurable:!1}}),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getKind",value:function(){return this.data.kind}},{key:"getLabel",value:function(){return this.data.label}},{key:"getLanguage",value:function(){return this.data.language}},{key:"getId",value:function(){return this.data.id}},{key:"setEnabled",value:function(e){e!==this.data.enabled&&(this.data.enabled=e,this.changeEnabled(e),this.dispatchEvent("change"))}},{key:"changeEnabled",value:function(e){}},{key:"getEnabled",value:function(){return this.data.enabled}},{key:"flatten",value:function(){return{kind:this.getKind(),label:this.getLabel(),language:this.getLanguage(),id:this.getId(),enabled:this.getEnabled()}}}]),t}(a),he=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME));return e.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!0,seeking:!1,loading:!1,waiting:!1,keyErrored:!1},e.initialized=!1,"desktop"===L.getDevice()&&(e.initialized=!0),e.handlers={timeupdate:e.ontimeupdate.bind(e),durationchange:e.ondurationchange.bind(e),play:e.onplay.bind(e),playing:e.onplaying.bind(e),pause:e.onpause.bind(e),loadeddata:e.onloadeddata.bind(e),waiting:e.onwaiting.bind(e),seeking:e.onseeking.bind(e),seeked:e.onseeked.bind(e),ended:e.onended.bind(e),progress:e.onprogress.bind(e),error:e.onerror.bind(e),loadstart:e.onloadstart.bind(e),canplay:e.oncanplay.bind(e),canplaythrough:e.oncanplaythrough.bind(e),loadedmetadata:e.onloadedmetadata.bind(e),stalled:e.onstalled.bind(e)},e.resume={event:L.getIEVersion()===-1||11===L.getIEVersion()?"loadedmetadata":"canplaythrough",listener:e.resumestart.bind(e)},e.textTrackHandlers={addtrack:e.onaddtrack.bind(e)},e.onneedkey=e.onneedkey.bind(e),e.enabled=null,e.playWhenLoaded=!1,e.metadataloaded=!1,e.activeCuesIndex=0,e.id3CueType=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){if(e!==this.enabled)return this.enabled=e,this.enabled===!0?this.init():this.applyHandlers(!1),e}},{key:"applyHandlers",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getMediaElement(),n=e?"addEventListener":"removeEventListener";T.each(this.handlers,function(e,i){t[n](i,e)})}},{key:"resumestart",value:function(e){var t=this;this.getMediaElement();this.handlers.durationchange(e),this.data.currentTime>0&&this.data.ended!==!0?this.facade.timers.setTimeout(function(){t.seek(t.data.currentTime).then(t.resumecomplete.bind(t))},50):this.resumecomplete()}},{key:"resumecomplete",value:function(){this.data.loading=!1,this.applyHandlers(!0),this.playWhenLoaded===!0&&this.facade.timers.setTimeout(this.play.bind(this),1)}},{key:"onaddtrack",value:function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",function(e){T.each(e.target.activeCues,function(e,n,i){i[n-1]!==e&&t.sendNotification(J.TIMED_METADATA,e)})}))}},{key:"ontimeupdate",value:function(e){var t=e.target.currentTime;this.facade.ads.inProgress!==!0&&(this.data.currentTime=t,this.sendNotification(J.TIME_CHANGE,{currentTime:t}))}},{key:"ondurationchange",value:function(e){var t=e.target.duration;t&&(this.data.duration=t,/Android [4-7]/.test(navigator.userAgent)&&this.getMediaElement().src.indexOf(".m3u8")!==-1&&Infinity===t||this.sendNotification(J.CHANGE_DURATION,t))}},{key:"onplay",value:function(e){this.data.paused=!1}},{key:"onplaying",value:function(e){this.data.paused=!1,this.data.seeking=!1,this.data.waiting=!1,this.sendNotification(J.PLAYING)}},{key:"onpause",value:function(e){this.getMediaElement().ended!==!0&&this.facade.playState!==re.READY&&(this.data.waiting===!0&&"hls"===this.playbackCoreName||(this.data.paused=!0,e.target.readyState>0&&(this.sendNotification(J.PAUSED),this.sendNotification(J.CHANGE_PLAY_STATE,re.PAUSED))))}},{key:"onloadeddata",value:function(e){this.sendNotification(J.LOADED_DATA)}},{key:"onwaiting",value:function(e){this.data.waiting=!0,this.sendNotification(J.WAITING);var t=this.getMediaElement();t.seeking===!1&&2===t.readyState&&2===t.networkState&&(t.once("playing",this.sendNotification.bind(this,J.BUFFERING_CHANGE,!1)),this.sendNotification(J.BUFFERING_CHANGE,!0))}},{key:"onstalled",value:function(e){this.sendNotification(J.STALLED)}},{key:"onseeking",value:function(e){this.getMediaElement().removeEventListener("timeupdate",this.handlers.timeupdate);var t=e.target.currentTime;this.sendNotification(J.TIME_CHANGE,{currentTime:t}),this.data.seeking=!0,this.sendNotification(J.SEEKING)}},{key:"onseeked",value:function(e){this.data.seeking=!1,this.sendNotification(J.SEEK_COMPLETE,e.target.currentTime),this.getMediaElement().addEventListener("timeupdate",this.handlers.timeupdate)}},{key:"onended",value:function(e){this.data.ended=!0,this.sendNotification(J.ENDED)}},{key:"onprogress",value:function(e){try{var t=this.getMediaElement(),n=t.buffered;this.sendNotification(J.PROGRESS,n.end(n.length-1)/t.duration)}catch(e){}}},{key:"onerror",value:function(e){var t=this.getMediaElement().error;this.sendNotification(J.ERROR,this.facade.createMediaError(t.code,t))}},{key:"onloadstart",value:function(e){this.sendNotification(J.LOAD_START)}},{key:"oncanplay",value:function(e){this.sendNotification(J.CAN_PLAY)}},{key:"oncanplaythrough",value:function(e){this.createTracks(),this.sendNotification(J.CAN_PLAY_THROUGH),this.sendNotification(J.PROGRESS,this.getDuration())}},{key:"onloadedmetadata",value:function(e){this.metadataloaded=!0,this.sendNotification(J.ENABLE_FULL_SCREEN),this.sendNotification(J.LOADED_METADATA)}},{key:"applyTextTrackHandlers",value:function(e){var t=e===!0?"addEventListener":"removeEventListener",n=this.getMediaElement().textTracks;null!=n&&n[t]("addtrack",this.textTrackHandlers.addtrack)}},{key:"createTracks",value:function(){function e(e,t){var n=this.facade.tracks.getAudioTracks();if(T.each(n,function(e){return e.data.enabled=!1}),t===!0)return n[e.id].data.enabled=!0}var t=this,n=this.getMediaElement().audioTracks,i=this.facade.tracks.getAudioTracks();if(null!=n){var r=n.length||0;T.each(n,function(n,a){if(L.fieldIsUnique(i,"id",n.id)!==!1){var o=new ce(n);o.changeEnabled=e.bind(t,o),i.add(o,a+1===r)}})}}},{key:"reset",value:function(){this.data.currentTime=0,this.data.duration=0,this.data.src=null,this.data.ended=!1,this.data.paused=!1,this.data.seeking=!1,this.data.started=!1,this.data.loading=!1,this.applyTextTrackHandlers(!1)}},{key:"getStarted",value:function(){return this.data.started}},{key:"getMediaElement",value:function(){return this.facade.getMediaElement()}},{key:"canPlayMedium",value:function(e){return"video"===e}},{key:"canPlayTemporalType",value:function(e){return"dvr"!==e}},{key:"canPlayType",value:function(e){var t=document.createElement("video").canPlayType(e)||"";return(/Android (4\.[1-9]|[5-6])/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&e===L.mimeTypes.m3u8&&(t="maybe"),"probably"===t&&/video\/f4m|x-flv/.test(e)&&/UCBrowser/.test(navigator.userAgent)&&(t=""),t}},{key:"getPaused",value:function(){return this.data.paused}},{key:"getSeeking",value:function(){return this.data.seeking}},{key:"getCurrentTime",value:function(){return this.data.currentTime}},{key:"setCurrentTime",value:function(e){if(e!==this.data.currentTime)return this.data.currentTime=e,this.getStarted()&&this.seek(e),e}},{key:"getCurrentTimeUTC",value:function(){var e=this.facade.retrieveProxy(ue.NAME),t=e.getValueOf("startDate"),n=0;return null!=t&&(n=Math.round(t+1e3*this.getCurrentTime())),n}},{key:"toUTC",value:function(e){if(!isFinite(e))return e;var t=this.getCurrentTimeUTC();if(0===t)return e;var n=this.getCurrentTime(),i=Math.round(1e3*(e-n));return t+i}},{key:"fromUTC",value:function(e){if(!isFinite(e))return e;var t=this.getCurrentTimeUTC();if(0===t)return e;var n=this.getCurrentTime(),i=(e-t)/1e3;return n+i}},{key:"seek",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.currentTime;return new Promise(function(n,i){try{var r=e.getMediaElement(),a=function(){e.facade.timers.setTimeout(n,10,t)};r.once("seeked",a),r.currentTime=t;var o=navigator.userAgent;if(/Android.*Chrome/.test(o))var s=e.facade.timers.setInterval(function(){Math.round(r.currentTime)===Math.round(t)&&(e.facade.timers.clearInterval(s),r.dispatchEvent(new CustomEvent("seeked")))},10)}catch(e){i(e)}})}},{key:"goLive",value:function(){var e=this.getMediaElement(),t=Infinity===e.duration?e.seekable.end(0):e.duration;e.currentTime=t}},{key:"getVolume",value:function(){var e=this.getMediaElement();return e.muted===!0?0:e.volume}},{key:"setVolume",value:function(e,t){return this.getMuted()&&e>0?this.setMuted(!1,!1):this.getMuted()||0!==e||this.setMuted(!0,!1),this.sendNotification(J.VOLUME_CHANGE,this.getMediaElement().volume=e,t),e}},{key:"getMuted",value:function(){return this.data.muted}},{key:"setMuted",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];if(this.data.muted!==e){this.data.muted=e;var i=this.data.volume;return this.data.muted===!0&&(this.data.volume=this.getVolume(),i=0),this.getMediaElement().muted=e,t===!0&&(this.sendNotification(J.CHANGE_VOLUME,i),this.sendNotification(J.VOLUME_CHANGE,i,n)),this.sendNotification(J.MUTE_CHANGE,this.data.muted),e}}},{key:"getDuration",value:function(){return this.data.duration}},{key:"play",value:function(){var e=this;if(this.sendNotification(J.WAITING),this.data.started!==!0){if(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0,this.metadataloaded===!1)return}else if(this.data.loading===!0)return void(this.playWhenLoaded=!0);this.getPaused()&&this.sendNotification(J.RESUME),Promise.resolve(this.getMediaElement().play()).catch(function(t){return U.value(!0).then(function(t){return e.sendNotification(J.AUTOPLAY_BLOCKED,{threshold:t,policy:e.facade.autoplayPolicy})})})}},{key:"pause",value:function(){this.data.paused=!0,this.getMediaElement().pause()}},{key:"getSrc",value:function(){return this.facade.mediaProxy.getSrc()}},{key:"init",value:function(){this.data.loading=!0,this.playWhenLoaded=!1,this.metadataloaded=!1;var e=this.getMediaElement();this.resume.id=e.once(this.resume.event,this.resume.listener),e.addEventListener("loadedmetadata",this.handlers.loadedmetadata),e.addEventListener("durationchange",this.handlers.durationchange),e.addEventListener("canplaythrough",this.handlers.canplaythrough),e.addEventListener("webkitneedkey",this.onneedkey),e.addEventListener("error",this.handlers.error),this.applyTextTrackHandlers(!0),this.applySrc()}},{key:"preload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.facade.getPreload();if(e!==B.NONE){var t=this.getMediaElement();t.preload=e,this.setEnabled(!0)}}},{key:"load",value:function(){var e=this.getMediaElement(),t=L.getIOSversion()||[];L.isIPad()&&t[0]<8?this.facade.timers.setTimeout(e.load.bind(e),100):e.load()}},{key:"unload",value:function(){}},{key:"applySrc",value:function(){var e=this.getSrc();if(null==e||""===e)return void this.sendNotification(J.ERROR,"The value of src is not supported: "+value);var t=this.getMediaElement();t.src=e;var n=t.muted;n===!0&&(this.data.muted=!0),this.load()}},{key:"setQuality",value:function(e){}},{key:"getQuality",value:function(){}},{key:"getQualityLevels",value:function(){return[]}},{key:"getQualityMode",value:function(){}},{key:"setQualityMode",value:function(e){}},{key:"destroy",value:function(){this.applyHandlers(!1);var e=this.getMediaElement();e.removeEventListener(this.resume.event,e[this.resume.id]),e.removeEventListener("webkitneedkey",this.onneedkey),null!=e.textTracks&&e.textTracks.removeEventListener("addtrack",this.textTrackHandlers.addtrack)}},{key:"onneedkey",value:function(e){var t=this,n=e.target,i=L.getKeySystem(),r=this.facade.mediaProxy.getKeys()[i],a=this.facade.fps,o=a.allowKeyErrorRetries===!1;if(null!=r&&"com.apple.fps.1_0"===i){if(this.keyErrored&&o)return void this.getMediaElement().removeEventListener("webkitneedkey",this.onneedkey);var s=e.initData,l=a.extractContentId(s,r),u=a.extractServerUrl(s,r);a.requestCertificate(r).then(function(e){return a.concatInitDataIdAndCertificate(s,l,e)}).then(function(e){if(!WebKitMediaKeys.isTypeSupported(i,"video/mp4"))throw"Key System not supported";if(null==n.webkitKeys&&n.webkitSetMediaKeys(new WebKitMediaKeys(i)),null==n.webkitKeys)throw"Could not create MediaKeys";var o=n.webkitKeys.createSession("video/mp4",e);if(null==o)throw"Could not create key session";o.addEventListener("webkitkeymessage",function(e){a.requestLicense(e.message,l,u,r).then(function(e){o.update(e)}).catch(function(e){o.close(),t.keyErrored=!0,t.facade.logger.error("[AMP DRM] A key request error was encountered.",e)})}),o.addEventListener("webkitkeyadded",function(e){t.facade.logger.log("[AMP DRM] Decryption key was added to session.")}),o.addEventListener("webkitkeyerror",function(e){t.sendNotification(J.ERROR,{message:"A decryption key error was encountered for key system "+i,detail:e}),o.close(),t.keyErrored=!0,t.facade.logger.log("[AMP DRM] A decryption key error was encountered.",e)})}).catch(function(e){t.facade.logger.error(e)})}}}],[{key:"NAME",get:function(){return"PlaybackProxy"}}]),t}(puremvc.Proxy),de=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.playbackCoreName="default",i.config=e,i.plugin=n,i.supportedTypes=null,null!=i.config.types&&(i.supportedTypes=i.config.types),i.temporalTypes=["vod","live","ondemand"],i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"renderer",value:function(){var e=this,t=this.playbackCoreName,n=function(t){return e.canPlayMedium(t.medium)===!0&&e.canPlayTemporalType(t.temporalType)===!0&&""!==e.canPlayType(t.type)&&""!==e.canPlayDRM(t.keys)},i=function(t){return Promise.resolve(e)};return{id:t,canPlay:n,factory:i}}},{key:"onRegister",value:function(){this.mediaProxy=this.facade.retrieveProxy(_e.NAME)}},{key:"getPlaybackCoreName",value:function(){return this.playbackCoreName}},{key:"getSupportedTypes",value:function(){return this.supportedTypes||[]}},{key:"setSupportedTypes",value:function(e){return this.supportedTypes=e,e}},{key:"getTemporalTypes",value:function(){return this.temporalTypes||[]}},{key:"getDecryptionTypes",value:function(){return this.decryptionTypes||[]}},{key:"setTemporalTypes",value:function(e){return this.temporalTypes=e,e}},{key:"canPlayTemporalType",value:function(e){return this.getTemporalTypes().indexOf(e)!==-1}},{key:"canPlayType",value:function(e){return null!=this.supportedTypes?this.getSupportedTypes().indexOf(e)!==-1?"maybe":"":babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canPlayType",this).call(this,e)}},{key:"canPlayDRM",value:function(e){var t=this.getDecryptionTypes(),n=L.getKeySystem();return null==e||"com.apple.fps.1_0"===n?"maybe":T.find(Object.keys(e),T.filter(function(e){return t.indexOf(e)!==-1}),T.map(function(e){return e===n||"org.w3.clearkey"===e}),T.map(function(e){return e?"maybe":""}))||""}}]),t}(he),fe=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.playbackCoreName="dvr",e.interval=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"ondurationchange",value:function(e){this.updateDuration()}},{key:"ontimeupdate",value:function(e){this.updateCurrentTime()}},{key:"onplay",value:function(e){this.stopTimer(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onplay",this).call(this,e)}},{key:"onplaying",value:function(e){this.stopTimer(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onplaying",this).call(this,e)}},{key:"onpause",value:function(e){this.startTimer(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onpause",this).call(this,e)}},{key:"canPlayTemporalType",value:function(e){return"dvr"===e}},{key:"getDuration",value:function(){var e=this.getMediaElement();return Infinity===e.duration&&this.updateDuration(),this.data.duration}},{key:"getStartTime",value:function(){return this.getMediaElement().seekable.start(0)}},{key:"getFragmentDuration",value:function(){var e=this.facade.retrieveProxy(ue.NAME),t=e.getValueOf("fragmentDuration");return t||10}},{key:"getLiveTime",value:function(){return this.getDuration()-this.getFragmentDuration()}},{key:"isLive",value:function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()}},{key:"seek",value:function(e){var n=this;return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"seek",this).call(this,e+this.getStartTime()).then(function(e){n.sendNotification(J.IS_LIVE,n.isLive())})}},{key:"updateCurrentTime",value:function(){var e=this.getMediaElement().seekable;if(0!==e.length){var t=this.getMediaElement().currentTime;this.data.currentTime=t-e.start(0),this.sendNotification(J.TIME_CHANGE,{currentTime:this.data.currentTime}),this.mediaProxy.setIsLive(this.isLive())}}},{key:"updateDuration",value:function(){var e=this.getMediaElement().seekable;0!==e.length&&(this.data.duration=e.end(0)-e.start(0),this.sendNotification(J.CHANGE_DURATION,this.data.duration))}},{key:"startTimer",value:function(){this.interval=this.facade.timers.setInterval(this.updateCurrentTime.bind(this),1e3)}},{key:"stopTimer",value:function(){null!=this.interval&&(this.facade.timers.clearInterval(this.interval),this.interval=null,this.updateCurrentTime())}}]),t}(de),pe=function(){function e(t){babelHelpers.classCallCheck(this,e),this.element=t,this.prefix="amp-"}return babelHelpers.createClass(e,[{key:"contains",value:function(e){return this.constructor.contains(e,this.element,this.prefix)}},{key:"add",value:function(e){this.constructor.add(e,this.element,this.prefix)}},{key:"remove",value:function(e){this.constructor.remove(e,this.element,this.prefix)}},{key:"toggle",value:function(e){return this.constructor.contains(e,this.element,this.prefix)}}],[{key:"contains",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t.classList.contains(n+e)}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.classList.add(n+e)}},{key:"remove",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.classList.remove(n+e)}},{key:"toggle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.classList.toggle(n+e)}}]),e}(),ye=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div",i=arguments[3];"string"==typeof n&&(n=document.createElement(n));var r=new pe(n);if(null!=e&&("string"==typeof e&&(e=[e]),e.forEach(function(e){return r.add(e)})),n._classList=r,null!=i&&(n.textContent=i),null!=t){var a=void 0;null!=t.getViewComponent&&(a=t.getViewComponent()),null!=a&&(t=a),t.appendChild(n)}return n}},{key:"createElement",value:function(t,n,i){t&&"object"==("undefined"==typeof t?"undefined":babelHelpers.typeof(t))&&(n=t,i=t.children,t=t.type),t||(t="div"),n||(n={}),i||(i=[]);var r=document.createElement(t),a=["innerHTML","className"],o=["type","children"];return T.each(n,function(e,t){if(!o.includes(t)){if(a.includes(t))return r[t]=e;"style"===t&&e&&"object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))&&(e=I.toCSS(e)),r.setAttribute(t,e)}}),i.forEach(function(t){var n="undefined"==typeof t?"undefined":babelHelpers.typeof(t);if(null!=t){if("string"===n)t=document.createTextNode(t);else{if("object"!==n)return;if(t instanceof Array)return;t=e.createElement(t)}r.appendChild(t)}}),r}},{key:"bindEvents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["onRemove","onRegister"];T.each(t,function(i,r){!n.includes(r)&&/^on/.test(r)&&i&&i.bind&&(e[r]=i.bind(t))})}}]),e}(),Ae=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.data={default:e.defaults.language,language:e.language,locales:[F.locales]},n.defaults={},n.locale=null,n.localeId=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initialize",value:function(e){var t=this;return null!=this.facade.config.locales&&this.addLocales(this.facade.config.locales,!1),e.forEach(function(e){null!=t.facade[e].locales&&t.addLocales(t.facade[e].locales,!1)}),this.compileLocale(this.data.default).then(function(e){return t.defaults=e,t.setLanguage(t.data.language)})}},{key:"getLanguage",value:function(){return this.data.language}},{key:"setLanguage",value:function(e){var t=this;return this.compileLocale(e).then(function(n){t.data.language=e,t.localeId=e.toLowerCase(),t.locale=t.facade.l10n=n,t.sendNotification(J.LANGUAGE_CHANGE,e)})}},{key:"compileLocale",value:function(e){var t=this;return new Promise(function(n,i){if(!e)return n({});var r=e.toLowerCase(),a=t.getLocaleIdShort(r),o=function(e){return e[r]||e[a]},s=function(e){return null!=e},l=function(e){return"string"!=typeof e?e:dt.addResource({src:t.facade.evaluatePaths(e),type:L.mimeTypes.json}).then(function(e){return e.data}).catch(function(e){return{}})},u=T.transform(t.data.locales,T.filter(s),T.map(o),T.filter(s),T.map(l));Promise.all(u).then(function(e){return n(Object.assign.apply(Object,[{}].concat(babelHelpers.toConsumableArray(e))))})})}},{key:"getLocaleId",value:function(){return this.localeId}},{key:"getLocaleIdShort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.localeId;return(e||"").split("-").shift()}},{key:"getLocales",value:function(){return this.data.locales}},{key:"setLocales",value:function(e){return this.data.locales=e,e}},{key:"addLocales",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null==e?Promise.resolve():(e instanceof Array||(e=[e]),e.forEach(function(e){if("object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))){var n={};T.each(e,function(e,t){return n[t.toLowerCase()]=e}),t.data.locales.push(n)}}),n===!1?Promise.resolve():this.setLanguage(this.getLanguage()))}},{key:"getString",value:function(e,t){if(null!=e){if(!this.data.language)return e;try{var n=e.replace(/^MSG_/,""),i="MSG_"+n,r=this.defaults,a=this.locale||r;if(null==a)return e;var o=a[i]||a[n]||r[i]||r[n]||e;return o=this.facade.evaluateBindings(o,t)}catch(t){return e}}}},{key:"getLanguageString",value:function(e){if("string"!=typeof e||null==e||""===e)return"";var t="MSG_"+e.toUpperCase(),n=this.getString(t);return n===t&&(e=this.getLocaleIdShort(e),t="MSG_"+e.toUpperCase(),n=this.getString(t)),n}}],[{key:"NAME",get:function(){return"LocalizationProxy"}}]),t}(puremvc.Proxy),ve=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.mediatorName=e,i.config=null,i.classList=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e);var n=this.facade.player||this.facade;this.config=n.retrieveProxy(Q.NAME),this.classList=new pe(this.viewComponent)}}]),t}(puremvc.Mediator),ge=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.localizationManager=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e);var n=this.facade.player||this.facade;this.localizationManager=n.retrieveProxy(Ae.NAME)}}]),t}(ve),me=function(e){function t(e,n,i,r){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||L.createUID()));return a.componentType=n,a.parent=i,a.element=r,a.componentName=null,null!=e&&(a.componentName=e),null==a.mediatorName&&(a.mediatorName=a.createMediatorName()),a.classList=null,a.state=null,a.disabled=!1,a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){null==this.viewComponent&&(this.viewComponent=this.createViewComponent(this.parent,this.element),this.classList=this.viewComponent._classList,ye.bindEvents(this.viewComponent,this))}},{key:"createViewComponent",value:function(e,t){var n=this.getTypeList();return ye.create(n,e,t)}},{key:"createMediatorName",value:function(){var e=this.getTypeList();return e.push("mediator"),e.push(L.createUID()),e.join("-")}},{key:"getTypeList",value:function(){var e=[];return null!=this.componentName&&e.push(this.componentName),null!=this.componentType&&(e=e.concat(this.componentType)),e}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments[2],i=arguments[3];return t===!1&&(t=null),ye.create(e,t,n,i)}},{key:"createText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,i=arguments[3];return ye.create(e,n,i,t)}},{key:"setState",value:function(e){if(e!==this.state)return null!=this.state&&this.classList.remove(this.state),this.state=e,null!=this.state&&this.classList.add(this.state),e}},{key:"getState",value:function(){return this.state}},{key:"setDisabled",value:function(e){if(e!==this.disabled)return this.disabled=e,this.disabled?this.classList.add("disabled"):this.classList.remove("disabled"),e}},{key:"getDisabled",value:function(){return this.disabled}}]),t}(ge),be=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"media-element",null,n));return i.mediatorName=i.componentType+"-mediator",i.created=!1,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){this.created!==!0&&(this.created=!0,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this))}}]),t}(me),ke=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.playbackCoreName="audio",e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){var e=new be("html5","audio");this.sendNotification(J.PLAYBACK_CORE_CHANGE,e),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this)}},{key:"onRemove",value:function(){this.facade.createMediaElement()}},{key:"canPlayMedium",value:function(e){return"audio"===e}},{key:"canPlayType",value:function(e){return/audio/.test(e)?"maybe":/mpegURL/.test(e)&&(L.isIOS()||L.getSafariVersion()!==-1)?"maybe":""}}]),t}(de),Ee=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(i.defaultPlaybackCore=e,i.activePlaybackCore=null,i.renderers=[],null==i.getPlaybackOrder){var r=function(e){var t=n.playbackOrder||[];return t.length>0?t:/Edge|Android/.test(navigator.userAgent)?["audio","hls","dash","dvr","default"]:void 0};i.getPlaybackOrder=n.getPlaybackOrder||r}return i.canPlay=i.canPlay.bind(i),i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.registerPlaybackCore(new fe),this.registerPlaybackCore(this.defaultPlaybackCore),this.registerPlaybackCore(new ke),this.activePlaybackCore=this.defaultPlaybackCore}},{key:"ready",value:function(){if("function"==typeof this.getPlaybackOrder){var e=this.getPlaybackOrder(this.renderers.map(function(e){return e.id}));null!=e&&(this.renderers=this.renderers.sort(function(t,n){return t=e.indexOf(t.id),n=e.indexOf(n.id),t===n?0:t===-1&&n!==-1?1:t!==-1&&n===-1?-1:t-n}))}}},{key:"getActivePlaybackCore",value:function(){return this.activePlaybackCore}},{key:"registerPlaybackCore",value:function(e){this.registerRenderer(e.renderer())}},{key:"registerRenderer",value:function(e){var t=e.id;null==this.renderers[t]&&(this.renderers.push(e),this.renderers[t]=e)}},{key:"retrieveRenderer",value:function(e){return this.renderers[e]}},{key:"retrieveRendererFor",value:function(e){var t=this,n=T.transform(this.renderers,T.filter(function(t){return t.canPlay(e)}),T.map(function(e){return e.factory}));return L.first(n,this.facade).then(function(e){return e===t.facade?null:e})}},{key:"removeRenderer",value:function(e){if(null!=this.renderers[e]){var t=this.renderers[e],n=this.renderers.indexOf(t);return this.renderers.splice(n,1),delete this.renderers[e],t}}},{key:"setPlaybackCore",value:function(e){var t=this;return this.retrieveRendererFor(e).then(function(e){if(null==e)throw t.facade.createMediaError(MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED);var n=t.facade.retrieveProxy(he.NAME);return n!==e?("function"==typeof n.destroy&&n.destroy(),t.facade.removeProxy(he.NAME),t.facade.registerProxy(e),e.setData(n.getData())):"function"==typeof n.unload&&n.unload(),t.activePlaybackCore=e,e})}},{key:"canPlay",value:function(e){return this.renderers.some(function(t){return t.canPlay(e)})}}],[{key:"NAME",get:function(){return"PlayerProxy"}}]),t}(puremvc.Proxy),_e=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.data={metadata:{}},n.applyDefaults=n.applyDefaults.bind(n),n.started=!1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getData",value:function(){var e=L.clone(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this));return null==e.authorization&&(e.authorization=L.clone(this.facade.security.data)),e}},{key:"setData",value:function(e){return null!=this.data&&this.facade.getCurrentTime()<this.facade.getDuration()&&this.sendNotification(J.MEDIA_SEQUENCE_ABORTED),this.started=!1,
this.setAutoplay(e.autoplay),this.setType(e.type),this.setIsLive(e.isLive),this.setTemporalType(e.temporalType),null!=e.source&&this.setSource(e.source),null!=e.src&&this.setSrc(e.src),this.setTitle(e.title),this.setDuration(e.duration),this.setPoster(e.poster),this.setGUID(e.guid),this.setLink(e.link),this.setEmbed(e.embed),this.setWidth(e.width),this.setHeight(e.height),this.setCategory(e.category),this.setStartTime(e.startTime),this.setDescription(e.description),this.setStatus(e.status),this.setCategory(e.category),this.setMetadata(e.metadata),this.setAuthorization(e.authorization),this.setMedium(e.medium),this.setPubDate(e.pubDate),this.setTrack(e.track),this.setScenes(e.scenes),this.setKeys(e.keys),this.setCues(e.cues),this.setRestriction(e.restriction),this.data}},{key:"applyDefaults",value:function(e){null==e.medium&&(e.medium=/audio/.test(e.type)?"audio":"video"),null==e.temporalType&&(e.temporalType="vod"),e.isLive="live"===e.temporalType||"dvr"===e.temporalType;var t=e.source;if(null==e.src&&t){var n=this.facade.retrieveProxy(Ee.NAME);if(null!=n){var i=L.selectSource(e,n.canPlay);i&&i.src&&(e.src=i.src,e.type=i.type)}}null==e.type&&(e.type=L.getMimeType(e.src));var r=e.scenes;return null!=r&&r.forEach(function(e,t){var n=void 0;e.start=isNaN(n=L.flattenTimecode(e.sceneStartTime))?0:n,e.end=isNaN(n=L.flattenTimecode(e.sceneEndTime))?0:n,e.title=e.sceneTitle||"",e.description=e.sceneDescription||"",e.position=t+1}),null==e.startTime&&(e.startTime=0),null==e.status&&(e.status={}),null==e.restriction&&(e.restriction=[]),null==e.track&&(e.track=[]),null==e.metadata&&(e.metadata={}),e.originalSrc=e.src,e}},{key:"updateData",value:function(e){var t=this;T.each(e,function(e,n){n in t.data&&(t.data[n]=e)})}},{key:"getGUID",value:function(){return this.data.guid}},{key:"setGUID",value:function(e){return this.data.guid=e}},{key:"getLink",value:function(){return this.data.link}},{key:"setLink",value:function(e){return this.data.link=e}},{key:"getStartTime",value:function(){return this.data.startTime}},{key:"setStartTime",value:function(e){return this.data.startTime=e}},{key:"getEmbed",value:function(){return this.data.embed}},{key:"setEmbed",value:function(e){return this.data.embed=e}},{key:"getAutoplay",value:function(){return this.data.autoplay}},{key:"setAutoplay",value:function(e){return this.data.autoplay=e}},{key:"getPubDate",value:function(){return this.data.pubDate}},{key:"setPubDate",value:function(e){return this.data.pubDate=e}},{key:"getCategory",value:function(){return this.data.category}},{key:"setCategory",value:function(e){return this.data.category=e}},{key:"getStatus",value:function(){return this.data.status}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.data.status=e}},{key:"getSrc",value:function(){return this.facade.security.createURL(this.data.src)}},{key:"setSrc",value:function(e){return this.data.src=e}},{key:"getType",value:function(){return this.data.type}},{key:"setType",value:function(e){return this.data.type=e}},{key:"getMedium",value:function(){return this.data.medium}},{key:"setMedium",value:function(e){if(e!==this.data.medium)return this.data.medium=e,this.facade.retrieveProxy(oe.NAME).setMedium(e)}},{key:"getMetadata",value:function(){return this.data.metadata}},{key:"setMetadata",value:function(e){return this.data.metadata=e}},{key:"getSource",value:function(){return this.data.source}},{key:"setSource",value:function(e){return this.data.source=e}},{key:"getTrack",value:function(){return this.data.track}},{key:"setTrack",value:function(e){return this.data.track=e}},{key:"getTitle",value:function(){return this.data.title}},{key:"setTitle",value:function(e){return this.data.title=e}},{key:"getWidth",value:function(){return this.data.width}},{key:"setWidth",value:function(e){return this.data.width=e}},{key:"getHeight",value:function(){return this.data.height}},{key:"setHeight",value:function(e){return this.data.height=e}},{key:"getDescription",value:function(){return this.data.description}},{key:"setDescription",value:function(e){return this.data.description=e}},{key:"getCategory",value:function(){return this.data.category}},{key:"setCategory",value:function(e){return this.data.category=e}},{key:"getDuration",value:function(e){return this.data.duration}},{key:"setDuration",value:function(e){if(e&&"live"!==this.data.temporalType){var t=navigator.userAgent;if(1!==e||!/Android/.test(t)||/Android.*Chrome/.test(t))return e!==this.data.duration&&(this.data.duration=e,this.sendNotification(J.TIME_CHANGE,{duration:e})),Infinity===e&&this.setTemporalType("live"),e}}},{key:"getPoster",value:function(e){return this.data.poster}},{key:"setPoster",value:function(e){this.data.poster=e}},{key:"getIsLive",value:function(){return this.data.isLive}},{key:"setIsLive",value:function(e){if(e!==this.data.isLive)return this.data.isLive=e,this.sendNotification(J.IS_LIVE,e),e}},{key:"getTemporalType",value:function(){return this.data.temporalType||"vod"}},{key:"setTemporalType",value:function(e){if(e!==this.data.temporalType){var t=this.data.temporalType;this.data.temporalType=e,this.sendNotification(J.TEMPORAL_TYPE_CHANGE,{previous:t,value:e})}}},{key:"getScenes",value:function(){return this.data.scenes}},{key:"setScenes",value:function(e){return this.data.scenes=e}},{key:"getCues",value:function(){return this.data.cues}},{key:"setCues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.data.cues!==e)return this.data.cues=e,this.sendNotification(J.CUES_CHANGE,e),e}},{key:"getScene",value:function(e){var t=this.data.scenes;if(null!=t)return t.find(function(t){return t.start<=e&&e<t.end})}},{key:"getKeys",value:function(){return this.data.keys}},{key:"setKeys",value:function(e){this.data.keys=e}},{key:"getAuthorization",value:function(){return this.data.authorization}},{key:"setAuthorization",value:function(e){this.data.authorization=e}},{key:"getRestriction",value:function(){return this.data.restriction}},{key:"setRestriction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.data.restriction=e}}],[{key:"NAME",get:function(){return"MediaProxy"}}]),t}(puremvc.Proxy),Te=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.list=e,n.onchange=null,n.handlers={change:n.changeHandler.bind(n)},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"changeHandler",value:function(e){this.dispatchEvent(e)}},{key:"add",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.list.push(e),e.addEventListener("change",this.handlers.change),t===!0&&this.dispatch("addtrack",e)}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.list.indexOf(e);if(n!==-1)return this.list.splice(n,1),e.removeEventListener("change",this.handlers.change),t===!0&&this.dispatch("removetrack",e),e}},{key:"clear",value:function(){var e=this;0!==this.list.length&&(T.each(this.list,function(){e.remove(e[e.list.length-1],!1)}),this.dispatch("removetrack"))}},{key:"getTrackById",value:function(e){return this.list.find(function(t){return t.id===e})}},{key:"some",value:function(e){return this.list.some(e)}}]),t}(a),Ce=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.startTime,i=arguments[2],r=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};babelHelpers.classCallCheck(this,e),this.startTime=t,this.endTime=n,this.data=i,this.id=r,this.style=a}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n,i,r,a){return new e(t,n,i,r,a)}}]),e}(),Ne=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"text",set:function(e){this.data.text=e},get:function(){return this.data.text}},{key:"html",set:function(e){this.data.html=e},get:function(){return this.data.html}},{key:"raw",get:function(){return this.data.raw}}],[{key:"create",value:function(e,n,i,r,a){return new t(e,n,i,r,a)}}]),t}(Ce),Pe=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"createTextContent",value:function(e,t){var n=/[\&<>]/.test(t)?e.createCDATASection(t):e.createTextNode(t);return n}},{key:"updateTextContent",value:function(t,n){var i=e.createTextContent(t.ownerDocument,n);return t.removeChild(t.childNodes[0]),t.appendChild(i),t}},{key:"serialize",value:function(e){if(null!=e){if("string"==typeof e)return e;try{var t=new XMLSerializer;return t.serializeToString(e)}catch(e){}}}},{key:"parse",value:function(e){var t=new DOMParser;return t.parseFromString(e,"application/xml")}}]),e}(),Se=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"parse",value:function(e){var t,n,i,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.create({kind:"captions",type:L.mimeTypes.ttml});return"string"==typeof e&&(e=Pe.parse(e)),r=Array.prototype.slice.call(e.querySelectorAll("styling style")),r.forEach(function(e,t,n){var i,r,a;a="",r=e.getAttribute("id")||e.getAttribute("xml:id"),i=Array.prototype.slice.call(e.attributes),i.forEach(function(e,t,n){if("tts"===e.prefix)return a+=L.toHyphenated(e.localName)+":"+e.nodeValue+";"}),o.styles[r]=a}),i=Array.prototype.slice.call(e.querySelectorAll("body [style]")),i.forEach(function(e,t,n){var i;i=e.getAttribute("style"),e.setAttribute("style",o.styles[i])}),a=e.querySelector("tt"),n=a.getAttribute("lang")||a.getAttribute("xml:lang"),void 0!==o.language&&null!==o.language||(o.language=n),t=Array.prototype.slice.call(e.querySelectorAll("body p[begin]")),t.forEach(function(e,n,i){var r,a,s,l,u,c,h;u=e.getAttribute("begin"),e.removeAttribute("begin"),null!=e.getAttribute("end")?(s=e.getAttribute("end"),e.removeAttribute("end")):null!=t[n+1]&&(s=t[n+1].getAttribute("begin")),r=e.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"),null!=r&&(c={align:"center"===r?"middle":r},e.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign")),h=Pe.serialize(e),h=h.replace(/\s*xmlns="[^"]*"/,""),l=h,h=h.replace(/^<p[^>]*>/,""),h=h.replace(/<\/p>$/,""),h=h.replace(/<br\/>/,"\n"),h=h.replace(/<span style="([^"]*)"/,"<c.$1"),h=h.replace(/<\/span>/,"</c>"),a=Ne.create(L.flattenTimecode(u),L.flattenTimecode(s),{text:h,html:l},""+n,c),o.cues.push(a)}),o}}]),e}(),Oe=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.create({kind:"captions",type:L.mimeTypes.srt});e=e.replace(/\r/g,"");var n=e.split("\n\n");return T.each(n,function(e){var n=e.split("\n");try{var i=(n[0],n[1].match(/([0-9:\,]+)\s*-->\s*([0-9:\,]+)/).slice(1)),r=L.flattenTimecode(i[0]),a=L.flattenTimecode(i[1]),o=n.slice(2),s=Ne.create(r,a,{text:o.join("\n"),html:"<p>"+o.join("<br />")+"</p>"});t.cues.push(s)}catch(e){w.instance.warn("SRT Parsing Warning")}}),t}}]),e}(),Me=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"parseCaption",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.trim().split("\n"),a=/([0-9:\.]+)\s*-->\s*([0-9:\.]+)([^\n]*)/,o=/\s*([A-Za-z]+)\s*:\s*([\w\-\%]+)/g;try{a.test(r[0])||(n=r.shift());var s=r[0].match(a).slice(1),l=s[2],u=L.flattenTimecode(s[0]),c=L.flattenTimecode(s[1]),h=r.slice(1);null!=l&&l.replace(o,function(e,t,n){return i[t]=n,""});var d=e.createHTML(h),f=h.join("\n"),p=Ne.create(u,c,{text:f,html:d,raw:t},""+n,i);return Object.assign(p,i),p}catch(e){w.instance.error("WebVTT Parse Error",e)}}},{key:"parse",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.create({kind:"captions",type:L.mimeTypes.vtt});e=e.replace(/\r/g,"");var i=e.split("\n\n"),r=0;return i.forEach(function(e){if(!/^WEBVTT/.test(e)&&""!=e&&!/^NOTE/.test(e)&&!/^STYLE/.test(e)){var i=t.parseCaption(e,++r);n.cues.push(i)}}),n}}],[{key:"createHTML",value:function(e){return"string"==typeof e&&(e=e.split(/\n|\r/)),"<p>"+e.join("<br />")+"</p>"}}]),e}(),Re={"application/ttml+xml":new Se,"application/x-subrip":new Oe,"text/vtt":new Me,undefined:new Se},He=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.cues=n,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getCueAt",value:function(e){return this.cues.find(function(t){return t.startTime<=e&&t.endTime>=e})}}],[{key:"create",value:function(e){return new t(e)}}]),t}(ce),Le=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{kind:e.kind,label:e.label,language:e.srclang}));i.src=e.src,i.type=e.type,i.cues=e.cues||[],i.styles=e.styles||{},i.activeCues=[],i.isLive=/^live/.test(i.type);var r=n;return i.src&&!i.isLive&&(r=function(){return L.request(i.src).then(function(e){try{Re[i.type].parse(e.response,i)}catch(e){return i.dispatch("error","Could not parse caption track: "+i.src),void w.instance.error("Could not parse caption track: "+i.src)}"function"==typeof n&&n(i)}).catch(function(e){i.dispatch("error","Could not load caption track: "+e+", "+i.src),w.instance.error("Could not load caption track: "+e+", "+i.src)})}),null!=r&&Promise.resolve(i).then(r),i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"create",value:function(e,n){return new t(e,n)}}]),t}(He),Ie=function(e){function t(e,n){var i;babelHelpers.classCallCheck(this,t);var r=dt.getResourceManager(),a=function(){var e=document.createElement("a");e.href=i.src;var t=e.protocol+"//"+e.hostname,a=t+e.pathname.split("/").slice(0,-1).join("/")+"/";i.cues.forEach(function(e){var n=e.text.split("#"),i=babelHelpers.slicedToArray(n,2),o=i[0],s=i[1],l=o;/^(https?:)?\/\//.test(l)||(l=/^\//.test(l)?t+l:a+l);var u=s.split("="),c=u[0],h=u[1].split(","),d={background:"url("+l+") 0px 0px no-repeat"};return T.each(c,function(e,t){var n=h[t];switch(e){case"w":d.width=n+"px";break;case"h":d.height=n+"px";break;case"x":d.background=d.background.replace(") 0px",") -"+n+"px");break;case"y":d.background=d.background.replace("0px n","-"+n+"px n")}}),e.style=d,r.add({src:l,type:"image"})}),"function"==typeof n&&n(i)};return i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"create",value:function(e){return new Promise(function(n,i){var r;try{return new t(e,function(e){return n(e)})}catch(e){return r=e,i(r)}})}}]),t}(Le),we=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,{}));return e.data.audioTracks=new Te,e.data.videoTracks=new Te,e.data.textTracks=new Te,e.data.previewTracks=new Te,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"clear",value:function(){this.data.audioTracks.clear(),this.data.videoTracks.clear(),this.data.textTracks.clear(),this.data.previewTracks.clear()}},{key:"setMedia",value:function(e){var t=this,n=e.track||[];n.forEach(function(e){"preview"!==e.kind&&"thumbnail"!==e.kind||t.getPreviewTracks().add(new Ie(e))})}},{key:"getAudioTracks",value:function(){return this.data.audioTracks}},{key:"getVideoTracks",value:function(){return this.data.videoTracks}},{key:"getTextTracks",value:function(){return this.data.textTracks}},{key:"getPreviewTracks",value:function(){return this.data.previewTracks}}],[{key:"NAME",get:function(){return"TracksProxy"}}]),t}(puremvc.Proxy),De=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"player",null,n));return i.layers=[],i.core=null,i.medium=null,i.ready=!1,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this);var e=L.getDevice();null!=e&&this.classList.add(e),L.isTouchDevice()&&this.classList.add("touch")}},{key:"listNotificationInterests",value:function(){return[J.DISPLAY_STATE_CHANGE,J.ACTIVE_STATE_CHANGE,J.PLAY_STATE_CHANGE,J.ADD_APPLICATION_STATE,J.REMOVE_APPLICATION_STATE,J.MEDIUM_CHANGE,J.DURATION_CHANGE,J.TEMPORAL_TYPE_CHANGE,J.IS_LIVE,J.ADD_LAYER,J.REMOVE_LAYER,J.STARTUP]}},{key:"handleNotification",value:function(e){var t=e.getName(),n=e.getBody();switch(t){case J.ACTIVE_STATE_CHANGE:case J.PLAY_STATE_CHANGE:case J.DISPLAY_STATE_CHANGE:case J.MEDIUM_CHANGE:var i=n,r=i.value,a=i.previous;null!=a&&this.classList.contains(a)&&this.classList.remove(a),null!=r&&this.classList.add(r);break;case J.ADD_APPLICATION_STATE:if(null==n)return;this.classList.add(n);break;case J.REMOVE_APPLICATION_STATE:this.classList.remove(n);break;case J.TEMPORAL_TYPE_CHANGE:n.previous&&this.sendNotification(J.REMOVE_APPLICATION_STATE,n.previous),n.value&&this.sendNotification(J.ADD_APPLICATION_STATE,n.value);break;case J.IS_LIVE:n===!0?this.sendNotification(J.ADD_APPLICATION_STATE,"is-live"):this.sendNotification(J.REMOVE_APPLICATION_STATE,"is-live");break;case J.DURATION_CHANGE:n>3600?this.sendNotification(J.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(J.REMOVE_APPLICATION_STATE,"long-form");break;case J.ADD_LAYER:this.addLayer(n);break;case J.REMOVE_LAYER:this.removeLayer(n);break;case J.STARTUP:this.initialize(),this.viewCreated()}}},{key:"initialize",value:function(){var e=this;this.ready=!0,this.layers.forEach(function(t){e.viewComponent.contains(t)||e.viewComponent.appendChild(t)})}},{key:"viewCreated",value:function(){this.sendNotification(J.VIEW_CREATED)}},{key:"addLayer",value:function(e){this.layers.push(e),this.ready&&this.viewComponent.appendChild(e)}},{key:"removeLayer",value:function(e){this.viewComponent.contains(e)&&this.viewComponent.removeChild(e);var t=this.layers.indexOf(e);t>=0&&this.layers.splice(t,1)}}]),t}(me),xe=function(e){function t(e){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"layer"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.registerLayer()}},{key:"onRemove",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRemove",this).call(this),this.removeLayer()}},{key:"registerLayer",value:function(){this.sendNotification(J.ADD_LAYER,this.viewComponent)}},{key:"removeLayer",value:function(){this.sendNotification(J.REMOVE_LAYER,this.viewComponent)}}]),t}(me),Ge=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"overlays"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.ADD_OVERLAY,J.REMOVE_OVERLAY]}},{key:"handleNotification",value:function(e){var t=e.getName(),n=e.getBody();switch(t){case J.ADD_OVERLAY:this.viewComponent.appendChild(n);break;case J.REMOVE_OVERLAY:this.viewComponent.removeChild(n)}}}]),t}(xe),Ue=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"video"));return e.mediator=null,e.mediaElement=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.PLAYBACK_CORE_CHANGE]}},{key:"handleNotification",value:function(e){var t=e.getName(),n=e.getBody();switch(t){case J.PLAYBACK_CORE_CHANGE:null!=this.mediaElement&&this.viewComponent.removeChild(this.mediaElement),null!=this.mediator&&this.facade.removeMediator(this.mediator.getMediatorName());var i=n&&n.getViewComponent;i?(this.facade.registerMediator(n),this.mediator=n,this.mediaElement=this.mediator.getViewComponent()):(this.mediator=null,this.mediaElement=n),null!=this.mediaElement&&(this.facade.setMediaElement(this.mediaElement),this.viewComponent.appendChild(this.mediaElement))}}}]),t}(xe),je={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",BREAK_SKIPPED:"adsbreakskipped",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_MANAGER_LOADED:"adsmanagerloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PLAYING:"adsplaying",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_CLICKED:"adclicked",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",COMPLETE:"adscomplete",CONCRETE:"adsconcrete",LOG:"adslog",REQUEST:"adsrequest",REQUEST_COMPLETE:"adsrequestcomplete",RESPONSE:"adsresponse",SKIPPED:"adsskipped",IMPRESSION:"adsimpression"},Ve=function(e){function t(e){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"overlay"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.registerOverlay()}},{key:"onRemove",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRemove",this).call(this),this.removeOverlay()}},{key:"registerOverlay",value:function(){this.sendNotification(J.ADD_OVERLAY,this.viewComponent)}},{key:"removeOverlay",value:function(){this.sendNotification(J.REMOVE_OVERLAY,this.viewComponent)}}]),t}(me),Be=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ads"));return e._hidden=!0,e._container=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.setContainer(this.viewComponent),this.sendNotification(je.AD_CONTAINER_CREATED,this.viewComponent)}},{key:"listNotificationInterests",value:function(){return[je.BREAK_START,je.BREAK_END]}},{key:"getHidden",value:function(){return this._hidden}},{key:"setHidden",value:function(e){return this._hidden=e,this._container&&(this._container.hidden=e),e}},{key:"getContainer",value:function(){return this._container}},{key:"setContainer",value:function(e){return this._container=e,this._container&&(this._container.hidden=this._hidden),e}},{key:"handleNotification",value:function(e){switch(e.getName()){case je.BREAK_START:this.setHidden(!1);break;case je.BREAK_END:this.setHidden(!0)}}}]),t}(Ve),Ye=function(e){function t(e,n){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"doAfter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(i,r){var a=function(){try{e(),i()}catch(e){t.facade.logger.error(e),r(e)}};return t.facade.timers.setTimeout(a,n)})}},{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e);var n=this.facade.player||this.facade;this.applicationState=n.appState,this.media=n.mediaProxy,this.config=n.configuration,this.logger=n.logger,this.bindings=n.bindings,this.params=n.params,this.playerCore=n.playerCore,this.security=n.security,this.tracks=n.tracks,this.localization=n.localization,this.player=n}},{key:"handleNotification",value:function(e){var t=e.getName();"function"==typeof this[t]&&this[t](e.getBody(),e)}},{key:"playback",get:function(){return this.playerCore.getActivePlaybackCore()}}]),t}(puremvc.Mediator),Fe=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.START,J.PLAY,J.PAUSE,J.ENDED,J.TOGGLE_PLAY_PAUSE,J.CHANGE_DURATION]}},{key:"play",value:function(e){this.applicationState.getLocked()!==!0&&(e&&this.playback.initialized!==!0&&this.sendNotification(J.INITIALIZED),this.playback.initialized===!0&&(this.media.getSrc()||this.media.getSource())&&(this.playback.getStarted()||this.sendNotification(J.START),this.playback.play()))}},{key:"pause",value:function(){this.playback.pause(),this.sendNotification(J.CHANGE_ACTIVE_STATE,ae.ACTIVE)}},{key:"ended",value:function(){var e=this;this.applicationState.getEnded()||(this.applicationState.setEnded(!0),this.doAfter(function(){e.config.getLoop()===!0?e.sendNotification(J.REPLAY):e.applicationState.getHasPostContent()===!1&&e.sendNotification(J.MEDIA_SEQUENCE_ENDED)}))}},{key:"start",value:function(e){this.sendNotification(J.REQUEST_PLAY),this.sendNotification(J.STARTED,e)}},{key:"toggleplaypause",value:function(){var e=void 0;if(!this.applicationState.getSeeking()){switch(this.applicationState.getPlayState()){case re.ENDED:e=J.REPLAY;break;case re.PAUSED:case re.READY:e=J.PLAY;break;case re.PLAYING:e=J.PAUSE}this.applicationState.getWaiting()&&this.facade.getMediaElement().paused===!0&&(e=J.PLAY),this.sendNotification(e,!0)}}},{key:"changeduration",value:function(e){this.media.getDuration()!==e&&this.media.setDuration(e)}}],[{key:"NAME",get:function(){return"CoreController"}}]),t}(Ye),ze=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"track",value:function(e,t,n){var i=L.semver(n.version),r={url:"//amp.akamaized.net/amp.gif",query:{prod:i.build?i.build:"standard",prodver:i.version,platform:"web",os:bowser.osname,osver:bowser.osversion,browser:bowser.name,browserver:bowser.version,url:location.href,event:e,data:t,lic:n.pid}};return L.request(r).catch(function(e){return w.instance.log(e)})}}]),e}(),Ke=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.STARTUP,J.ERROR,J.TRACK,J.DESTROY]}},{key:"startup",value:function(){var e=this;this.localization.initialize(this.facade.plugins).then(function(){var t=e.facade.config.volume;null!=t&&e.sendNotification(J.CHANGE_VOLUME,t),e.playerCore.ready(),e.facade.config.autoplay===!0&&e.sendNotification(J.ADD_APPLICATION_STATE,"autoplay"),e.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL),e.sendNotification(J.CHANGE_PLAY_STATE,re.READY),e.sendNotification(J.CHANGE_ACTIVE_STATE,ae.ACTIVE),U.value().then(function(){e.facade.performance.ready=Date.now(),e.sendNotification(J.TRACK,r.create("create")),e.sendNotification(J.READY,e.facade),e.doAfter(function(){var t=e.facade.config.media;null!=t&&e.sendNotification(J.SET_MEDIA,t)},2)})}).catch(function(e){throw i.create(e)})}},{key:"error",value:function(e){var t=this,n=function(e){t.facade._error=e,t.playback.destroy();var n=t.playback.getMediaElement();Promise.resolve(n.pause()).catch(function(e){return e}),t.sendNotification(J.CHANGE_PLAY_STATE,re.ERROR),t.facade.dispatch(D.ERROR,e),t.logger.error("[AMP ERROR]",e)};this.facade.transform($.ERROR,i.create(e)).then(function(e){null!=e&&n(e)}).catch(function(e){n(e)})}},{key:"track",value:function(e){ze.track(e.type,e.data,this.facade)}},{key:"destroy",value:function(){var e=this,t=Object.keys(this.facade.getModules()),n=this.facade.plugins;n.forEach(function(n){if(!t.includes(n))try{var i=e.facade[n]||{};"function"==typeof i.destroy&&i.destroy()}catch(t){e.facade.logger.error(t)}})}}],[{key:"NAME",get:function(){return"PlayerController"}}]),t}(Ye),qe=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.PLAYING,J.REQUEST_PLAY,J.PLAYBACK_TARGET_CHANGE,J.REGISTER_PLAYBACK_CORE,J.REPLAY,J.END,J.HAS_POST_CONTENT,J.LOCK,J.MEDIA_SEQUENCE_ENDED]}},{key:"requestplay",value:function(){this.media.started!==!0&&(this.media.started=!0,this.sendNotification(J.PLAY_REQUEST),this.sendNotification(J.WAITING),this.sendNotification(J.MEDIA_SEQUENCE_STARTED),this.sendNotification(J.TRACK,r.create("start")))}},{key:"end",value:function(){var e=this;if(!this.applicationState.getEnded()){if(this.facade.ads.getInProgress()){var t={player:this.player,transform:function(n){if(n>-1)return e.player.sendNotification(J.END),e.player.removeTransform(t),n}};return this.player.addTransform($.TIME,t),void this.facade.ads.terminateAllAds()}this.playback.setEnabled(!1),this.playback.pause(),this.playback.seek(this.playback.getDuration()).then(this.sendNotification.bind(this,J.ENDED))}}},{key:"replay",value:function(){if("function"==typeof this.playback.replay)return void this.playback.replay();var e=this.media.getData();e.metadata=Object.assign({},e.metadata,{config:{autoplay:!0}}),this.sendNotification(J.SET_MEDIA,e)}},{key:"registerplaybackcore",value:function(e){this.playerCore.registerPlaybackCore(e)}},{key:"playbacktargetchange",value:function(e){var t=e.value,n="amp"===t?J.REMOVE_APPLICATION_STATE:J.ADD_APPLICATION_STATE;this.sendNotification(n,"remote-playback")}},{key:"playing",value:function(){0===this.facade.getMediaElement().currentTime&&this.media.started===!1&&this.applicationState.getSeeking()===!1&&(this.media.started=!0,this.sendNotification(J.MEDIA_SEQUENCE_STARTED)),this.applicationState.getPlayState()!==re.PLAYING&&this.sendNotification(J.CHANGE_PLAY_STATE,re.PLAYING)}},{key:"haspostcontent",value:function(e){this.applicationState.setHasPostContent(e)}},{key:"lock",value:function(e){var t=e?J.ADD_APPLICATION_STATE:J.REMOVE_APPLICATION_STATE;this.sendNotification(t,"locked"),this.applicationState.setLocked(e)}},{key:"mediasequenceended",value:function(){this.config.getLoop()===!0?this.doAfter(this.sendNotification.bind(this,J.REPLAY)):(this.sendNotification(J.CHANGE_PLAY_STATE,re.ENDED),this.sendNotification(J.CHANGE_ACTIVE_STATE,ae.ACTIVE))}}],[{key:"NAME",get:function(){return"PlaybackController"}}]),t}(Ye),Qe={EXTERNAL:"external"},We=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.BUFFERING_CHANGE,J.WAITING,J.CHANGE_PLAY_STATE,J.TOGGLE_FULL_SCREEN,J.CHANGE_DISPLAY_STATE,J.CHANGE_ACTIVE_STATE,J.INITIALIZED]}},{key:"bufferingchange",value:function(e){this.applicationState.getBuffering()!==e&&this.applicationState.setBuffering(e)}},{key:"waiting",value:function(){this.applicationState.getWaiting()||this.applicationState.setWaiting(!0)}},{key:"changeplaystate",value:function(e){this.applicationState.setPlayState(e)}},{key:"changeactivestate",
value:function(e){this.applicationState.setActiveState(e)}},{key:"initialized",value:function(){this.playback.initialized=!0}},{key:"changedisplaystate",value:function(e){var t=this;if(e!==this.applicationState.getDisplayState()){var n=function(e){t.sendNotification(J.FULL_SCREEN_CHANGE,e===ie.FULL_SCREEN)};if(this.applicationState.setDisplayState(e),this.config.getFullscreen().mode===Qe.EXTERNAL)return void n(e);var i=this.facade.getMediaElement(),r=this.facade.getViewComponent(),a=L.getFullScreenApi(r,i);e===ie.FULL_SCREEN?(null!=a.event?null!=r.mozRequestFullScreen?document[a.event]=function(e){if(!document.mozFullScreen)return t.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL)}:document[a.event]=function(e){if(null==document[a.element])return t.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL)}:(this.facade.timers.clearInterval(this.interval),this.interval=this.facade.timers.setInterval(function(){i.webkitDisplayingFullscreen!==!0&&(t.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL),t.facade.timers.clearInterval(t.interval))},100)),null!=a.error&&document.addEventListener(a.error,this.facade.logger.error.bind(this.facade.logger)),a.enter()):e===ie.NORMAL&&(null!=a&&"function"==typeof a.exit&&a.exit(),i[a.event]=null,this.facade.timers.clearInterval(this.interval)),n(e)}}},{key:"togglefullscreen",value:function(){var e=this.applicationState.getDisplayState()===ie.FULL_SCREEN?ie.NORMAL:ie.FULL_SCREEN;return this.sendNotification(J.CHANGE_DISPLAY_STATE,e)}}],[{key:"NAME",get:function(){return"StateController"}}]),t}(Ye),Ze=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.enabled=!0,n.plugin=null,n.appState=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDefaults",value:function(){var e=babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaults",this).call(this);return null==e.debug&&(e.debug=null),e}},{key:"getValue",value:function(e){var t=this.facade.player.evaluateBindings(this.config);return null!=e?t[e]:t}},{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.appState=this.facade.player.appState}},{key:"getMediaElement",value:function(){return this.facade.player.getMediaElement()}},{key:"setEnabled",value:function(e){return this.enabled=e,e}},{key:"getEnabled",value:function(){return this.enabled}},{key:"getDebug",value:function(){return null!=this.value.debug?this.value.debug:this.facade.player.getConfig().debug===!0}},{key:"createPlugin",value:function(){}},{key:"initialize",value:function(){this.plugin=this.createPlugin()}},{key:"error",value:function(e){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",e)}},{key:"value",get:function(){return this.getValue()}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Q),Xe=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.player=null,e.proxy=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initialize",value:function(e,n){this.player=n,this.logger=this.player.logger,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e,n)}},{key:"isAvailable",value:function(){return!0}},{key:"loadModuleResources",value:function(){return this.isAvailable()?babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadModuleResources",this).call(this):Promise.resolve()}},{key:"resourcesLoaded",value:function(){"function"==typeof this.oninitialized&&this.oninitialized(this)}},{key:"onRegister",value:function(){if(this.isAvailable()){this.createFramework();var e=this.retrieveProxy(Ze.NAME);e&&"function"==typeof e.initialize&&e.initialize()}this.performance.record("ready"),this.sendNotification(te.PLUGIN_REGISTERED,this)}},{key:"logEvent",value:function(e){if(this.ignoreEvents.test(e.type)!==!0){var t=this.player.getModuleName().toUpperCase()+" "+this.getModuleName().toUpperCase();null!=e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e)}}},{key:"listNotificationPublications",value:function(){var e=[J.ADD_LAYER,J.REMOVE_LAYER,J.ADD_OVERLAY,J.REMOVE_OVERLAY,J.ADD_APPLICATION_STATE,J.REMOVE_APPLICATION_STATE,J.PLAYBACK_CORE_CHANGE];return e.concat(Object.values(te))}}]),t}(ee),$e=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME));return e.plugins=[],e.registered=0,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[te.REGISTER_PLUGINS,te.PLUGIN_REGISTERED,te.PLUGINS_INITIALIZED,J.DESTROY]}},{key:"handleNotification",value:function(e){var t=this,n=e.getName(),i=e.getBody();switch(n){case te.REGISTER_PLUGINS:var r=i;this.facade.plugins=[],T.each(dt.plugins,function(e,n){if(n in r){var i=r[n];if(null!=i&&i.enabled!==!1){if(null==e)return void t.facade.logger.debug("[AMP] Plugin could not be found: "+n);try{var a=new e;a.oninitialized=t.onplugininitialized.bind(t,n),a.onerror=t.onpluginerror.bind(t,n),t.plugins.push(a.initialize.bind(a,i,t.facade))}catch(e){return void t.facade.logger.error("[AMP] Plugin could not be created: "+n+". "+e)}}}});r.plugins||{};T.each(r.plugins||{},function(e,n){if(null!=e&&e.enabled!==!1){var i=function(e,n,i,r,a){return t.facade.loadResources(n.resources).then(function(){var t=dt.plugins[i];return null==t&&a("[AMP] Plugin could not be found: "+i),t(e,n,i)}).then(r).catch(a)};t.plugins.push(i.bind(null,t.facade,e,n,t.onpluginregistered.bind(t,n),t.onpluginerror.bind(t,n)))}}),this.plugins.forEach(function(e){return e()});break;case te.PLUGIN_REGISTERED:this.onpluginregistered(i.getModuleName(),i);break;case te.PLUGINS_INITIALIZED:this.sendNotification(J.STARTUP,this.facade.config);break;case J.DESTROY:T.each(this.facade.plugins,function(e){if(e.destroy)try{e.destroy()}catch(e){t.facade.logger.error(e)}})}}},{key:"initializedCheck",value:function(){this.registered===this.plugins.length&&this.sendNotification(te.PLUGINS_INITIALIZED,this.plugins)}},{key:"onplugininitialized",value:function(e,t){t.oninitialized=null,t.onerror=null,this.facade.registerModule(t)}},{key:"onpluginerror",value:function(e,t){this.registered++,this.facade.logger.error("[AMP] Plugin could not be registered: "+e),this.facade.logger.error(t),this.initializedCheck()}},{key:"onpluginregistered",value:function(e,t){if(null==this.facade[e]){this.registered++,this.facade.logger.debug("[AMP] Plugin registered: "+e),this.facade[e]=t,this.facade.plugins.push(e);var n=t.feature;null!=n&&(this.facade[n]=t),this.initializedCheck()}}}],[{key:"NAME",get:function(){return"PluginsController"}}]),t}(puremvc.Mediator),Je=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.SET_MEDIA,J.CHANGE_MEDIA,J.MEDIA_VALIDATED,se.AUTHORIZED,J.RECORD_CONTENT_CHANGE]}},{key:"setmedia",value:function(e){var t=this;this.sendNotification(J.LOCK,!0),this.facade.busy=!0,this.applicationState.setBuffering(!1),this.applicationState.setEnded(!1),this.playback.setEnabled(!1),this.playback.pause(),null!=this.tracks&&this.tracks.clear(),this.sendNotification(J.HAS_POST_CONTENT,!1),this.sendNotification(J.CHANGE_PLAY_STATE,re.READY),this.sendNotification(J.CHANGE_ACTIVE_STATE,ae.ACTIVE),e=this.media.applyDefaults(e),this.security.setMedia(e),this.facade.transform($.MEDIA,e).then(function(e){null!=e&&(e=t.media.applyDefaults(e),t.sendNotification(J.CHANGE_MEDIA,e))}).catch(function(e){t.sendNotification(J.ERROR,e)})}},{key:"changemedia",value:function(e){try{e=this.media.setData(e)}catch(e){return void this.sendNotification(J.ERROR,e.message)}e=this.media.getData(),null!=e.authorization&&this.security.setAuthorization(e.authorization),this.security.getAuthorized()?this.sendNotification(se.AUTHORIZED,this.security.getAuthorization()):this.sendNotification(se.AUTHORIZE,{media:e})}},{key:"mediavalidated",value:function(e){var t=this,n=this.facade.getMediaElement();this.sendNotification(J.MEDIA_CHANGE,e),this.playerCore.setPlaybackCore(e).then(function(i){if(t.sendNotification(J.LOCK,!1),t.facade.busy=!1,null==i&&(i=t.player.playback),i.reset(),i.setCurrentTime(e.startTime||0),"amp"!==t.applicationState.getPlaybackTarget())return void t.sendNotification(J.MEDIA_SEQUENCE_INITIALIZED,{media:e});t.tracks.setMedia(e);var r=t.facade.getAutoplay()&&t.applicationState.getLocked()===!1,a=t.config.getMuted(),o=t.config.getPlaysInline();if(t.applicationState.calculateAutoplay!==!1&&(t.applicationState.calculateAutoplay=!1,r===!0)){var s=t.facade.autoplayThreshold,l=t.facade.autoplayPolicy;if(s!==U.ALLOWED&&l!==G.NONE){var u=a===!0,c=o===!0,h=l.includes(G.MUTED),d=s===U.MUTED,f=s===U.MUTED_INLINE&&c,p=a!==!1,y=d||f;r=u&&y||h&&y&&p,r===!0?a=!0:t.sendNotification(J.AUTOPLAY_BLOCKED,{threshold:s,policy:l})}}if(null!=o&&(n.playsInline=o),null!=a&&t.playback.setMuted(a,!0,J.INTERNAL),t.sendNotification(J.MEDIA_SEQUENCE_INITIALIZED,{media:e,autoplay:r,muted:a===!0,playsinline:o===!0}),r===!0)t.doAfter(t.sendNotification.bind(t,J.PLAY,!0));else{var A=t.facade.getPreload()||B.NONE;A!==B.NONE&&t.playback.preload(A)}}).catch(function(e){t.sendNotification(J.ERROR,e)})}},{key:"authorized",value:function(){null==this.security.getSession()&&(this.security.setSession(L.createUID()),this.sendNotification(J.MEDIA_VALIDATED,this.media.getData()))}},{key:"recordcontentchange",value:function(e){this.media.updateData(e)}}],[{key:"NAME",get:function(){return"MediaController"}}]),t}(Ye),et=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.TIMED_METADATA,J.TIME_CHANGE,J.SEEK,J.SEEKING,J.SEEK_COMPLETE,J.GO_LIVE]}},{key:"timedmetadata",value:function(e,t){var n={startTime:e.startTime,endTime:e.endTime,type:e.type,track:e.track,value:{key:e.value.key,data:e.value.data,info:e.value.info}},i=n.value;try{null==i.info&&("string"==typeof i.data?i.info=i.data:i.data instanceof ArrayBuffer&&(i.info=L.arrayBufferToString(i.data)))}catch(e){this.facade.logger.log("[AMP ERROR]: Could not parse timed metadata")}t.body=n}},{key:"timechange",value:function(e){var t=this;null!=e.currentTime&&this.facade.transform($.TIME,e.currentTime).then(function(e){return t.applicationState.setCurrentTime(e)}),null!=e.duration&&this.facade.transform($.TIME,e.duration).then(function(e){return t.applicationState.setDuration(e)})}},{key:"seek",value:function(e){var t=this;this.facade.transform($.SEEK,e).then(function(e){if(null!=e&&e!==t.playback.getCurrentTime()){0===e&&t.media.getType()===L.mimeTypes.m3u8&&(e=.25),t.playback.getStarted()===!0&&t.sendNotification(J.WAITING);t.facade.getMediaElement();t.playback.setCurrentTime(e),t.playback.getStarted()!==!0&&t.sendNotification(J.TIME_CHANGE,e)}})}},{key:"seeking",value:function(){return this.applicationState.getSeeking()===!0?void this.applicationState.setSeekRequested(!0):(this.applicationState.getEnded()&&this.applicationState.setEnded(!1),0===this.facade.getMediaElement().currentTime&&(this.media.started=!1),void this.applicationState.setSeeking(!0))}},{key:"seekcomplete",value:function(e,t){var n=this;this.facade.timers.setTimeout(function(){if(n.applicationState.setSeeking(!1),n.applicationState.setSeekRequested(!1),n.sendNotification(J.SEEKED,e),n.applicationState.getPlayState()!==re.READY&&"full-screen"===n.applicationState.displayState&&"ipad"===n.applicationState.device&&n.facade.retrieveProxy(he.NAME).getPaused()!==n.facade.getMediaElement().paused){var t=n.facade.getMediaElement().paused===!0?re.PAUSED:re.PLAYING;n.sendNotification(J.CHANGE_PLAY_STATE,t)}},1)}},{key:"golive",value:function(){"function"==typeof this.playback.goLive&&this.playback.goLive()}}],[{key:"NAME",get:function(){return"TimeController"}}]),t}(Ye),tt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.VOLUME_CHANGE,J.CHANGE_VOLUME,J.CHANGE_MUTED,J.TOGGLE_MUTED]}},{key:"changevolume",value:function(e){e=L.clamp(e,0,1),this.playback.getVolume()!==e&&(this.playback.setVolume(e),0===e?this.sendNotification(J.ADD_APPLICATION_STATE,"muted"):this.sendNotification(J.REMOVE_APPLICATION_STATE,"muted"))}},{key:"volumechange",value:function(e){this.applicationState.setVolume(e)}},{key:"changemuted",value:function(e){this.playback.setMuted(e)}},{key:"togglemuted",value:function(){this.playback.setMuted(!this.playback.getMuted())}}],[{key:"NAME",get:function(){return"VolumeController"}}]),t}(Ye),nt=function(){function e(t){babelHelpers.classCallCheck(this,e);var n=Object.assign({},e.defaults);n=L.override(n,t,!1),L.override(this,n,!1)}return babelHelpers.createClass(e,null,[{key:"create",value:function(t){return new e(t)}}]),e}();nt.defaults={version:"1.0.0",volume:1,captions:{presets:{fontFamily:{monospacedSerif:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",proportionalSerif:"'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif",monospacedSansSerif:"'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace",proportionalSansSerif:"Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif",casual:"'Comic Sans MS', Impact, Handlee, fantasy",cursive:"'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive",smallCapitals:"'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps"},fontSize:{smallest:"x-small",small:"small",medium:"medium",large:"large",largest:"x-large"},edgeType:{none:"0px 0px 0px",depressed:"0px 1px 0px",leftShadow:"-3px 3px 2px",raised:"0px 1px 1px",rightShadow:"3px 3px 2px",uniform:"0px 0px 4px"},color:{white:"rgb(255, 255, 255)",yellow:"rgb(255, 255, 0)",green:"rgb(0, 128, 0)",cyan:"rgb(0, 255, 255)",blue:"rgb(0, 0, 255)",magenta:"rgb(255, 0, 255)",red:"rgb(255, 0, 0)",black:"rgb(0, 0, 0)"}},visible:!1,fontFamily:"monospacedSerif",fontSize:"medium",scroll:"popout",fontColor:"white",fontOpacity:"100%",edgeType:"rightShadow",edgeColor:"black",edgeOpacity:"75%",backgroundColor:"black",backgroundOpacity:"0%",windowColor:"black",windowOpacity:"50%",styles:{window:{backgroundColor:"rgba(0,0,0,0.5)"},text:{fontFamily:"Courier New, Courier, Nimbus Mono L, Cutive Mono, monospace",fontSize:"100%",color:"rgba(255,255,255,1)",textShadow:"2px 2px 3px rgba(0,0,0,0.75)",backgroundColor:"rgba(0,0,0,0)"}}}};var it="akamai_amp",rt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME));return e.namespace=t.NAMESPACE,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){var e=this.config.getSettings()||{};null!=e.namespace&&(this.namespace=it=e.namespace),this.settings=nt.create(e.defaults);var t=Object.assign({},e);delete t.defaults,delete t.namespace;try{var n=localStorage.getItem(this.namespace),i=void 0;null!=n&&(i=L.override(JSON.parse(n),t)),this.save(i)}catch(e){}}},{key:"listNotificationInterests",value:function(){return[J.READY,J.VOLUME_CHANGE,J.CHANGE_SETTINGS,J.CHANGE_AUTOPLAY,J.CHANGE_LOOP,J.CHANGE_PRELOAD,J.CHANGE_CONTROLS,J.MEDIA_CHANGE]}},{key:"changesettings",value:function(e){this.change(e)}},{key:"changeautoplay",value:function(e){this.config.setAutoplay(e)}},{key:"changeloop",value:function(e){this.config.setLoop(e)}},{key:"changepreload",value:function(e){this.config.setPreload(e)}},{key:"changecontrols",value:function(e){this.config.setControls(e),this.updateControls()}},{key:"updateControls",value:function(){this.player.mediaElement.controls=this.config.getControls()}},{key:"mediachange",value:function(e){this.updateControls()}},{key:"ready",value:function(){var e=this.settings.volume;null!=e&&this.sendNotification(J.CHANGE_VOLUME,e)}},{key:"volumechange",value:function(e,t){this.settings.volume!==e&&"internal"!=t.getType()&&this.change({volume:e})}},{key:"computeStyles",value:function(e,t){function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e[n];return t[n][i]||i}function i(t){var i=I.toColor(n("color",e[t+"Color"])),r=e[t+"Opacity"];return null!=r&&(i.a=I.fromPercent(r)),I.fromColor(i)}return e=L.override(this.settings.captions,e),null==t&&(t=e.presets),{window:{backgroundColor:i("window")},text:{fontFamily:n("fontFamily"),fontSize:n("fontSize"),color:i("font"),textShadow:n("edgeType")+" "+i("edge"),backgroundColor:i("background")}}}},{key:"change",value:function(e){if(!(null==e||"object"!==("undefined"==typeof e?"undefined":babelHelpers.typeof(e))||e instanceof Array)){var t=L.diff(this.settings,e);if(null!=t){var n=t.captions;null!=n&&(n.styles=L.override(this.computeStyles(n),n.styles)),this.save(t),this.sendNotification(J.SETTINGS_CHANGE,t)}}}},{key:"getSettings",value:function(){return Object.freeze(Object.assign({change:this.change.bind(this)},this.settings))}},{key:"save",value:function(e){this.settings=L.override(this.settings,e);try{localStorage.setItem(this.namespace,JSON.stringify(this.settings))}catch(e){}}}],[{key:"GET",value:function(){var e=localStorage.getItem(t.NAMESPACE);try{e=JSON.parse(e)}catch(t){e={}}return e||{}}},{key:"NAMESPACE",get:function(){return it}},{key:"NAME",get:function(){return"SettingsController"}}]),t}(Ye),at=function(e){function t(e,n){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME,n))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e,t){this.facade.dispatch(e,t)}},{key:"listNotificationInterests",value:function(){return Object.values(D).concat(Object.values(se)).concat([J.ENABLE_VIDEO_EVENTS,J.DISABLE_VIDEO_EVENTS])}},{key:"handleNotification",value:function(e){var n=e.getName();null!=this[n]?babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleNotification",this).call(this,e):this.dispatchEvent(n,e.getBody())}},{key:"error",value:function(){}},{key:"enablevideoevents",value:function(e){var t=this,n=this.facade.getMediaElement();e.forEach(function(e){return n.addEventListener(e,t.playback.handlers[e])})}},{key:"disablevideoevents",value:function(e){var t=this,n=this.facade.getMediaElement();e.forEach(function(e){return n.removeEventListener(e,t.playback.handlers[e])})}}],[{key:"NAME",get:function(){return"EventController"}}]),t}(Ye),ot=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.ads=a.create(),n.ads.enabled=!1,n.ads.getEnabled=function(){return!1},n.ads.inprogress=!1,n.ads.getInProgress=function(){return!1},n.loadResources=n.loadModuleResources.bind(n),n.presentationModeChanged=n.presentationModeChanged.bind(n),n.moduleName="amp",n.l10n=null,n.appState=null,n.mediaProxy=null,n.bindings=null,n.configuration=null,n.security=null,n.playerCore=null,n.tracks=null,n.mediator=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createModel",value:function(){this.appState=new oe,this.registerProxy(this.appState),this.security=new le,this.registerProxy(this.security),this.mediaProxy=new _e(this.config),this.registerProxy(this.mediaProxy),this.configuration=new ue(this.config),this.registerProxy(this.configuration),this.localization=new Ae(this.config),this.registerProxy(this.localization);var e=new de;this.registerProxy(e),this.playerCore=new Ee(e,this.config),this.registerProxy(this.playerCore),this.tracks=new we,this.registerProxy(this.tracks),this.fps=L.override(ne,this.config.fps)}},{key:"createView",value:function(){this.mediator=new De("html5",this.getViewComponent()),this.registerMediator(this.mediator),this.registerMediator(new Ue),this.registerMediator(new Ge),this.adMediator=new Be,this.registerMediator(this.adMediator)}},{key:"createController",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createController",this).call(this),this.registerMediator(new Fe),this.registerMediator(new Ke),this.registerMediator(new We),this.registerMediator(new $e),this.registerMediator(new Je),this.registerMediator(new qe),this.registerMediator(new et),this.registerMediator(new tt),this.registerMediator(new at),this._settings=new rt,this.registerMediator(this._settings)}},{key:"dispatchEvent",value:function(e){e.player=this,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e)}},{key:"setViewComponent",value:function(e){return e.amp=this,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setViewComponent",this).call(this,e)}},{key:"getPID",value:function(){return dt.LICENSE||this.config.pid}},{key:"getVersion",value:function(){return dt.getVersion()}},{key:"getDebug",value:function(){return this.config.debug}},{key:"createPlugins",value:function(){this.sendNotification(te.REGISTER_PLUGINS,this.config)}},{key:"createMediaElement",value:function(){var e=this.getViewComponent()||{},t=("function"==typeof e.querySelector?e.querySelector("video"):null)||"video";this.mediator=new be("html5",t),this.sendNotification(J.PLAYBACK_CORE_CHANGE,this.mediator);var n=this.mediator.getViewComponent();return null==n.dataset&&(n.dataset={}),n}},{key:"createFramework",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createFramework",this).call(this),this.setMediaElement(this.createMediaElement()),this.createPlugins()}},{key:"getLanguage",value:function(){return this.localization.getLanguage()}},{key:"setLanguage",value:function(e){return this.localization.setLanguage(e),e}},{key:"getLocalizedString",value:function(e,t){try{return this.localization.getString(e,t)}catch(t){return e}}},{key:"getMediaElement",value:function(){return this.appState.getMediaElement()}},{key:"setMediaElement",value:function(e){var t=this.getMediaElement();return null!=t&&t.removeEventListener("webkitpresentationmodechanged",this.presentationModeChanged),e.addEventListener("webkitpresentationmodechanged",this.presentationModeChanged),this.appState.setMediaElement(e),null==e.once&&(e.once=function(e,t){var n=L.createUID(),i=function(e,t,n,i){this.removeEventListener(t,this[e]),delete this[e],n(i)};return this[n]=i.bind(this,n,e,t),this.addEventListener(e,this[n]),n},e.once=e.once.bind(e)),e.amp=this,e}},{key:"presentationModeChanged",value:function(e){"inline"===e.target.webkitPresentationMode&&(e.target.controls=this.getControls())}},{key:"setControls",value:function(e){return this.sendNotification(J.CHANGE_CONTROLS,e)}},{key:"getControls",value:function(){return this.configuration.getControls()}},{key:"getContainer",value:function(){return this.getViewComponent()}},{key:"getAdContainer",value:function(){return this.adMediator.getContainer()}},{key:"setAdContainer",value:function(e){this.adMediator.setContainer(e)}},{key:"getPreviewTracks",value:function(){return this.tracks.getPreviewTracks()}},{key:"getAudioTracks",value:function(){return this.tracks.getAudioTracks()}},{key:"evaluateBindings",value:function(e,t){return t=null!=t?Object.assign({},this,t):this,q.evaluateBindings(e,t)}},{key:"canPlayType",value:function(e){return this.retrieveProxy(he.NAME).canPlayType(e)}},{key:"load",value:function(){this.sendNotification(J.LOAD)}},{key:"play",value:function(){var e=this;return new Promise(function(t,n){var i=function(){e.removeEventListener(D.PLAYING,r),e.removeEventListener(D.AUTOPLAY_BLOCKED,a),e.removeEventListener(D.ERROR,a)},r=function(){i(),t()},a=function(){i(),n()};e.addEventListener(D.PLAYING,r),e.addEventListener(D.AUTOPLAY_BLOCKED,a),e.addEventListener(D.ERROR,a),e.sendNotification(J.PLAY,!0)})}},{key:"replay",value:function(){this.sendNotification(J.REPLAY)}},{key:"pause",value:function(){var e=this;return new Promise(function(t,n){return e.once(D.PAUSED,t),e.sendNotification(J.PAUSE)})}},{key:"seek",value:function(e){var t=this;return new Promise(function(n,i){return t.once(D.SEEKED,n),t.setCurrentTime(e)})}},{key:"end",value:function(){this.sendNotification(J.END)}},{key:"setAutoplay",value:function(e){return this.sendNotification(J.CHANGE_AUTOPLAY,e),e}},{key:"getAutoplay",value:function(){return this.configuration.getAutoplay()}},{key:"setPreload",value:function(e){return this.sendNotification(J.CHANGE_PRELOAD,e),e}},{key:"getPreload",value:function(){return this.configuration.getPreload()}},{key:"setLoop",value:function(e){return this.sendNotification(J.CHANGE_LOOP,e),e}},{key:"getLoop",value:function(){return this.configuration.getLoop()}},{key:"setMuted",value:function(e){return this.sendNotification(J.CHANGE_MUTED,e),e}},{key:"getMuted",value:function(){return this.retrieveProxy(he.NAME).getMuted()}},{key:"mute",value:function(){return this.setMuted(!0)}},{key:"unmute",value:function(){return this.setMuted(!1)}},{key:"setMedia",value:function(e){return this.sendNotification(J.SET_MEDIA,e),e}},{key:"getMedia",value:function(){return this.mediaProxy.getData()}},{key:"setCurrentTime",value:function(e){return this.sendNotification(J.SEEK,e),e}},{key:"getCurrentTime",value:function(){return this.appState.getCurrentTime()}},{key:"setAbsoluteCurrentTime",value:function(e){return this.sendNotification(J.SEEK,e),e}},{key:"getAbsoluteCurrentTime",value:function(){return this.retrieveProxy(he.NAME).getCurrentTime()}},{key:"toUTC",value:function(e){return this.retrieveProxy(he.NAME).toUTC(e)}},{key:"fromUTC",value:function(e){return this.retrieveProxy(he.NAME).fromUTC(e)}},{key:"getDuration",value:function(){return this.appState.getDuration()}},{key:"getAbsoluteDuration",value:function(){return this.mediaProxy.getDuration()}},{key:"setSrc",value:function(e){return this.sendNotification(J.SET_MEDIA,{src:e}),e}},{key:"getSrc",value:function(){return this.mediaProxy.getSrc()}},{key:"setSource",value:function(e){return this.sendNotification(J.SET_MEDIA,{source:e}),e}},{key:"getSource",value:function(){return this.mediaProxy.getSource()}},{key:"setVolume",value:function(e){return this.sendNotification(J.CHANGE_VOLUME,e),e}},{key:"getVolume",value:function(){return this.retrieveProxy(he.NAME).getVolume()}},{key:"getSeeking",value:function(){return this.retrieveProxy(he.NAME).getSeeking()}},{key:"getPaused",value:function(){return this.retrieveProxy(he.NAME).getPaused()}},{key:"getEnded",value:function(){return this.appState.getEnded()}},{key:"getBuffering",value:function(){return this.appState.getBuffering()}},{key:"setDisplayState",value:function(e){this.sendNotification(J.CHANGE_DISPLAY_STATE,e)}},{key:"getDisplayState",value:function(e){return this.appState.getDisplayState()}},{key:"getWaiting",value:function(){return this.appState.getWaiting()}},{key:"setWaiting",value:function(e){return this.appState.setWaiting(e)}},{key:"getBusy",value:function(){return this.appState.getBusy()}},{key:"setBusy",value:function(e){return this.appState.setBusy(e)}},{key:"getError",value:function(){return this._error||this.getMediaElement().error}},{key:"enterFullScreen",value:function(){this.sendNotification(J.CHANGE_DISPLAY_STATE,ie.FULL_SCREEN)}},{key:"exitFullScreen",value:function(){this.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL)}},{key:"setHidden",value:function(e){if(e!==this.appState.getHidden()){this.appState.setHidden(e);var t=this.viewComponent.style;e===!0?(this.hiddenData={width:t.width,height:t.height,paused:this.getPaused()},t.width=t.height="0px",this.hiddenData.paused===!1&&this.pause()):(t.width=this.hiddenData.width,t.height=this.hiddenData.height,this.hiddenData.paused===!1&&this.play(),this.hiddenData=null)}}},{key:"getHidden",value:function(){return this.appState.getHidden()}},{key:"getWidth",value:function(){var e=this.getViewComponent()||{};return e.offsetWidth}},{key:"getHeight",value:function(){var e=this.getViewComponent()||{};return e.offsetHeight}},{key:"getVideoWidth",value:function(){var e=this.getMediaElement()||{};return e.videoWidth}},{key:"getVideoHeight",value:function(){var e=this.getMediaElement()||{};return e.videoHeight}},{key:"getLeft",value:function(){var e=this.getViewComponent()||{};return e.offsetLeft}},{key:"getRight",value:function(){return this.getLeft()+this.getWidth()}},{key:"getTop",value:function(){var e=this.getViewComponent()||{};return e.offsetTop}},{key:"getBottom",value:function(){return this.getTop()+this.getHeight()}},{key:"getMouseX",value:function(){return L.clientX-this.getLeft()}},{key:"getMouseY",value:function(){return L.clientY-this.getTop()}},{key:"getMouseOver",value:function(){var e=this.getMouseX(),t=this.getMouseY();return L.isMouseOverDocument()&&e>=0&&e<=this.getWidth()&&t>=0&&t<=this.getHeight()}},{key:"recordContentChange",value:function(e){this.sendNotification(J.RECORD_CONTENT_CHANGE,e)}},{key:"setPlaybackRate",value:function(e){this.ads.inProgress!==!0&&e!==this.getMediaElement().playbackRate&&(this.appState.setPlaybackRate(e),this.getMediaElement().playbackRate=e)}},{key:"getPlaybackRate",value:function(){return this.getMediaElement().playbackRate}},{key:"setCues",value:function(e){return this.mediaProxy.setCues(e),e}},{key:"getCues",value:function(){return this.mediaProxy.getCues()}},{key:"setQuality",value:function(e){return this.retrieveProxy(he.NAME).setQuality(e)}},{key:"getQuality",value:function(){return this.retrieveProxy(he.NAME).getQuality()}},{key:"getQualityLevels",value:function(){return this.retrieveProxy(he.NAME).getQualityLevels()}},{key:"getQualityMode",value:function(){return this.retrieveProxy(he.NAME).getQualityMode()}},{key:"setQualityMode",value:function(e){return this.retrieveProxy(he.NAME).setQualityMode(e)}},{key:"getPlayState",value:function(){return this.appState.getPlayState()}},{key:"getPlaybackTarget",value:function(){return this.appState.getPlaybackTarget()}},{key:"setPlaybackTarget",value:function(e){this.appState.setPlaybackTarget(e)}},{key:"getMediaTransforms",value:function(){return this.mediaProxy.getTransforms()}},{key:"authorize",value:function(e){this.security.authorize(e)}},{key:"goLive",value:function(){return this.retrieveProxy(he.NAME).goLive()}},{key:"appendChild",value:function(e){this.mediator.addLayer(e)}},{key:"removeChild",value:function(e){this.mediator.removeLayer(e)}},{key:"getSettings",value:function(){return this._settings&&this._settings.getSettings()||{change:function(){}}}},{key:"createMediaError",value:function(e,t){var n=null;switch(e){case MediaError.MEDIA_ERR_ABORTED:n=this.l10n.MSG_ERROR_ABORTED;break;case MediaError.MEDIA_ERR_DECODE:n=this.l10n.MSG_ERROR_DECODE;break;case MediaError.MEDIA_ERR_NETWORK:n=this.l10n.MSG_ERROR_NETWORK;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:n=this.l10n.MSG_ERROR_SRC}return i.create(n,e,t)}},{key:"destroy",value:function(){var e=this,n=this.retrieveProxy(Ee.NAME);if(null!=n){var i=n.activePlaybackCore;null!=i&&"function"==typeof i.destroy&&i.destroy()}this.sendNotification(J.DESTROY,this),setTimeout(function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",e).call(e),L.timerGroup(e.multitonKey,!0)},1)}},{key:"now",get:function(){return Date.now()}},{key:"paths",get:function(){
return this.configuration.getPaths()}},{key:"timers",get:function(){return L.timerGroup(this.multitonKey)}},{key:"autoplayPolicy",get:function(){return this.configuration.getAutoplayPolicy()}},{key:"autoplayThreshold",get:function(){return U.threshold}},{key:"temporalType",get:function(){return this.mediaProxy.getTemporalType()}},{key:"isLive",get:function(){return this.mediaProxy.getIsLive()}},{key:"textTracks",get:function(){return this.getMediaElement().textTracks}},{key:"defaultMediaTransform",get:function(){return this.mediaProxy.applyDefaults}},{key:"pid",get:function(){return this.getPID()}},{key:"version",get:function(){return this.getVersion()}},{key:"debug",get:function(){return this.getDebug()}},{key:"language",get:function(){return this.getLanguage()},set:function(e){return this.setLanguage(e)}},{key:"mediaElement",get:function(){return this.getMediaElement()}},{key:"controls",set:function(e){return this.setControls(e)},get:function(){return this.getControls()}},{key:"container",get:function(){return this.getContainer()}},{key:"adContainer",get:function(){return this.getAdContainer()},set:function(e){return this.setAdContainer(e)}},{key:"previewTracks",get:function(){return this.getPreviewTracks()}},{key:"audioTracks",get:function(){return this.getAudioTracks()}},{key:"autoplay",set:function(e){return this.setAutoplay(e)},get:function(){return this.getAutoplay()}},{key:"preload",set:function(e){return this.setPreload(e)},get:function(){return this.getPreload()}},{key:"loop",set:function(e){return this.setLoop(e)},get:function(){return this.getLoop()}},{key:"muted",set:function(e){return this.setMuted(e)},get:function(){return this.getMuted()}},{key:"media",set:function(e){return this.setMedia(e)},get:function(){return this.getMedia()}},{key:"currentTime",set:function(e){return this.setCurrentTime(e)},get:function(){return this.getCurrentTime()}},{key:"absoluteCurrentTime",set:function(e){return this.setAbsoluteCurrentTime(e)},get:function(){return this.getAbsoluteCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"absoluteDuration",get:function(){return this.getAbsoluteDuration()}},{key:"src",set:function(e){return this.setSrc(e)},get:function(){return this.getSrc()}},{key:"volume",set:function(e){return this.setVolume(e)},get:function(){return this.getVolume()}},{key:"seeking",get:function(){return this.getSeeking()}},{key:"paused",get:function(){return this.getPaused()}},{key:"ended",get:function(){return this.getEnded()}},{key:"buffering",get:function(){return this.getBuffering()}},{key:"displayState",set:function(e){return this.setDisplayState(e)},get:function(){return this.getDisplayState()}},{key:"waiting",get:function(){return this.getWaiting()},set:function(e){return this.setWaiting(e)}},{key:"busy",get:function(){return this.getBusy()},set:function(e){return this.setBusy(e)}},{key:"error",get:function(){return this.getError()}},{key:"hidden",set:function(e){return this.setHidden(e)},get:function(){return this.getHidden()}},{key:"width",get:function(){return this.getWidth()}},{key:"height",get:function(){return this.getHeight()}},{key:"videoWidth",get:function(){return this.getVideoWidth()}},{key:"videoHeight",get:function(){return this.getVideoHeight()}},{key:"left",get:function(){return this.getLeft()}},{key:"right",get:function(){return this.getRight()}},{key:"top",get:function(){return this.getTop()}},{key:"bottom",get:function(){return this.getBottom()}},{key:"mouseX",get:function(){return this.getMouseX()}},{key:"mouseY",get:function(){return this.getMouseY()}},{key:"mouseOver",get:function(){return this.getMouseOver()}},{key:"playbackRate",set:function(e){return this.setPlaybackRate(e)},get:function(){return this.getPlaybackRate()}},{key:"cues",set:function(e){return this.setCues(e)},get:function(){return this.getCues()}},{key:"quality",set:function(e){return this.setQuality(e)},get:function(){return this.getQuality()}},{key:"qualityLevels",get:function(){return this.getQualityLevels()}},{key:"qualityMode",get:function(){return this.getQualityMode()},set:function(e){return this.setQualityMode(e)}},{key:"playState",get:function(){return this.getPlayState()}},{key:"playbackTarget",get:function(){return this.getPlaybackTarget()},set:function(e){this.setPlaybackTarget(e)}},{key:"settings",get:function(){return this.getSettings()}}],[{key:"create",value:function(e,n){return new Promise(function(i,r){try{var a=new t(e);e.amp=a,a.onready=function(e){i(e)},a.initialize(n)}catch(e){r(e)}})}}]),t}(ee),st=function(){function e(){babelHelpers.classCallCheck(this,e),this.map={}}return babelHelpers.createClass(e,[{key:"add",value:function(e,t){this.map[e]=t}},{key:"item",value:function(e){return this.map[e]}},{key:"remove",value:function(e){var t=this.map[e];return null!=t&&(this.map[e]=null,delete this.map[e]),t}}]),e}(),lt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"js",value:function(e,t){return L.loadScript(e,document.body)}},{key:"css",value:function(e,t){return new Promise(function(n,i){try{L.loadStyleSheet(e)}catch(e){i()}n(t)})}},{key:"json",value:function(e,t){return L.requestJson(t.src).then(function(e){return t.data=e,t})}},{key:"img",value:function(e,t){return L.loadImage(e)}},{key:"require",value:function(e){var t=this.item(e);return null==t?"string"==typeof e?this.add({src:e}):null!=e.src?this.add(e):Promise.resolve(e):"function"==typeof t?(st.prototype.add.call(this,e,null),Promise.resolve().then(function(){return t()})):"function"==typeof t.then?t:Promise.resolve(t)}},{key:"add",value:function(e){var n=this;if(e.enabled===!1)return Promise.resolve();var i=w.instance.enabled&&null!=e.debug?e.debug:e.src,r=e.id||e.src||i;if(e.defer===!0)return e.defer=!1,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,r,this.add.bind(this,e)),Promise.resolve();var a=this.item(r);if(null!=a){if("function"==typeof a.then)return a;if("function"!=typeof a)return Promise.resolve(a)}var o=e.type||L.getMimeType(i),s=void 0;return o===L.mimeTypes.js||/javascript/.test(o)?s=this.js(i,e):o===L.mimeTypes.css?s=this.css(i,e):o===L.mimeTypes.json||/json/.test(o)?s=this.json(i,e):o!==L.mimeTypes.swf?s=L.request(i):/image/.test(o)&&(s=this.img(i,e)),null==s?Promise.resolve():(s=s.then(function(e){return st.prototype.add.call(n,r,e),e}),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,r,s),s)}},{key:"addResources",value:function(e){var t=this;if(!e||0==e.length)return Promise.resolve();var n=[],i=[];e.forEach(function(e){e instanceof Array?n.push(t.addResources.bind(t,e)):e.async===!0?i.push(t.add(e)):n.push(t.add.bind(t,e))});var r=i.length>0?Promise.all(i):Promise.resolve();return r.then(function(){return L.chain(n)})}}]),t}(st),ut={},ct=new lt,ht=[],dt=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"VERSION",get:function(){return"AMP v9.0.9+premier"}},{key:"plugins",get:function(){return ut}},{key:"instances",get:function(){return ht}},{key:"resourceManager",get:function(){return ct}}]),babelHelpers.createClass(e,null,[{key:"create",value:function(e,t,n){var r=this,a=Date.now();null!=e.container&&(t=e,e=e.container,delete t.container);var o=L.select(e);if(null==o)return Promise.reject(i.create("Invalid container. Could not find DOM element: "+e));t=t instanceof F?t:F.create(t),w.instance=new w(t.debug);var s=this.getVersion();return null==o.dataset&&(o.dataset={}),o.dataset["amp.version"]=s,w.instance.log("[AMP] "+s),Promise.all([U.init(t),ot.create(o,t)]).then(function(e){var t=e[1],i=t.player;return i.initTime=a,i.performance.record("init",a),i.request=r.request.bind(r),i.require=r.require.bind(r),i.once(D.DESTROY,function(e){return ft.dispatchEvent(e)}),ft.dispatch(D.CREATE,i),"function"==typeof n&&n(t),i}).catch(function(e){throw i.create(e)})}},{key:"getVersion",value:function(){return this.VERSION}},{key:"registerPlugin",value:function(e,t,n){"function"==typeof t&&(n=t),this.plugins[e]=n}},{key:"getResourceManager",value:function(){return ct}},{key:"addResource",value:function(e){return this.getResourceManager().add(e)}},{key:"addResources",value:function(e){return this.getResourceManager().addResources(e)}},{key:"request",value:function(e){return L.request(e)}},{key:"requestJson",value:function(e){return L.requestJson(e)}},{key:"require",value:function(e){return this.resourceManager.require(e)}},{key:"getResource",value:function(e){return this.getResourceManager().item(e)}},{key:"removeResource",value:function(e){return this.getResourceManager().remove(e)}},{key:"evaluateBindings",value:function(e,t){return q.evaluateBindings(e,t)}},{key:"defaults",value:function(e){return L.override(F.defaults,e,!1)}},{key:"embed",value:function(t){function n(e,t){return o[e]||o[e[0]]||t}function r(e){var t=n(e);return null==t?Promise.resolve():Promise.resolve().then(function(){return/^\{[\s\S]*\}$/.test(t)?t:L.requestText(t).catch(function(n){throw i.create('Could not load resource "'+e+'" at "'+t+'"')})}).then(function(n){try{return JSON.parse(n)}catch(n){throw i.create('Could not parse resource "'+e+'". "'+t+'"')}})}function a(e){function i(e,t,n,i){if(null!=n)return L.set(e,t,null!=i?i(n):n)}return i(e,["media","src"],n("src")),i(e,["media","poster"],n("poster")),i(e,["media","startTime"],n("time"),parseFloat),i(e,["autoplay"],n("autoplay"),function(e){return/true|false/.test(e)?"true"==e:e}),i(e,["container"],"SCRIPT"!==t.nodeName?t:t.parentNode.insertBefore(document.createElement("div"),t.nextSibling)),i(e,["container","style","width"],n("width"),I.toSize),i(e,["container","style","height"],n("height"),I.toSize),e}if(null==t)return Promise.reject(i.create("Invalid DOM element"));var o=t.dataset;o.embedded=!0;var s=n("id",t.id||L.createUID());return o.id!==s&&(o.id=s),null!=e.instances[s]?Promise.reject(i.create('Player with id "'+s+'" already exists.')):(e.instances[s]=!0,Promise.all([r("defaults"),r("config"),r("media")]).then(function(n){var i=n[0];if(null==i||(e.defaults(i),"script"!=t.nodeName.toLowerCase()||1!==n.filter(function(e){return null!=e}).length)){null!=n[2]&&(n[2]={media:n[2]}),n.push(a({id:s,dataset:L.clone(o)}));var r=L.merge(n);return e.create(r)}}))}}]),e}(),ft=a.create(dt);L.mixin(dt,ft),dt.addEventListener(D.CREATE,function(e){var t=e.detail;ht.push(e.detail),null!=t.id&&(ht[t.id]=t)}),dt.addEventListener(D.DESTROY,function(e){var t=e.detail,n=ht.indexOf(t);ht.splice(n,1),null!=t.id&&delete ht[t.id]});var pt=function(){function e(t,n,i,r){babelHelpers.classCallCheck(this,e),this.id=t,this.name=n,this.logo=i,this.metadata=r}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n,i,r){return new e(t,n,i,r)}}]),e}(),yt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments[3];babelHelpers.classCallCheck(this,e),this.list=[],this.featured=n,this.footprints=r,this.metadata=a,t.forEach(function(e){return i.add(e)})}return babelHelpers.createClass(e,[{key:"add",value:function(e){return this.list.push(e),this[e.id]=e,e}},{key:"slice",value:function(e,t){return this.list.forEach(e,t)}},{key:"splice",value:function(e,t){for(var n,i=arguments.length,r=Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return(n=this.list).splice.apply(n,[e,t].concat(r))}},{key:"forEach",value:function(e){return this.list.forEach(e)}},{key:"some",value:function(e){return this.list.some(e)}},{key:"filter",value:function(e){return this.list.filter(e)}},{key:"map",value:function(e){return this.list.map(e)}},{key:"reduce",value:function(e,t){return this.list.reduce(e,t)}},{key:"includes",value:function(e){return this.list.includes(e)}},{key:"indexOf",value:function(e){return this.list.indexOf(e)}},{key:"item",value:function(e){return this.list[e]}},{key:"length",get:function(){return this.list.length}}],[{key:"create",value:function(t,n,i,r){return new e(t,n,i,r)}}]),e}(),At={VIDEO:"video",AUDIO:"audio"},vt={AUTO:"auto",MANUAL:"manual"},gt=function e(t,n,i){babelHelpers.classCallCheck(this,e),this.key=t,this.token=n,this.expiration=i},mt=function e(){babelHelpers.classCallCheck(this,e),this.src=null,this.debug=null,this.type=null,this.metadata={}},bt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.source=null,e.title=null,e.description=null,e.link=null,e.guid=null,e.pubDate=null,e.poster=null,e.thumbnail=null,e.embed=null,e.category=null,e.medium=null,e.duration=null,e.track=null,e.scenes=null,e.startTime=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"DEFAULT",get:function(){return{src:L.blankVideo(),type:L.mimeTypes.mp4,temporalType:"vod",medium:"video"}}}]),t}(mt),kt=function(e){function t(e,n,i){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.player=e,r.config=n||{},r.key=i,r.logger=new w(r.debug),Object.values(D).forEach(function(e){var t=r["on"+e];null!=t&&"function"==typeof t&&(t=r["on"+e]=t.bind(r),r.player.addEventListener(e,t))}),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"destroy",value:function(){var e=this;Object.values(D).forEach(function(t){var n=e["on"+t];null!=n&&"function"==typeof n&&e.player.removeEventListener(t,n)}),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.player=null,this.config=null,this.key=null}},{key:"bindHandlers",value:function(e){var t=this;e instanceof Array==0&&(e=[e]),e.forEach(function(e){t[e]=t[e].bind(t)})}},{key:"debug",get:function(){return null!=this.config.debug?this.config.debug:this.player.config.debug}},{key:"data",get:function(){return this.player.evaluateBindings(this.config)}}],[{key:"createFactory",value:function(e){return function(e,t,n){var i=this;return new Promise(function(r,a){try{var o=new i(e,t,n);r(o)}catch(e){a(e)}})}.bind(e)}},{key:"createPureMVCFactory",value:function(e){return function(t,n,i){return new Promise(function(i,r){try{var a=new e;a.parentModule=t,a.player=t,a.config=n,t.registerModule(a),i(a)}catch(e){r(e)}})}}}]),t}(a),Et=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.feature="ads",i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e){var n=e.type;"timeupdate"!=n&&"timeremaining"!=n&&this.player.logger.log("[AMP AD EVENT] "+n,e),"function"==typeof this.player.sendNotification&&this.player.sendNotification("ads"+n,e.detail),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e),this.player.dispatch("ad"+n,e.detail)}}]),t}(kt),_t=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.feature="auth",i.provider=null,i.providers=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e),Object.values(se).includes(e.type)&&this.player.dispatchEvent(e)}}]),t}(kt),Tt=function(){function e(t,n,i,r,a,o,s,l,u,c,h,d,f){babelHelpers.classCallCheck(this,e),this.id=t,this.title=n,this.duration=i,this.position=r,this.type=a,this.partner=o,this.advertiser=s,this.companions=l,this.request=u,this.metadata=c,this.totalAds=h,this.time=d,this.clickThrough=f}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n,i,r,a,o,s,l,u,c,h,d,f){return new e(t,n,i,r,a,o,s,l,u,c,h,d,f)}}]),e}(),Ct=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.plugin=null,n.proxy=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.proxy=this.facade.retrieveProxy(Q.NAME),this.plugin=this.facade}},{key:"dispatchEvent",value:function(e,t){"string"!=typeof e&&(t=e.getBody(),null==t&&(t={}),e=e.getName()),this.player.sendNotification(J.DISPATCH_EVENT,r.create(e,t));var n=this.plugin.feature;null!=n&&"auth"!==n&&(e=e.replace(new RegExp("^("+n+")"),"")),n=this.plugin.getModuleName(),e=e.replace(new RegExp("^("+n+")"),"");var i=r.create(e,t);return this.sendNotification(J.DISPATCH_EVENT,i),i}}]),t}(Ye),Nt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.STARTED,J.ENDED]}},{key:"started",value:function(){this.proxy.contentStarted()}},{key:"ended",value:function(){this.proxy.contentEnded()}}],[{key:"NAME",get:function(){return"AdContentController"}}]),t}(Ct),Pt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.START,J.PLAY,J.PAUSE,J.TOGGLE_PLAY_PAUSE,J.VOLUME_CHANGE,J.PLAY_STATE_CHANGE]}},{key:"start",value:function(){this.sendNotification(J.REQUEST_PLAY),this.playback.initialized===!1&&this.player.sendNotification(J.INITIALIZED),this.proxy.start()}},{key:"play",value:function(){if(this.applicationState.getLocked()!==!0){if(this.sendNotification(J.REQUEST_PLAY),this.proxy.getStarted()===!1)return void this.sendNotification(J.START,!0);this.proxy.play(),this.player.sendNotification(J.CHANGE_PLAY_STATE,re.PLAYING)}}},{key:"pause",value:function(){var e=this,t=this.proxy.adVO.time,n=this.proxy.adVO.duration;if("undefined"===t||!t||t===n){var i={transform:function(t){if(t===J.PLAYING)return e.player.timers.setTimeout(function(){return e.player.removeTransform($.PLAY_STATE,i),e.player.sendNotification(J.PAUSE)},300),t},priority:2};return void this.player.addTransform($.PLAY_STATE,i)}this.proxy.pause(),this.player.sendNotification(J.CHANGE_PLAY_STATE,re.PAUSED)}},{key:"toggleplaypause",value:function(){var e=this.proxy.getPaused()||this.proxy.getStarted()===!1?J.PLAY:J.PAUSE;this.sendNotification(e,!0)}},{key:"volumechange",value:function(e){this.proxy.setVolume(e)}},{key:"playstatechange",value:function(e){"playing"===e.value&&this.sendNotification(je.AD_PLAYING,this.proxy.adVO)}}],[{key:"NAME",get:function(){return"AdCoreController"}}]),t}(Ct),St=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pods=[],n.content=new Nt,n.ads=new Pt,n.processAdBreak=n.processAdBreak.bind(n),n.processAdRequest=n.processAdRequest.bind(n),n.inProgress=!1,n.paused=!1,n.started=!1,n.adVO=null,n.contextName="ad",n.container=null,n.partner=null,n.pods=null,n.mediaChanging=!1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createDefaultAdVO",value:function(){return new Tt(null,null,null,null,null,this.partner,null,null,null,null,null)}},{key:"getContainer",value:function(){return this.facade.player.adContainer||this.facade.player.container}},{key:"setCompanions",value:function(e){return this.adVO.companions=e,this.sendNotification(je.AD_COMPANION,this.adVO),e}},{key:"getCompanions",value:function(){var e;return null!=(e=this.adVO)?e.companions:void 0}},{key:"getInProgress",value:function(){return this.inProgress}},{key:"setInProgress",value:function(e){return this.inProgress=e,e}},{key:"getStarted",value:function(){return this.started}},{key:"setStarted",value:function(e){return this.started=e,e}},{key:"getPaused",value:function(){return this.paused}},{key:"setPaused",value:function(e){return this.paused=e,e}},{key:"setCues",value:function(e){var t=T.transform(e,T.map(function(e){return{startTime:e,endTime:e}}));return this.facade.player.mediaProxy.setCues(t),e}},{key:"play",value:function(){this.setPaused(!1),this.sendNotification(je.AD_PLAY,this.adVO)}},{key:"pause",value:function(){this.setPaused(!0),this.sendNotification(je.AD_PAUSE,this.adVO)}},{key:"breakStart",value:function(){this.setInProgress(!0)}},{key:"breakEnd",value:function(){this.setInProgress(!1),this.reset()}},{key:"error",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=("function"==typeof e.getMessage?e.getMessage():void 0)||e.message;this.facade.logger.error("[AMP AD ERROR]",n+" Skipping ad content.",e),null==this.adVO&&(this.adVO={}),this.adVO.error=e,this.sendNotification(je.AD_ERROR,this.adVO),t===!0&&this.endBreak()}},{key:"engage",value:function(e){this.getEnabled()!==!1&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.player.sendNotification(J.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())}},{key:"engageAds",value:function(){this.engaged!==!0&&(this.engaged=!0,this.core=this.facade.player.removeMediator(Fe.NAME),this.facade.removeMediator(Nt.NAME),this.facade.registerMediator(this.ads))}},{key:"reset",value:function(){this.engaged=!1,this.facade.removeMediator(Pt.NAME),this.facade.player.registerMediator(this.core),this.facade.registerMediator(this.content)}},{key:"processAdRequest",value:function(e){var t=this;return this.facade.player.transform($.AD_REQUEST,e).then(function(e){return t.facade.transform($.AD_REQUEST,e)})}},{key:"processAdBreak",value:function(e){var t=this;return this.facade.player.transform($.AD_BREAK,e).then(function(e){return t.facade.transform($.AD_BREAK,e)})}},{key:"requestAd",value:function(){this.sendNotification(je.REQUEST,this.adVO)}},{key:"getPodById",value:function(e){return this.pods.find(function(t){return t.id===e})}},{key:"setPodLocks",value:function(e){var t=this;e.forEach(function(e){var n=t.getPodById(e.id);null!=n&&(n.locked=e.locked)})}},{key:"resize",value:function(e){}},{key:"startBreak",value:function(e){return null!=e&&(this.adVO=e),this.setStarted(!0),this.sendNotification(je.BREAK_START,this.adVO),this.getEnabled()!==!1||(this.endBreak(),!1)}},{key:"endBreak",value:function(){this.sendNotification(je.BREAK_END,this.adVO)}},{key:"start",value:function(){this.mediaChanging=!1,this.startBreak()}},{key:"contentPlay",value:function(){this.facade.player.sendNotification(J.PLAY,!0)}},{key:"contentPause",value:function(){var e=this.facade.player.mediaElement;e.seeking===!0?e.once("seeked",function(){e.pause()}):e.pause()}},{key:"contentStarted",value:function(){}},{key:"contentSeek",value:function(e){}},{key:"contentEnded",value:function(){}},{key:"setVolume",value:function(e){}},{key:"getVolume",value:function(){}},{key:"terminateAd",value:function(){}},{key:"terminateAllAds",value:function(){}}],[{key:"NAME",get:function(){return Ze.NAME}}]),t}(Ze),Ot=function(){function e(t,n,i,r){var a=this;babelHelpers.classCallCheck(this,e),this.request=t,this.partner=n,this.config=i,T.each(r,function(e,t){return a[t]=e})}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n,i,r){return new e(t,n,i,r)}}]),e}(),Mt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.MEDIA_CHANGE,je.BREAK_START,je.BREAK_END,J.SEEKED,je.AD_CONTAINER_CREATED,J.REPLAY]}},{key:"mediachange",value:function(e){this.proxy.getEnabled()!==!1&&(this.proxy.mediaChanging=!0,this.proxy.engage(e))}},{key:"seeked",value:function(e){this.proxy.contentSeek(e)}},{key:"replay",value:function(){"function"==typeof this.proxy.replay&&this.player.getAutoplay()===!1&&this.proxy.replay()}},{key:"adscontainercreated",value:function(e){this.proxy.container=e}},{key:"adsbreakstart",value:function(){this.proxy.breakStart()}},{key:"adsbreakend",value:function(e){var t;this.proxy.breakEnd(),"ima"===(null!=e?e.partner:void 0)&&(t=this.applicationState.getPlaybackRate(),this.facade.player.setPlaybackRate(t)),this.applicationState.getEnded()&&this.applicationState.getHasPostContent()===!0&&this.sendNotification(J.MEDIA_SEQUENCE_ENDED)}}],[{key:"NAME",get:function(){return"AdController"}}]),t}(Ct),Rt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return Object.values(je)}},{key:"handleNotification",value:function(e){this.dispatchEvent(e.getName(),e.getBody())}},{key:"dispatchEvent",value:function(e,t){e=e.replace(/^(ads)/,""),this.sendNotification(J.DISPATCH_EVENT,r.create(e,t)),this.facade.player.sendNotification(J.DISPATCH_EVENT,r.create("ad"+e,t))}}],[{key:"NAME",get:function(){return"AdEventController"}}]),t}(Ct),Ht=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.feature="ads",e.container=null,Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled,enumerable:!0,configurable:!1},inProgress:{get:e.getInProgress,enumerable:!0,configurable:!1},started:{get:e.getStarted,enumerable:!0,configurable:!1},paused:{get:e.getPaused,enumerable:!0,configurable:!1},companions:{get:e.getCompanions,enumerable:!0,configurable:!1},currentAd:{get:e.getCurrentAd,enumerable:!0,configurable:!1}}),e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createModel",value:function(){this.proxy=this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy(),this.registerProxy(this.proxy)}},{key:"createController",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createController",this).call(this),this.registerMediator(new Mt),this.registerMediator(new Rt)}},{key:"isFullscreenDevice",value:function(){return L.isFullscreenDevice()}},{key:"createProxy",value:function(){}},{key:"createFullscreenProxy",value:function(){}},{key:"listNotificationInterests",value:function(){return[J.MEDIA_CHANGE,J.REPLAY,J.PLAY,J.PAUSE,J.PAUSED,J.START,J.STARTED,J.ENDED,J.READY,J.VOLUME_CHANGE,J.FULL_SCREEN_CHANGE,J.CHANGE_ACTIVE_STATE,J.PLAY_STATE_CHANGE,J.SEEKED,J.TOGGLE_PLAY_PAUSE]}},{key:"listNotificationPublications",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationPublications",this).call(this).concat(Object.values(je)).concat([J.REQUEST_PLAY,J.DISPLAY_TIME,J.DISABLE_FULL_SCREEN,J.ENABLE_VIDEO_EVENTS,J.DISABLE_VIDEO_EVENTS,J.HAS_POST_CONTENT,J.MEDIA_SEQUENCE_ENDED,J.CHANGE_PLAY_STATE,J.AUTOPLAY_BLOCKED])}},{key:"setEnabled",value:function(e){this.proxy.setEnabled(e)}},{key:"getEnabled",value:function(){return this.proxy.getEnabled()}},{key:"getInProgress",value:function(){return this.proxy.getInProgress()}},{key:"getStarted",value:function(){return this.proxy.getStarted()}},{key:"getPaused",value:function(){return this.proxy.getPaused()}},{key:"getCompanions",value:function(){return this.proxy.getCompanions()}},{key:"getCurrentAd",value:function(){return this.proxy.adVO}},{key:"setPodLocks",value:function(e){this.proxy.setPodLocks(e)}},{key:"resize",value:function(e){this.proxy.resize(e)}},{key:"terminateAd",value:function(){this.proxy.terminateAd()}},{key:"terminateAllAds",value:function(){this.proxy.terminateAllAds()}},{key:"requestAd",value:function(){this.proxy.start(!1)}}],[{key:"NAME",get:function(){return"AdPlugin"}}]),t}(Xe),Lt={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningenabled",TRACKS_LOADED:"captioningtracksloaded",TRACK_SELECTED:"captioningtrackselected",CHANGE_CUE:"captioningchangecue",CUE_CHANGE:"captioningcuechange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},It=function(e){function t(e){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.plugin=this.facade.retrieveProxy(Q.NAME),this.media=this.facade.player.retrieveProxy(_e.NAME)}},{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.facade.viewComponent=this.viewComponent}}]),t}(Ve),wt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"captioning"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.captioningStyle=this.create(null,this.viewComponent,"style"),this.captioningStyle.type="text/css",this.applyStyles()}},{key:"listNotificationInterests",value:function(){return[Lt.VISIBILITY_CHANGE,Lt.ENABLED,Lt.TRACK_SELECTED,J.SETTINGS_CHANGE]}},{key:"onRemove",value:function(){this.captioningStyle&&this.viewComponent.removeChild(this.captioningStyle)}},{key:"handleNotification",value:function(e){var t=e.getBody(),n=t?J.ADD_APPLICATION_STATE:J.REMOVE_APPLICATION_STATE,i=void 0;switch(e.getName()){case Lt.TRACK_SELECTED:i="cc-embedded",n="embedded"===t.type?J.ADD_APPLICATION_STATE:J.REMOVE_APPLICATION_STATE;break;case Lt.VISIBILITY_CHANGE:i="cc-active";break;case Lt.ENABLED:n=t?J.ADD_CONTROL_STATE:J.REMOVE_CONTROL_STATE,i="cc-enabled",t||this.sendNotification(J.REMOVE_APPLICATION_STATE,"cc-active");break;case J.SETTINGS_CHANGE:null!=t.captions&&this.applyStyles()}null!=i&&this.sendNotification(n,i)}},{key:"applyStyles",value:function(){var e=this.facade.settings,t=this.facade.settings.styles,n=I.toCSS(t.window,!0,"\n"),i=I.toCSS(t.text,!0,"\n"),r="#"+this.facade.player.viewComponent.id;null!=e.visible&&(this.facade.hidden=!e.visible);var a=r+" .amp-caption {"+n+"}\n"+(r+" .amp-caption p, "+r+" .amp-caption span {"+i+"}\n");a+=L.isChrome()?r+" video::cue {"+i+n+"}\n":r+" video::-webkit-media-text-track-display-backdrop {"+n+"}\n"+(r+" video::cue {"+i+"}\n")+(r+" video::-webkit-media-text-track-display span {"+i+"}"),this.captioningStyle.innerHTML=a}}]),t}(It),Dt={AUTO:"auto",HTML:"html",NATIVE:"native"},xt=/subtitles|captions|descriptions/i,Gt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.providers={},n.tracks=[],n.rendererMap=[],n.track={},n.defaults={renderer:Dt.AUTO,crossorigin:null},n.enabled=!1,n.hidden=!0,n.captions=null,n.loaded=!0,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){this.renderer=this.getValue("renderer")||Dt.AUTO}},{key:"getCrossOrigin",value:function(){return this.getValue("crossorigin")}},{key:"getTracks",value:function(){return this.tracks}},{key:"setTracks",value:function(e){var t=this;if(this.tracks=[],this.track=null,e=this.facade.player.evaluateBindings(e),null!=e){var n=e.length,i=0,r=function(){i++,i===n&&(t.sendNotification(Lt.TRACKS_LOADED,t.tracks),
t.autoSelectTrack())};return e.forEach(function(e){if(xt.test(e.kind)){var n=Le.create(e,r);n.once("error",function(e){return t.facade.dispatch(D.TRACK_ERROR,e.data)}),t.tracks.push(n)}}),e}}},{key:"registerRenderer",value:function(e){null!=e&&(e.proxy=this,this.rendererMap.push(e))}},{key:"retrieveRenderer",value:function(e){return this.rendererMap.find(function(t){return t.getRendererName()===e})}},{key:"removeRenderer",value:function(e){var t=this.retrieveRenderer(e);if(t.proxy=null,null==t)return null;var n=this.rendererMap.indexOf(t);return this.rendererMap.splice(n,1),t}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setRenderer",value:function(e){return e===this.renderer?e:(this.renderer=e,this.selectRenderer(this.facade.player.media),e)}},{key:"getCurrentRenderer",value:function(){var e=this.facade.retrieveMediator(t.TEXT_TRACK_RENDERER);return e&&e.getRendererName()}},{key:"selectRenderer",value:function(e){var n=e.track;if(null!=n){var i=this.renderer;if(this.rendererMap.map(function(e){return e.getRendererName()}).includes(i)||(i=Dt.AUTO),"auto"===i&&(i=T.find(this.rendererMap,T.filter(function(e){return n.some(function(t){return e.canUseResource(t)})}),T.map(function(e){return e.getRendererName()}))),this.getCurrentRenderer()!==i){this.facade.removeMediator(t.TEXT_TRACK_RENDERER);var r=this.retrieveRenderer(i);null!=r&&this.facade.registerMediator(r)}}}},{key:"getTrack",value:function(){return this.track}},{key:"setTrack",value:function(e){return this.track=e,this.captions=this.track.cues,this.sendNotification(J.CHANGE_SETTINGS,{captions:{track:this.track.flatten()}}),this.sendNotification(Lt.TRACK_SELECTED,this.track),e}},{key:"selectTrackByIndex",value:function(e){var t=null;return e>=0&&e<this.tracks.length&&(t=this.tracks[e],this.setTrack(t)),t}},{key:"selectTrackByLanguage",value:function(e){var t=this.tracks.find(function(t){return t.language===e});return null!=t&&this.setTrack(t),t}},{key:"getHidden",value:function(){return this.hidden}},{key:"setHidden",value:function(e){return this.hidden=e,e}},{key:"getEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){return this.enabled=e,e}},{key:"autoSelectTrack",value:function(){var e=null,t=this.facade.player.retrieveProxy(Ae.NAME).getLanguage();return null!=t&&(t=t.split("-").shift(),e=this.selectTrackByLanguage(t)),null==e&&(e=this.tracks[0],this.setTrack(e)),e}},{key:"getTextTracks",value:function(){return Array.from(this.facade.player.getMediaElement().textTracks)}},{key:"getTextTrack",value:function(){var e=this.getTrack();if(e){var t=e.kind,n=e.language,i=this.getTextTracks().filter(function(e){return xt.test(e.kind)&&(e.language===n||!e.language.length)}).sort(function(e,i){var r=0;return e.kind===t&&i.kind!==t&&r++,e.kind!==t&&i.kind===t&&r--,e.language===n&&i.language!==n&&r++,e.language!==n&&i.language===n&&r--,r});return i[i.length-1]}}}],[{key:"NAME",get:function(){return Q.NAME}},{key:"TEXT_TRACK_RENDERER",get:function(){return"caption-text"}}]),t}(Ze),Ut=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME,null,e));return n.proxy=null,n.handleInline=n.handleInline.bind(n),n.inlineTypes=[L.mimeTypes.vtt,L.mimeTypes.cea608,L.mimeTypes.cea708],n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getRendererName",value:function(){return"html"}},{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.proxy=this.facade.retrieveProxy(Gt.NAME);var e=this.proxy.getTrack();if(null!=e){var n=e.activeCues;n.length>0&&this.render(n),this.initInline()}}},{key:"onRemove",value:function(){this.clear()}},{key:"canUseResource",value:function(e){if(null==e)return!1;var t=[L.mimeTypes.srt,L.mimeTypes.ttml].concat(this.inlineTypes);return t.includes(e.type)}},{key:"initInline",value:function(){var e=this.proxy.getTextTrack(),t=this.proxy.track;t&&e&&this.inlineTypes.includes(t.type)&&(this.proxy.getTextTracks().forEach(function(e){return e.mode="hidden"}),e.addEventListener("cuechange",this.handleInline,!0),this.handleInline({target:e}))}},{key:"handleInline",value:function(e){var t=this.convertCues(e.target.activeCues);this.sendNotification(Lt.CHANGE_CUE,t)}},{key:"convertCues",value:function(e){return Array.from(e,function(e){var t=e.text;if(!/^\{\".*}$/.test(t))return e.html=Me.createHTML(t),e}).filter(function(e){return!!e})}},{key:"getCaptionDisplayHeight",value:function(){for(var e=0,t=length=this.viewComponent.childNodes.length;--t&&(3!==length||0!==t);)e+=L.getActualSize(this.viewComponent.childNodes[t]).height;return e+"px"}},{key:"scrollCaptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewComponent.scrollHeight,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.viewComponent.scrollTop,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=(e-n)/i,a=this.viewComponent,o=function i(){if(n<e)return a.scrollTop=n+=r,t.facade.player.timers.setTimeout(i,20);for(var o=[];a.childNodes.length>2;)o.push(a.removeChild(a.firstChild));return o};o()}},{key:"computeStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e=parseInt(e),isNaN(e)?t:e},r=function(e){return e+"%"},a={position:"absolute",overflow:"visible",minWidth:"min-content"},o=e.align||"middle",s=i(e.position,"auto"),l=i(e.size),u=i(e.line,"auto"),c="auto"==s;switch(o){case"left":case"start":a.textAlign="start",c&&(s=0);break;case"middle":case"center":a.textAlign="center",c&&(s=(100-l)/2);break;case"right":case"end":a.textAlign="end",c&&(s=100)}return a.left=r(s),c||100!==l||(l-=s),a.width=r(l),u<0||u>100?u=100:"auto"===u&&(u=100-t),e.snapToLines===!0?a.top=u*(n.height+1)+"px":a.top=r(u),e.visible===!1&&(a.visibility="hidden"),a}},{key:"adjustCaptions",value:function(){var e=this,t=this.viewComponent.getBoundingClientRect();this.elements.forEach(function(n){return e.adjustCaption(n,t)})}},{key:"adjustCaption",value:function(e,t){var n=e.getBoundingClientRect(),i=e.style;n.bottom>t.bottom&&(i.top="auto",i.bottom="0%"),n.right>t.right&&(i.left="auto",i.right="0%")}},{key:"listNotificationInterests",value:function(){return[Lt.CUE_CHANGE,J.CHANGE_MEDIA,J.LOADED_METADATA,J.CAN_PLAY_THROUGH]}},{key:"handleNotification",value:function(e){var t=e.getName(),n=e.getBody();this.viewComponent;switch(t){case J.CHANGE_MEDIA:this.clear();break;case Lt.CUE_CHANGE:this.render(n);break;case J.LOADED_METADATA:case J.CAN_PLAY_THROUGH:this.initInline()}}},{key:"clear",value:function(){this.viewComponent.innerHTML="",this.elements=null}},{key:"createCaption",value:function(e,t,n){return this.viewComponent.appendChild(ye.createElement({class:"amp-caption-area",style:this.computeStyles(e,t,n),children:[{class:"amp-caption",innerHTML:e.html}]}))}},{key:"getLineBounds",value:function(){var e=this.createCaption({html:"CUE",visible:!1},0),t=e.getBoundingClientRect();return this.viewComponent.removeChild(e),t}},{key:"processCues",value:function(e){for(var t=e.slice(),n=e.length,i=0,r="";i<n;){var a=t[i],o=a.line;("auto"==o||o>=100||o<0)&&(o=100),100==o?(t.splice(i,1),n--,r+=a.text+"\n"):++i}return r.length>0&&t.push({text:r,html:Me.createHTML(r),line:100}),t}},{key:"render",value:function(e){var t=this,n=this.viewComponent,i=this.facade.player.settings.captions||{};switch(i.scroll=i.scroll.toLowerCase().replace("-",""),"painton"===i.scroll?this.classList.add("captioning-typed"):this.classList.remove("captioning-typed"),i.scroll){case"popout":this.clear();var r=e.length-1,a=this.getLineBounds();this.elements=T.transform(this.processCues(e),T.map(function(e){return t.createCaption(e,r--,a)})),this.adjustCaptions();break;case"rollon":case"painton":var o=e.reduce(function(t,n){return t+(n.html||e.text)}),s=document.createElement("div");s.innerHTML=o,Array.from(s.children).forEach(function(e){n.children.length&&new RegExp(e.innerText).test(n.lastChild.innerText)||n.appendChild(e)}),n.style.maxHeight=this.getCaptionDisplayHeight(),this.scrollCaptions()}}}],[{key:"NAME",get:function(){return Gt.TEXT_TRACK_RENDERER}}]),t}(me),jt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME,e));return n.proxy=null,n.track=null,n.handleInline=n.handleInline.bind(n),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getRendererName",value:function(){return"native"}},{key:"canUseResource",value:function(e){if(null==e)return!1;var t=null!=document.createElement("video").textTracks;if(!t)return!1;var n=[L.mimeTypes.vtt,L.mimeTypes.cea608,L.mimeTypes.cea708],i=/iphone|ipad/.test(L.getDevice());return!!i&&n.indexOf(e.type)!==-1}},{key:"onRegister",value:function(){this.proxy=this.facade.retrieveProxy(Gt.NAME),this.loadTracks(),this.updateTrack()}},{key:"onRemove",value:function(){this.unloadTracks()}},{key:"listNotificationInterests",value:function(){return[Lt.VISIBILITY_CHANGE,Lt.TRACK_SELECTED,J.LOADED_METADATA,J.CAN_PLAY_THROUGH]}},{key:"handleNotification",value:function(e){e.getBody();switch(e.getName()){case Lt.TRACK_SELECTED:case Lt.VISIBILITY_CHANGE:case J.CAN_PLAY_THROUGH:this.updateTrack();break;case J.LOADED_METADATA:this.loadTracks()}}},{key:"unloadTracks",value:function(){this.proxy.getTextTracks().forEach(function(e){return e.mode="hidden"});var e=this.facade.player.getMediaElement(),t=Array.from(e.children);t.forEach(function(t){return e.removeChild(t)})}},{key:"loadTracks",value:function(){this.unloadTracks();var e=this.proxy.getTracks();if(null!=e){var t=this.facade.player.getMediaElement(),n=this.proxy.getCrossOrigin();null!=n&&t.setAttribute("crossorigin",n),e.forEach(function(e){if(e.type===L.mimeTypes.vtt){var n=document.createElement("track");n.src=e.src,null!=e.kind&&(n.kind=e.kind),null!=e.language&&(n.srclang=e.language),null!=e.label&&(n.label=e.label),n.default="default"in e,t.appendChild(n)}})}}},{key:"updateTrack",value:function(){null!=this.track&&(this.track.mode="hidden");var e=this.proxy.getTextTrack();e&&(this.track=e,this.proxy.getHidden()?(this.track.removeEventListener("cuechange",this.handleInline,!0),this.track.mode="hidden"):(this.track.addEventListener("cuechange",this.handleInline,!0),this.track.mode="showing"))}},{key:"handleInline",value:function(e){this.sendNotification(Lt.CHANGE_CUE,Array.from(e.target.activeCues))}}],[{key:"NAME",get:function(){return Gt.TEXT_TRACK_RENDERER}}]),t}(ge),Vt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME));e.captions=[],e.head=document.getElementsByTagName("head")[0];var n=window.com||{};return n.akamai=n.akamai||{},n.akamai.amp=n.akamai.amp||{},n.akamai.amp.plugins=n.akamai.amp.plugins||{},n.akamai.amp.plugins.subply=n.akamai.amp.plugins.subply||{},n.akamai.amp.plugins.subply.response=function(t){e.parse(t),e.poll()},null==window.com&&(window.com=n),e.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1e3},e.caption=null,e.head=null,e.script=null,e.timeout=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getURL",value:function(){return this.data.url}},{key:"setURL",value:function(e){return this.data.url=e,e}},{key:"start",value:function(){this.send()}},{key:"poll",value:function(){var e,t=this;e=this.facade.player.timers.setTimeout(function(){t.send()},this.data.interval||1e3)}},{key:"send",value:function(){var e=this;null!=this.script&&this.head.removeChild(this.script),this.script=L.loadScript(this.data.base+this.data.url+".js?nocache="+Date.now()).then(function(t){return e.script=t}).catch(function(t){return e.facade.logger.error("[AMP CAPTIONING ERROR]",t)})}},{key:"stop",value:function(){clearTimeout(timeout)}},{key:"parse",value:function(e){if(e.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=e.Ticks))return this.caption=new Ne(L.flattenTimecode(e.From),L.flattenTimecode(e.To),e.Ticks),this.caption.text=e.Text,html="",T.each(e.Text.split("\n"),function(e){""!==html&&(html+="<br />"),html+="<span>"+e+"</span>"}),this.caption.html="<p>"+html+"</p>",this.sendNotification(Lt.CUE_CHANGE,[this.caption]),this.caption}}]),t}(puremvc.Proxy);Vt.NAME="LiveCaptionProxy";var Bt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.CHANGE_MEDIA,J.STARTED,J.TIME_UPDATE,Lt.VISIBILITY_CHANGE,Lt.ENABLED,Lt.CHANGE_CUE,Lt.TRACK_SELECTED,Lt.TRACKS_LOADED,Lt.CUE_CHANGE]}},{key:"changemedia",value:function(e){return this.proxy.setTracks(e.track),0===this.proxy.getTracks().length?void this.sendNotification(Lt.ENABLED,!1):(this.proxy.selectRenderer(e),void this.sendNotification(Lt.ENABLED,!0))}},{key:"started",value:function(){var e=this.proxy,t=e.getTrack();null==t&&e.getTracks().length>0&&(t=e.autoSelectTrack()),null!=t&&t.isLive===!0&&(e=this.facade.retrieveProxy(Vt.NAME),null==e&&(e=new Vt,this.facade.registerProxy(e)),e.setURL(t.src),e.start())}},{key:"timeupdate",value:function(e){var t=this.proxy.getTrack();if(null!=t&&t.isLive!==!0){var n=t.activeCues,i=!1;t.cues.forEach(function(t){if(null!=t){var r=n.indexOf(t);i=!0,e>=t.startTime&&e<t.endTime?r===-1&&n.push(t):r!==-1&&n.splice(r,1)}}),i===!0&&this.sendNotification(Lt.CHANGE_CUE,n)}}},{key:"captioningvisibilitychange",value:function(e,t){var n=!e;n!==this.proxy.getHidden()&&(this.proxy.setHidden(n),this.dispatchEvent(t))}},{key:"captioningenabled",value:function(e,t){this.proxy.setEnabled(e),this.dispatchEvent(t)}},{key:"captioningchangecue",value:function(e){var t=this;this.player.transform($.CUE_CHANGE,e).then(function(e){null!=e&&t.sendNotification(Lt.CUE_CHANGE,e)}).catch(function(n){t.sendNotification(Lt.CUE_CHANGE,e)})}},{key:"captioningtrackselected",value:function(e,t){this.dispatchEvent(t)}},{key:"captioningtracksloaded",value:function(e,t){this.dispatchEvent(t)}},{key:"captioningcuechange",value:function(e,t){this.dispatchEvent(t)}}],[{key:"NAME",get:function(){return"CaptioningController"}}]),t}(Ct),Yt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.applicationState=null,e.media=null,e.player=null,e.playback=null,e.config=null,e.logger=null,e.bindings=null,e.params=null,e.playerCore=null,e.security=null,e.tracks=null,e.plugin=null,e.proxy=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.player=this.facade.player||this.facade,this.applicationState=this.player.appState,this.media=this.player.mediaProxy,this.config=this.player.configuration,this.logger=this.player.logger,this.bindings=this.player.bindings,this.params=this.player.params,this.playerCore=this.player.playerCore,this.security=this.player.security,this.tracks=this.player.tracks,this.playback=this.player.playerCore.getActivePlaybackCore()||this.player.playback,this.localization=this.player.localization,this.proxy=this.facade.retrieveProxy(Q.NAME),this.plugin=this.facade}},{key:"doAfter",value:function(e){var t=this;return new Promise(function(n,i){var r=function(){try{e(),n()}catch(e){t.facade.logger.error(e),i(e)}};return t.player.timers.setImmediate(r)})}}]),t}(puremvc.SimpleCommand),Ft=(function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e,t){"string"!=typeof e&&(t=e.getBody(),null==t&&(t={}),e=e.getName()),this.player.sendNotification(J.DISPATCH_EVENT,r.create(e,t));var n=this.plugin.feature;null!=n&&"auth"!==n&&(e=e.replace(new RegExp("^("+n+")"),"")),n=this.plugin.getModuleName(),e=e.replace(new RegExp("^("+n+")"),"");var i=r.create(e,t);return this.sendNotification(J.DISPATCH_EVENT,i),i}},{key:"dispatchEventAfterCommand",value:function(e,t){this.player.timers.setImmediate(this.dispatchEvent.bind(this,e,t))}},{key:"execute",value:function(e){this.dispatchEvent(e)}}]),t}(Yt),function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.feature="captioning",e.moduleName="captioning",e.mediatorname="",e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createController",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createController",this).call(this),this.registerMediator(new Bt)}},{key:"createModel",value:function(){this.proxy=new Gt(this.config),this.registerProxy(this.proxy)}},{key:"createView",value:function(){var e=new wt;this.registerMediator(e),this.mediatorname=e.getMediatorName();var t=e.viewComponent;this.proxy.registerRenderer(new jt(t)),this.proxy.registerRenderer(new Ut(t))}},{key:"destroy",value:function(){for(;this.proxy.rendererMap.length>=1;){var e=this.proxy.rendererMap[0],t=e.getMediatorName();this.removeMediator(t),this.proxy.removeRenderer(e.getRendererName())}this.removeMediator(this.mediatorname)}},{key:"listNotificationInterests",value:function(){return[J.LOADED_METADATA,J.CAN_PLAY_THROUGH,J.CHANGE_MEDIA,J.STARTED,J.TIME_UPDATE,J.SETTINGS_CHANGE,Lt.TRACK_SELECTED]}},{key:"listNotificationPublications",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationPublications",this).call(this).concat([Lt.CUE_CHANGE,J.ADD_CONTROL_STATE,J.REMOVE_CONTROL_STATE,J.CHANGE_SETTINGS,Lt.VISIBILITY_CHANGE,Lt.SETTINGS_CHANGE])}},{key:"getEnabled",value:function(){return this.proxy.getEnabled()}},{key:"setEnabled",value:function(e){return this.sendNotification(Lt.ENABLED,e),e}},{key:"getHidden",value:function(){return this.proxy.getHidden()}},{key:"setHidden",value:function(e){return this.setVisible(!e),e}},{key:"getVisible",value:function(){return!this.proxy.getHidden()}},{key:"setVisible",value:function(e){return this.sendNotification(J.CHANGE_SETTINGS,{captions:{visible:e}}),this.sendNotification(Lt.VISIBILITY_CHANGE,e),e}},{key:"getTracks",value:function(){return this.proxy.getTracks()}},{key:"getTrack",value:function(){return this.proxy.getTrack()}},{key:"setTrack",value:function(e){return this.proxy.setTrack(e),e}},{key:"selectTrackByIndex",value:function(e){return this.proxy.selectTrackByIndex(e)}},{key:"selectTrackByLanguage",value:function(e){return this.proxy.selectTrackByLanguage(e)}},{key:"changeSettings",value:function(e){return this.sendNotification(J.CHANGE_SETTINGS,{captions:e}),this.sendNotification(Lt.SETTINGS_CHANGE,e),e}},{key:"getSettings",value:function(){return this.player.settings.captions}},{key:"getRenderer",value:function(){return this.proxy.getRenderer()}},{key:"setRenderer",value:function(e){return this.proxy.setRenderer(e)}},{key:"getCurrentRenderer",value:function(){return this.proxy.getCurrentRenderer()}},{key:"enabled",get:function(){return this.getEnabled()},set:function(e){return this.setEnabled(e)}},{key:"hidden",get:function(){return this.getHidden()},set:function(e){return this.setHidden(e)}},{key:"visible",get:function(){return this.getVisible()},set:function(e){return this.setVisible(e)}},{key:"tracks",get:function(){return this.getTracks()}},{key:"track",get:function(){return this.getTrack()},set:function(e){return this.setTrack(e)}},{key:"settings",get:function(){return this.getSettings()}},{key:"renderer",get:function(){return this.getRenderer()},set:function(e){return this.setRenderer(e)}},{key:"currentRenderer",get:function(){return this.getCurrentRenderer()}}]),t}(Xe)),zt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperties(n,{instance:{get:n.getInstance,enumerable:!0,configurable:!1}}),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getPlaybackProxy",value:function(){return this.proxy.playbackProxy}},{key:"getInstance",value:function(){return this.getPlaybackProxy().player}}]),t}(Xe),Kt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.playbackProxy=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createPlaybackProxy",value:function(){}},{key:"renderer",value:function e(){var t=this,e=this.playbackProxy.renderer(),n=e.id,i=function(t){return null!=(window.MediaSource||window.WebKitMediaSource)&&e.canPlay(t)},r=function(n){var i=T.transform(t.config.resources,T.map(function(e){return dt.resourceManager.item(n.evaluatePaths(e.src))}),T.filter(function(e){return"function"==typeof e}),T.map(function(e){return e()}));return Promise.all(i).then(function(t){return e.factory(n)})};return{id:n,canPlay:i,factory:r}}},{key:"initialize",value:function(){if(this.playbackProxy=this.createPlaybackProxy(),null!=this.playbackProxy){var e=this.facade.player.retrieveProxy(Ee.NAME);e.registerRenderer(this.renderer())}this.sendNotification(J.INITIALIZED)}},{key:"destroy",value:function(){null!=this.playbackProxy&&this.playbackProxy.destroy()}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Ze),qt=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.decryptionTypes=["com.widevine.alpha"],i.temporalTypes=["vod","live","dvr"],i.playbackCoreName="hls",i.player=null,i.hlsConfig=null,i.fragErrorTime=0,i.timedMedatadata=null,i.currentMedatadata=null,i.id3Track=null,i.manifestParsed=!1,i.details=null,i.quality=-1,i.qualityMode="auto",i.userSwitched=!1,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"canPlayMedium",value:function(e){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canPlayMedium",this).call(this,e)||"audio"===e}},{key:"getConfig",value:function(){var e=L.merge({},this.config.data,this.config.settings),t=this.facade.configuration.getValueOf("withCredentials",this.config);if(t===!0){var n="function"==typeof e.xhrSetup?e.xhrSetup:function(){};e.xhrSetup=function(e,t){e.withCredentials=!0,n(e,t)}}e.debug=this.plugin.proxy.getDebug();var i=this.facade.getPreload();i!==B.NONE&&null==e.autoStartLoad&&(e.autoStartLoad=!0),i===B.AUTO&&null==e.startFragPrefetch&&(e.startFragPrefetch=!0);var r=L.getKeySystem(),a=this.facade.getMedia().keys;return null!=a&&a[r]&&(e.emeEnabled=!0,e.widevineLicenseUrl=a[r].serverURL),e.enableSoftwareAES=null==e.enableSoftwareAES||e.enableSoftwareAES,e}},{key:"init",value:function(){var e=this;this.destroy(),this.manifestParsed=!1,this.userSwitched=!1,this.quality=-1;var n=this.getConfig(),i=new Hls(n);i.attachMedia(this.getMediaElement()),i.on(Hls.Events.MANIFEST_PARSED,this.onManifestParsed.bind(this)),i.on(Hls.Events.ERROR,this.onError.bind(this)),i.on(Hls.Events.LEVEL_LOADED,this.onLevelLoaded.bind(this)),i.on(Hls.Events.LEVEL_SWITCHING,this.onLevelSwitching.bind(this)),i.on(Hls.Events.LEVEL_SWITCHED,this.onLevelSwitched.bind(this)),i.on(Hls.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitch.bind(this)),i.on(Hls.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitch.bind(this)),i.on(Hls.Events.FRAG_LOADING,this.onFragmentLoadStart.bind(this)),i.on(Hls.Events.FRAG_LOADED,this.onFragmentLoaded.bind(this)),i.on(Hls.Events.FRAG_CHANGED,this.onFragmentChanged.bind(this)),T.each(Hls.Events,function(t){i.on(t,function(t,n){e.plugin.sendNotification(J.DISPATCH_EVENT,r.create(t,n))})});try{T.each(this.config.quality,function(e,t){return i[t]=e})}catch(e){}this.player=i,this.details=null,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"unload",value:function(){this.destroy()}},{key:"applySrc",value:function(){this.currentMedatadata=null,this.player.loadSource(this.getSrc()),this.load()}},{key:"onManifestParsed",value:function(e,t){this.manifestParsed=!0,this.sendNotification(J.QUALITY_LEVELS_LOADED,t.levels),this.player.loadLevel=-1}},{key:"onLevelLoaded",value:function(e,t){this.player.levels[t.level].level=t.level,this.sendNotification(J.QUALITY_CHANGE,this.player.levels[t.level]),this.details=t.details;var n=this.details.totalduration;n!==this.data.duration&&(this.data.duration=this.details.totalduration,this.sendNotification(J.CHANGE_DURATION,this.data.duration)),t.details.live===!0&&"dvr"!==this.facade.mediaProxy.getTemporalType()&&this.facade.mediaProxy.setTemporalType("live")}},{key:"onLevelSwitching",value:function(e,t){this.getQualityMode()===vt.MANUAL&&(this.userSwitched=!0),this.sendNotification(J.QUALITY_CHANGING,this.player.levels[t.level])}},{key:"onLevelSwitched",value:function(e,t){this.sendNotification(J.QUALITY_SWITCHED,this.player.levels[t.level])}},{key:"onAudioTrackSwitch",value:function(e,t){var n=e===Hls.Events.AUDIO_TRACK_SWITCHED;this.sendNotification(J.AUDIO_TRACK_SWITCH,{switched:n})}},{key:"onseeking",value:function(e){this.getQualityMode()===vt.MANUAL&&this.userSwitched||babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onseeking",this).call(this,e)}},{key:"onseeked",value:function(e){return this.getQualityMode()===vt.MANUAL&&this.userSwitched?void(this.userSwitched=!1):void babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onseeked",this).call(this,e)}},{key:"onFragmentLoadStart",value:function(e,t){try{var n=this.player.levels[t.frag.level].bitrate;this.sendNotification(J.FRAGMENT_LOAD_START,n)}catch(e){return}}},{key:"onFragmentLoaded",value:function(e,t){try{var n=this.player.levels[t.frag.level].bitrate;this.sendNotification(J.FRAGMENT_LOADED,n)}catch(e){return}}},{key:"onFragmentChanged",value:function(e,t){this.fragment=t.frag}},{key:"ontimeupdate",value:function(e){this.facade.ads.inProgress!==!0&&(this.data.currentTime=this.getCurrentTime(),this.sendNotification(J.TIME_CHANGE,{currentTime:this.data.currentTime}))}},{key:"ondurationchange",value:function(e){var t=this.getDetails().totalduration;t===this.data.duration||0===t||isNaN(t)||(this.data.duration=t,this.sendNotification(J.CHANGE_DURATION,t))}},{key:"oncanplaythrough",value:function(e){this.createTracks(),this.sendNotification(J.CAN_PLAY_THROUGH),this.sendNotification(J.PROGRESS,this.getDuration()),this.qualityMode===vt.MANUAL&&this.player.currentLevel!==this.quality&&this.setQuality(this.quality)}},{key:"getStartTime",value:function(){return this.getMediaElement().duration-this.getDuration()}},{key:"getCurrentTime",value:function(){return this.getMediaElement().currentTime-this.getStartTime()}},{key:"getDetails",value:function(){return this.details||{}}},{key:"getFragmentDuration",value:function(){return this.getDetails().targetduration||0}},{key:"getCurrentTimeUTC",value:function(){var e=void 0,t=void 0;try{e=1e3*(this.getMediaElement().currentTime-this.fragment.start),t=this.fragment.programDateTime||this.fragment.sn}catch(n){t=0,e=0}return Math.round(e+t)}},{key:"goLive",value:function(){this.setCurrentTime(this.getLiveTime())}},{key:"getLiveTime",value:function(){return this.getDuration()-this.getFragmentDuration()}},{key:"isLive",value:function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()}},{key:"seek",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getStartTime();return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"seek",this).call(this,e+i).then(function(e){"dvr"===n.mediaProxy.getTemporalType()&&n.sendNotification(J.IS_LIVE,n.isLive())})}},{key:"onplaying",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onplaying",this).call(this),this.retried=!1}},{key:"onError",value:function(e,t){if(this.userSwitched=!1,this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(D.ERROR,{event:e,data:t})),this.config.ignoreErrors!==!0){if(this.config.retryOnError===!1||this.retried===!0)return this.retried=!1,void this.error(t);if(t.fatal&&t.type===Hls.ErrorTypes.MEDIA_ERROR&&t.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(t.fatal=!1),t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:this.retried=!0,this.manifestParsed?this.player.startLoad():this.player.loadSource(this.getSrc()),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",e);break;case Hls.ErrorTypes.MEDIA_ERROR:this.retried=!0,this.player.recoverMediaError(),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",e);break;default:this.facade.logger.error("[AMP HLS] Playback Error:",e),this.error(t)}else t.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(this.fragErrorTime===this.getMediaElement().currentTime?(this.getMediaElement().currentTime++,this.facade.logger.error("[AMP HLS] Frag Loop Load Error, Seeking to :",this.getMediaElement().currentTime)):this.fragErrorTime=this.getMediaElement().currentTime)}}},{key:"error",value:function(e){switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:e.code=MediaError.MEDIA_ERR_NETWORK;break;case Hls.ErrorTypes.MEDIA_ERROR:e.code=MediaError.MEDIA_ERR_DECODE;break;default:e.toString=function(){return e.message}}e.message=e.type+": "+e.details,this.sendNotification(J.ERROR,e)}},{key:"createTracks",value:function(){function e(e,t){var n=this.facade.tracks.getAudioTracks();n.forEach(function(e){return e.data.enabled=!1}),t===!0&&(n[e.id].data.enabled=!0,this.player.audioTrack=e.id)}var t=this,n=this.player.audioTracks,i=this.player.audioTrack,r=this.facade.tracks.getAudioTracks(),a=n.length;n.forEach(function(n,o){if(L.fieldIsUnique(r,"id",n.id)!==!1){var s=new ce({kind:n.type,label:n.name||n.id,language:n.lang,id:n.id,enabled:n.id===i,data:n});s.changeEnabled=e.bind(t,n),r.add(s,o+1===a)}})}},{key:"setQuality",value:function(e){var t=this.qualityMode;return t=e>-1?vt.MANUAL:vt.AUTO,this.setQualityMode(t),e===this.player.currentLevel?(this.onLevelSwitching("hlsLevelSwitching",this.player.levels[e]),void this.onLevelSwitched("hlsLevelSwitched",{level:e})):(null!=this.player&&(this.player.currentLevel=this.quality=e),this.quality)}},{key:"getQuality",value:function(){var e=this.player,t=null!=e?e.currentLevel:null;return t===-1&&(t=null!=e?e.nextLoadLevel:null),t}},{key:"getQualityLevels",value:function(){var e=this.player;return null!=e?e.levels:babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getQualityLevels",this).call(this)}},{key:"getQualityMode",value:function(){return this.qualityMode}},{key:"setQualityMode",value:function(e){return this.qualityMode=e,e}},{key:"destroy",value:function(){if(null!=this.player)try{babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.player.destroy(),this.player=null}catch(e){}}}]),t}(de),Qt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaults={types:["application/x-mpegURL"],data:{enableWorker:!0,enableCEA708Captions:!0},settings:null,buffer:null,quality:null,withCredentials:null,retryOnError:!0,ignoreErrors:!1},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createPlaybackProxy",value:function(){return new qt(this.getData(),this.facade)}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Kt),Wt=function(e){
function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"execute",value:function(e){var t,n;"freewheel"===(null!=(n=e.getBody())?n.partner:void 0)&&(t=this.facade.player.getPlaybackRate(),this.proxy.destroy(),this.facade.player.setPlaybackRate(t))}}]),t}(Yt),Zt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.moduleName="hls",e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createModel",value:function(){this.proxy=new Qt(this.config),this.registerProxy(this.proxy)}},{key:"createController",value:function(){this.registerCommand(je.BREAK_START,Wt),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createController",this).call(this)}},{key:"logEvent",value:function(e){/^hls/.test(e.type)!==!0&&babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"logEvent",this).call(this,e)}},{key:"listNotificationInterests",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationInterests",this).call(this).concat([je.BREAK_START])}},{key:"listNotificationPublications",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationPublications",this).call(this).concat([J.TIMED_METADATA,J.QUALITY_LEVELS_LOADED,J.QUALITY_CHANGE,J.QUALITY_CHANGING,J.FRAGMENT_LOAD_START,J.FRAGMENT_LOADED])}}]),t}(zt),Xt=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.buffer=e.buffer,i.decryptionTypes=["com.widevine.alpha","com.microsoft.playready","org.w3.clearkey"],i.temporalTypes=["vod","live","dvr"],t.SCTE="urn:scte:scte35:2013:xml",i.playbackCoreName="dash",i.context=null,i.player=null,i.buffer=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"resumecomplete",value:function(){try{var e=this.facade.getMediaElement(),n=null!=e?e.textTracks:void 0;if(0!==(null!=n?n.length:void 0)){var i=n[0];null!=i&&(i.mode="hidden")}}catch(e){}babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resumecomplete",this).call(this)}},{key:"onerror",value:function(){}},{key:"ontimeupdate",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ontimeupdate",this).call(this,{target:{currentTime:this.getCurrentTime()}})}},{key:"onseeked",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onseeked",this).call(this,{target:{currentTime:this.getCurrentTime()}})}},{key:"onseeking",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onseeking",this).call(this,{target:{currentTime:this.getCurrentTime()}})}},{key:"ondurationchange",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ondurationchange",this).call(this,{target:{duration:this.getDuration()}})}},{key:"onloadedmetadata",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onloadedmetadata",this).call(this,e),this.sendNotification(J.CHANGE_DURATION,this.getDuration())}},{key:"oncanplaythrough",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"oncanplaythrough",this).call(this,e),this.sendNotification(J.CHANGE_DURATION,this.getDuration())}},{key:"canPlayMedium",value:function(e){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canPlayMedium",this).call(this,e)||"audio"===e}},{key:"getMedium",value:function(){return L.get(this.facade,["media","medium"])||"video"}},{key:"createTracks",value:function(){var e=this,t=this.player.getTracksFor("audio"),n=this.player.getCurrentTrackFor("audio"),i=this.facade.tracks.getAudioTracks(),r=t.length,a=function(e,t,n){this.facade.tracks.getAudioTracks().forEach(function(e){return e.data.enabled=e===t}),n===!0&&this.player.setCurrentTrack(e)};T.each(t,function(t,o){if(null==t.id||L.fieldIsUnique(i,"id",t.id)!==!1){var s=new ce({kind:t.roles.join(" "),label:t.id,language:t.lang,id:t.id,enabled:t===n,data:t});s.changeEnabled=a.bind(e,t,s),i.add(s,o+1===r)}})}},{key:"logLevel",value:function(){var e=this.plugin.proxy.getDebug(),t="undefined"==typeof e?"undefined":babelHelpers.typeof(e);switch(t){case"number":return e;case"boolean":return e===!0?dashjs.Debug.LOG_LEVEL_DEBUG:dashjs.Debug.LOG_LEVEL_NONE;default:return dashjs.Debug.LOG_LEVEL_NONE}}},{key:"init",value:function(){var e=this;try{var n=this.config;if(null==this.player){var i=dashjs.MediaPlayer().create();i.on(dashjs.MediaPlayer.events.ERROR,this.onError.bind(this)),i.on(dashjs.MediaPlayer.events.FRAGMENT_LOADING_STARTED,this.onFragmentLoadStart.bind(this)),i.on(dashjs.MediaPlayer.events.FRAGMENT_LOADING_COMPLETED,this.onFragmentLoaded.bind(this)),i.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,this.onQualityChangeRequested.bind(this)),i.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,this.onQualityChangeRendered.bind(this)),i.on(dashjs.MediaPlayer.events.MANIFEST_LOADED,this.onManifestLoaded.bind(this)),i.on(dashjs.Protection.events.PROTECTION_CREATED,this.onProtectionCreated.bind(this)),i.on(t.SCTE,this.onEmsg.bind(this)),i.initialize(this.getMediaElement(),null,!1);var r=L.merge({debug:{logLevel:this.logLevel()},streaming:{fastSwitchEnabled:!0}},n.data,n.settings);null!=n.lowLatencyEnabled&&L.set(r,["streaming","lowLatencyEnabled"],n.lowLatencyEnabled),null!=n.liveDelay&&L.set(r,["streaming","liveDelay"],n.liveDelay),null!=n.catchUpPlaybackRate&&L.set(r,["streaming","liveCatchUpPlaybackRate"],n.catchUpPlaybackRate),null!=n.initialBitrate&&L.set(r,["streaming","abr","initialBitrate",this.getMedium()],n.initialBitrate),i.updateSettings(r),this.player=i}var a=this.facade.configuration.getValueOf("withCredentials",n);null!=a&&("boolean"==typeof a&&(a={default:a}),T.each(a,function(t,n){return e.player.setXHRWithCredentialsForType(n,t)})),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}catch(e){this.facade.logger.error(e)}}},{key:"applySrc",value:function(){var e=this.facade.getMedia().keys;null!=e&&this.player.setProtectionData(e),this.player.attachSource(this.getSrc()),this.load()}},{key:"preload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.facade.getPreload();babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"preload",this).call(this,e),e===B.AUTO&&this.player.preload()}},{key:"seek",value:function(e){return Promise.resolve(this.player.seek(e))}},{key:"getCurrentTime",value:function(){return this.player?this.player.time():0}},{key:"getDuration",value:function(){return this.player?this.player.duration():0}},{key:"getCurrentTimeUTC",value:function(){return this.player?Math.round(1e3*this.player.timeAsUTC()):0}},{key:"getStats",value:function(){return{}}},{key:"onFragmentLoadStart",value:function(e){var t=e.request.mediaInfo.bitrateList[e.request.quality].bandwidth;this.sendNotification(J.FRAGMENT_LOAD_START,t)}},{key:"onFragmentLoaded",value:function(e){var t=e.request.mediaInfo.bitrateList[e.request.quality].bandwidth;this.sendNotification(J.FRAGMENT_LOADED,t)}},{key:"onQualityChangeRequested",value:function(e){this.sendNotification(J.QUALITY_CHANGING,this.getQualityLevels()[e.newQuality]),this.sendNotification(J.QUALITY_SWITCHED,this.getQualityLevels()[e.newQuality])}},{key:"onQualityChangeRendered",value:function(e){this.sendNotification(J.QUALITY_SWITCHED,this.getQualityLevels()[e.newQuality])}},{key:"onManifestLoaded",value:function(e){this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(dashjs.MediaPlayer.events.MANIFEST_LOADED,e.data))}},{key:"onProtectionCreated",value:function(e){this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(dashjs.Protection.events.PROTECTION_CREATED,e.data))}},{key:"onEmsg",value:function(e){var n=e.event;this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(e.type,n));var i=DataCue||VTTCue,a=n.presentationTime/n.presentationTimeDelta*1e4,o=a+n.duration/n.presentationTimeDelta*1e4,s=String.fromCharCode.apply(null,n.messageData),l=Pe.parse(s);n.text=s;var u=new i(a,o,{key:t.SCTE,data:n,info:l});this.sendNotification(J.TIMED_METADATA,u)}},{key:"onError",value:function(e){var t=e.error;this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(D.ERROR,t)),this.sendNotification(J.ERROR,t)}},{key:"setQuality",value:function(e){if(this.player){var t=e===-1?vt.AUTO:vt.MANUAL;return this.setQualityMode(t),this.player.setQualityFor("video",e),e}}},{key:"getQuality",value:function(){if(this.player)return this.player.getQualityFor("video")}},{key:"getQualityLevels",value:function(){if(this.player)return this.player.getBitrateInfoListFor("video")||babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getQualityLevels",this).call(this)}},{key:"getQualityMode",value:function(){if(this.player){var e=this.player.getSettings(),t=L.get(e,["streaming","abr","autoSwitchBitrate",this.getMedium()]);return t===!0?vt.AUTO:vt.MANUAL}}},{key:"setQualityMode",value:function(e){if(this.player&&e!==this.getQualityMode()){var t=this.player.getSettings();return L.set(t,["streaming","abr","autoSwitchBitrate",this.getMedium()],e==vt.AUTO),this.player.updateSettings(this.settings),e}}},{key:"destroy",value:function(){this.player&&(this.player.reset(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this))}}]),t}(de),$t=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaults={types:["application/dash+xml"],buffer:null,initialBitrate:null,lowLatencyEnabled:null,liveDelay:null,catchUpPlaybackRate:null,withCredentials:null,data:null,settings:null},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createPlaybackProxy",value:function(){return new Xt(this.getData(),this.facade)}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Kt),Jt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.moduleName="dash",e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createModel",value:function(){this.proxy=new $t(this.config),this.registerProxy(this.proxy)}},{key:"listNotificationPublications",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationPublications",this).call(this).concat([J.FRAGMENT_LOAD_START,J.FRAGMENT_LOADED])}}]),t}(zt);C.constructed=C.construct(),J.init(),dt.registerPlugin("hls","html",Zt),dt.registerPlugin("dash","html",Jt),dt.registerPlugin("captioning","html",Ft);var en=MutationObserver||WebKitMutationObserver,tn=new en(function(e,n){e.forEach(function(e){t(e.addedNodes)})});if(document.body)e();else{var nn=function t(){document.removeEventListener("DOMContentLoaded",t),n(),e()};document.addEventListener("DOMContentLoaded",nn)}n();var rn={fp:T,amp:{ActiveState:ae,Ad:Tt,AdEvents:Object.entries(je).reduce(function(e,t){return e[t[0].replace(/^AD_/,"")]=t[1].replace(/^ads/,""),e},{}),AdPlugin:Et,ads:{AdNotifications:je,AdPlugin:Ht,AdProxy:St,AdRequest:Ot,AdVO:Tt},ApplicationStateProxy:oe,AMP:dt,AMPError:i,AmpError:i,AuthEvents:se,Authorization:gt,AuthPlugin:_t,AuthProvider:pt,AuthProviderList:yt,AutoplayPolicy:G,AutoplayThreshold:U,CaptionRenderer:Dt,CaptionCue:Ne,CaptionTrack:Le,Config:F,CSS:I,Cue:Ce,DataBinding:q,DataBoundConfigurationProxy:Q,DisplayState:ie,Event:r,Events:D,EventDispatcher:a,Logger:w,Media:bt,MediaProxy:_e,Medium:At,ModuleProxy:Q,Notifications:J,OverlayMediator:Ve,PlayerProxy:Ee,PlayState:re,Plugin:kt,Preload:B,QualityMode:vt,QueryString:C,Resource:mt,get Settings(){return rt.GET()},SMPTETTParser:Se,SRTParser:Oe,Timer:o,Transformer:X,TransformType:$,URL:N,Utils:L,XMLUtils:Pe,utils:{Logger:w,QueryString:C,Timer:o,Utils:L,XMLUtils:Pe},WebVTTParser:Me}};return rn}();
(function(){var AMP=akamai.amp.AMP;AMP.LICENSE="NASCAR01";AMP.defaults({paths:{player:"https://amp.akamaized.net/players/9.0.9+premier/akamai/amp/core/",plugins:"https://amp.akamaized.net/players/9.0.9+premier/akamai/amp/"}})}())

	